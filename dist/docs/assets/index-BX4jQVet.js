(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function gi(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const ye={},At=[],et=()=>{},co=()=>!1,Er=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),bi=e=>e.startsWith("onUpdate:"),Oe=Object.assign,_i=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},ho=Object.prototype.hasOwnProperty,pe=(e,t)=>ho.call(e,t),ue=Array.isArray,Lt=e=>cr(e)==="[object Map]",Ar=e=>cr(e)==="[object Set]",Hi=e=>cr(e)==="[object Date]",ce=e=>typeof e=="function",xe=e=>typeof e=="string",tt=e=>typeof e=="symbol",_e=e=>e!==null&&typeof e=="object",Hn=e=>(_e(e)||ce(e))&&ce(e.then)&&ce(e.catch),zn=Object.prototype.toString,cr=e=>zn.call(e),fo=e=>cr(e).slice(8,-1),Kn=e=>cr(e)==="[object Object]",Pi=e=>xe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Gt=gi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lr=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},po=/-(\w)/g,Ve=Lr(e=>e.replace(po,(t,i)=>i?i.toUpperCase():"")),vo=/\B([A-Z])/g,kt=Lr(e=>e.replace(vo,"-$1").toLowerCase()),Ir=Lr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kr=Lr(e=>e?`on${Ir(e)}`:""),bt=(e,t)=>!Object.is(e,t),yr=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Wn=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},ri=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let zi;const Mr=()=>zi||(zi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function He(e){if(ue(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],r=xe(n)?bo(n):He(n);if(r)for(const o in r)t[o]=r[o]}return t}else if(xe(e)||_e(e))return e}const mo=/;(?![^(]*\))/g,yo=/:([^]+)/,go=/\/\*[^]*?\*\//g;function bo(e){const t={};return e.replace(go,"").split(mo).forEach(i=>{if(i){const n=i.split(yo);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function xi(e){let t="";if(xe(e))t=e;else if(ue(e))for(let i=0;i<e.length;i++){const n=xi(e[i]);n&&(t+=n+" ")}else if(_e(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const _o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Po=gi(_o);function qn(e){return!!e||e===""}function xo(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=Ut(e[n],t[n]);return i}function Ut(e,t){if(e===t)return!0;let i=Hi(e),n=Hi(t);if(i||n)return i&&n?e.getTime()===t.getTime():!1;if(i=tt(e),n=tt(t),i||n)return e===t;if(i=ue(e),n=ue(t),i||n)return i&&n?xo(e,t):!1;if(i=_e(e),n=_e(t),i||n){if(!i||!n)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const p in e){const v=e.hasOwnProperty(p),u=t.hasOwnProperty(p);if(v&&!u||!v&&u||!Ut(e[p],t[p]))return!1}}return String(e)===String(t)}function $n(e,t){return e.findIndex(i=>Ut(i,t))}const Gn=e=>!!(e&&e.__v_isRef===!0),Ne=e=>xe(e)?e:e==null?"":ue(e)||_e(e)&&(e.toString===zn||!ce(e.toString))?Gn(e)?Ne(e.value):JSON.stringify(e,Xn,2):String(e),Xn=(e,t)=>Gn(t)?Xn(e,t.value):Lt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,r],o)=>(i[Wr(n,o)+" =>"]=r,i),{})}:Ar(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>Wr(i))}:tt(t)?Wr(t):_e(t)&&!ue(t)&&!Kn(t)?String(t):t,Wr=(e,t="")=>{var i;return tt(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ae;class So{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ae,!t&&Ae&&(this.index=(Ae.scopes||(Ae.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=Ae;try{return Ae=this,t()}finally{Ae=i}}}on(){++this._on===1&&(this.prevScope=Ae,Ae=this)}off(){this._on>0&&--this._on===0&&(Ae=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function To(){return Ae}let be;const qr=new WeakSet;class Yn{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ae&&Ae.active&&Ae.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qr.has(this)&&(qr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qn(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ki(this),Jn(this);const t=be,i=ze;be=this,ze=!0;try{return this.fn()}finally{ea(this),be=t,ze=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)wi(t);this.deps=this.depsTail=void 0,Ki(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ii(this)&&this.run()}get dirty(){return ii(this)}}let Zn=0,Xt,Yt;function Qn(e,t=!1){if(e.flags|=8,t){e.next=Yt,Yt=e;return}e.next=Xt,Xt=e}function Si(){Zn++}function Ti(){if(--Zn>0)return;if(Yt){let t=Yt;for(Yt=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;Xt;){let t=Xt;for(Xt=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function Jn(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ea(e){let t,i=e.depsTail,n=i;for(;n;){const r=n.prevDep;n.version===-1?(n===i&&(i=r),wi(n),wo(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}e.deps=t,e.depsTail=i}function ii(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ta(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ta(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ir)||(e.globalVersion=ir,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ii(e))))return;e.flags|=2;const t=e.dep,i=be,n=ze;be=e,ze=!0;try{Jn(e);const r=e.fn(e._value);(t.version===0||bt(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{be=i,ze=n,ea(e),e.flags&=-3}}function wi(e,t=!1){const{dep:i,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let o=i.computed.deps;o;o=o.nextDep)wi(o,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function wo(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let ze=!0;const ra=[];function dt(){ra.push(ze),ze=!1}function ht(){const e=ra.pop();ze=e===void 0?!0:e}function Ki(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=be;be=void 0;try{t()}finally{be=i}}}let ir=0;class ko{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ki{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!be||!ze||be===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==be)i=this.activeLink=new ko(be,this),be.deps?(i.prevDep=be.depsTail,be.depsTail.nextDep=i,be.depsTail=i):be.deps=be.depsTail=i,ia(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=be.depsTail,i.nextDep=void 0,be.depsTail.nextDep=i,be.depsTail=i,be.deps===i&&(be.deps=n)}return i}trigger(t){this.version++,ir++,this.notify(t)}notify(t){Si();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Ti()}}}function ia(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)ia(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const ni=new WeakMap,Tt=Symbol(""),ai=Symbol(""),nr=Symbol("");function Te(e,t,i){if(ze&&be){let n=ni.get(e);n||ni.set(e,n=new Map);let r=n.get(i);r||(n.set(i,r=new ki),r.map=n,r.key=i),r.track()}}function ot(e,t,i,n,r,o){const p=ni.get(e);if(!p){ir++;return}const v=u=>{u&&u.trigger()};if(Si(),t==="clear")p.forEach(v);else{const u=ue(e),f=u&&Pi(i);if(u&&i==="length"){const d=Number(n);p.forEach((l,P)=>{(P==="length"||P===nr||!tt(P)&&P>=d)&&v(l)})}else switch((i!==void 0||p.has(void 0))&&v(p.get(i)),f&&v(p.get(nr)),t){case"add":u?f&&v(p.get("length")):(v(p.get(Tt)),Lt(e)&&v(p.get(ai)));break;case"delete":u||(v(p.get(Tt)),Lt(e)&&v(p.get(ai)));break;case"set":Lt(e)&&v(p.get(Tt));break}}Ti()}function Ct(e){const t=fe(e);return t===e?t:(Te(t,"iterate",nr),Ke(e)?t:t.map(Re))}function Oi(e){return Te(e=fe(e),"iterate",nr),e}const Oo={__proto__:null,[Symbol.iterator](){return $r(this,Symbol.iterator,Re)},concat(...e){return Ct(this).concat(...e.map(t=>ue(t)?Ct(t):t))},entries(){return $r(this,"entries",e=>(e[1]=Re(e[1]),e))},every(e,t){return it(this,"every",e,t,void 0,arguments)},filter(e,t){return it(this,"filter",e,t,i=>i.map(Re),arguments)},find(e,t){return it(this,"find",e,t,Re,arguments)},findIndex(e,t){return it(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return it(this,"findLast",e,t,Re,arguments)},findLastIndex(e,t){return it(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return it(this,"forEach",e,t,void 0,arguments)},includes(...e){return Gr(this,"includes",e)},indexOf(...e){return Gr(this,"indexOf",e)},join(e){return Ct(this).join(e)},lastIndexOf(...e){return Gr(this,"lastIndexOf",e)},map(e,t){return it(this,"map",e,t,void 0,arguments)},pop(){return Kt(this,"pop")},push(...e){return Kt(this,"push",e)},reduce(e,...t){return Wi(this,"reduce",e,t)},reduceRight(e,...t){return Wi(this,"reduceRight",e,t)},shift(){return Kt(this,"shift")},some(e,t){return it(this,"some",e,t,void 0,arguments)},splice(...e){return Kt(this,"splice",e)},toReversed(){return Ct(this).toReversed()},toSorted(e){return Ct(this).toSorted(e)},toSpliced(...e){return Ct(this).toSpliced(...e)},unshift(...e){return Kt(this,"unshift",e)},values(){return $r(this,"values",Re)}};function $r(e,t,i){const n=Oi(e),r=n[t]();return n!==e&&!Ke(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=i(o.value)),o}),r}const Co=Array.prototype;function it(e,t,i,n,r,o){const p=Oi(e),v=p!==e&&!Ke(e),u=p[t];if(u!==Co[t]){const l=u.apply(e,o);return v?Re(l):l}let f=i;p!==e&&(v?f=function(l,P){return i.call(this,Re(l),P,e)}:i.length>2&&(f=function(l,P){return i.call(this,l,P,e)}));const d=u.call(p,f,n);return v&&r?r(d):d}function Wi(e,t,i,n){const r=Oi(e);let o=i;return r!==e&&(Ke(e)?i.length>3&&(o=function(p,v,u){return i.call(this,p,v,u,e)}):o=function(p,v,u){return i.call(this,p,Re(v),u,e)}),r[t](o,...n)}function Gr(e,t,i){const n=fe(e);Te(n,"iterate",nr);const r=n[t](...i);return(r===-1||r===!1)&&Fi(i[0])?(i[0]=fe(i[0]),n[t](...i)):r}function Kt(e,t,i=[]){dt(),Si();const n=fe(e)[t].apply(e,i);return Ti(),ht(),n}const Ro=gi("__proto__,__v_isRef,__isVue"),na=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(tt));function Fo(e){tt(e)||(e=String(e));const t=fe(this);return Te(t,"has",e),t.hasOwnProperty(e)}class aa{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const r=this._isReadonly,o=this._isShallow;if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return o;if(i==="__v_raw")return n===(r?o?jo:ua:o?la:sa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const p=ue(t);if(!r){let u;if(p&&(u=Oo[i]))return u;if(i==="hasOwnProperty")return Fo}const v=Reflect.get(t,i,ke(t)?t:n);return(tt(i)?na.has(i):Ro(i))||(r||Te(t,"get",i),o)?v:ke(v)?p&&Pi(i)?v:v.value:_e(v)?r?da(v):Dr(v):v}}class oa extends aa{constructor(t=!1){super(!1,t)}set(t,i,n,r){let o=t[i];if(!this._isShallow){const u=wt(o);if(!Ke(n)&&!wt(n)&&(o=fe(o),n=fe(n)),!ue(t)&&ke(o)&&!ke(n))return u?!1:(o.value=n,!0)}const p=ue(t)&&Pi(i)?Number(i)<t.length:pe(t,i),v=Reflect.set(t,i,n,ke(t)?t:r);return t===fe(r)&&(p?bt(n,o)&&ot(t,"set",i,n):ot(t,"add",i,n)),v}deleteProperty(t,i){const n=pe(t,i);t[i];const r=Reflect.deleteProperty(t,i);return r&&n&&ot(t,"delete",i,void 0),r}has(t,i){const n=Reflect.has(t,i);return(!tt(i)||!na.has(i))&&Te(t,"has",i),n}ownKeys(t){return Te(t,"iterate",ue(t)?"length":Tt),Reflect.ownKeys(t)}}class Eo extends aa{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Ao=new oa,Lo=new Eo,Io=new oa(!0);const oi=e=>e,pr=e=>Reflect.getPrototypeOf(e);function Mo(e,t,i){return function(...n){const r=this.__v_raw,o=fe(r),p=Lt(o),v=e==="entries"||e===Symbol.iterator&&p,u=e==="keys"&&p,f=r[e](...n),d=i?oi:t?si:Re;return!t&&Te(o,"iterate",u?ai:Tt),{next(){const{value:l,done:P}=f.next();return P?{value:l,done:P}:{value:v?[d(l[0]),d(l[1])]:d(l),done:P}},[Symbol.iterator](){return this}}}}function vr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Do(e,t){const i={get(r){const o=this.__v_raw,p=fe(o),v=fe(r);e||(bt(r,v)&&Te(p,"get",r),Te(p,"get",v));const{has:u}=pr(p),f=t?oi:e?si:Re;if(u.call(p,r))return f(o.get(r));if(u.call(p,v))return f(o.get(v));o!==p&&o.get(r)},get size(){const r=this.__v_raw;return!e&&Te(fe(r),"iterate",Tt),Reflect.get(r,"size",r)},has(r){const o=this.__v_raw,p=fe(o),v=fe(r);return e||(bt(r,v)&&Te(p,"has",r),Te(p,"has",v)),r===v?o.has(r):o.has(r)||o.has(v)},forEach(r,o){const p=this,v=p.__v_raw,u=fe(v),f=t?oi:e?si:Re;return!e&&Te(u,"iterate",Tt),v.forEach((d,l)=>r.call(o,f(d),f(l),p))}};return Oe(i,e?{add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear")}:{add(r){!t&&!Ke(r)&&!wt(r)&&(r=fe(r));const o=fe(this);return pr(o).has.call(o,r)||(o.add(r),ot(o,"add",r,r)),this},set(r,o){!t&&!Ke(o)&&!wt(o)&&(o=fe(o));const p=fe(this),{has:v,get:u}=pr(p);let f=v.call(p,r);f||(r=fe(r),f=v.call(p,r));const d=u.call(p,r);return p.set(r,o),f?bt(o,d)&&ot(p,"set",r,o):ot(p,"add",r,o),this},delete(r){const o=fe(this),{has:p,get:v}=pr(o);let u=p.call(o,r);u||(r=fe(r),u=p.call(o,r)),v&&v.call(o,r);const f=o.delete(r);return u&&ot(o,"delete",r,void 0),f},clear(){const r=fe(this),o=r.size!==0,p=r.clear();return o&&ot(r,"clear",void 0,void 0),p}}),["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=Mo(r,e,t)}),i}function Ci(e,t){const i=Do(e,t);return(n,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(pe(i,r)&&r in n?i:n,r,o)}const Uo={get:Ci(!1,!1)},Vo={get:Ci(!1,!0)},No={get:Ci(!0,!1)};const sa=new WeakMap,la=new WeakMap,ua=new WeakMap,jo=new WeakMap;function Bo(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ho(e){return e.__v_skip||!Object.isExtensible(e)?0:Bo(fo(e))}function Dr(e){return wt(e)?e:Ri(e,!1,Ao,Uo,sa)}function ca(e){return Ri(e,!1,Io,Vo,la)}function da(e){return Ri(e,!0,Lo,No,ua)}function Ri(e,t,i,n,r){if(!_e(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Ho(e);if(o===0)return e;const p=r.get(e);if(p)return p;const v=new Proxy(e,o===2?n:i);return r.set(e,v),v}function Zt(e){return wt(e)?Zt(e.__v_raw):!!(e&&e.__v_isReactive)}function wt(e){return!!(e&&e.__v_isReadonly)}function Ke(e){return!!(e&&e.__v_isShallow)}function Fi(e){return e?!!e.__v_raw:!1}function fe(e){const t=e&&e.__v_raw;return t?fe(t):e}function zo(e){return!pe(e,"__v_skip")&&Object.isExtensible(e)&&Wn(e,"__v_skip",!0),e}const Re=e=>_e(e)?Dr(e):e,si=e=>_e(e)?da(e):e;function ke(e){return e?e.__v_isRef===!0:!1}function me(e){return ha(e,!1)}function Ko(e){return ha(e,!0)}function ha(e,t){return ke(e)?e:new Wo(e,t)}class Wo{constructor(t,i){this.dep=new ki,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:fe(t),this._value=i?t:Re(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||Ke(t)||wt(t);t=n?t:fe(t),bt(t,i)&&(this._rawValue=t,this._value=n?t:Re(t),this.dep.trigger())}}function lt(e){return ke(e)?e.value:e}const qo={get:(e,t,i)=>t==="__v_raw"?e:lt(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const r=e[t];return ke(r)&&!ke(i)?(r.value=i,!0):Reflect.set(e,t,i,n)}};function fa(e){return Zt(e)?e:new Proxy(e,qo)}class $o{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new ki(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ir-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&be!==this)return Qn(this,!0),!0}get value(){const t=this.dep.track();return ta(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Go(e,t,i=!1){let n,r;return ce(e)?n=e:(n=e.get,r=e.set),new $o(n,r,i)}const mr={},Tr=new WeakMap;let xt;function Xo(e,t=!1,i=xt){if(i){let n=Tr.get(i);n||Tr.set(i,n=[]),n.push(e)}}function Yo(e,t,i=ye){const{immediate:n,deep:r,once:o,scheduler:p,augmentJob:v,call:u}=i,f=y=>r?y:Ke(y)||r===!1||r===0?st(y,1):st(y);let d,l,P,_,a=!1,s=!1;if(ke(e)?(l=()=>e.value,a=Ke(e)):Zt(e)?(l=()=>f(e),a=!0):ue(e)?(s=!0,a=e.some(y=>Zt(y)||Ke(y)),l=()=>e.map(y=>{if(ke(y))return y.value;if(Zt(y))return f(y);if(ce(y))return u?u(y,2):y()})):ce(e)?t?l=u?()=>u(e,2):e:l=()=>{if(P){dt();try{P()}finally{ht()}}const y=xt;xt=d;try{return u?u(e,3,[_]):e(_)}finally{xt=y}}:l=et,t&&r){const y=l,x=r===!0?1/0:r;l=()=>st(y(),x)}const c=To(),m=()=>{d.stop(),c&&c.active&&_i(c.effects,d)};if(o&&t){const y=t;t=(...x)=>{y(...x),m()}}let h=s?new Array(e.length).fill(mr):mr;const g=y=>{if(!(!(d.flags&1)||!d.dirty&&!y))if(t){const x=d.run();if(r||a||(s?x.some((T,w)=>bt(T,h[w])):bt(x,h))){P&&P();const T=xt;xt=d;try{const w=[x,h===mr?void 0:s&&h[0]===mr?[]:h,_];h=x,u?u(t,3,w):t(...w)}finally{xt=T}}}else d.run()};return v&&v(g),d=new Yn(l),d.scheduler=p?()=>p(g,!1):g,_=y=>Xo(y,!1,d),P=d.onStop=()=>{const y=Tr.get(d);if(y){if(u)u(y,4);else for(const x of y)x();Tr.delete(d)}},t?n?g(!0):h=d.run():p?p(g.bind(null,!0),!0):d.run(),m.pause=d.pause.bind(d),m.resume=d.resume.bind(d),m.stop=m,m}function st(e,t=1/0,i){if(t<=0||!_e(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,ke(e))st(e.value,t,i);else if(ue(e))for(let n=0;n<e.length;n++)st(e[n],t,i);else if(Ar(e)||Lt(e))e.forEach(n=>{st(n,t,i)});else if(Kn(e)){for(const n in e)st(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&st(e[n],t,i)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function dr(e,t,i,n){try{return n?e(...n):e()}catch(r){Ur(r,t,i)}}function rt(e,t,i,n){if(ce(e)){const r=dr(e,t,i,n);return r&&Hn(r)&&r.catch(o=>{Ur(o,t,i)}),r}if(ue(e)){const r=[];for(let o=0;o<e.length;o++)r.push(rt(e[o],t,i,n));return r}}function Ur(e,t,i,n=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:p}=t&&t.appContext.config||ye;if(t){let v=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${i}`;for(;v;){const d=v.ec;if(d){for(let l=0;l<d.length;l++)if(d[l](e,u,f)===!1)return}v=v.parent}if(o){dt(),dr(o,null,10,[e,u,f]),ht();return}}Zo(e,i,r,n,p)}function Zo(e,t,i,n=!0,r=!1){if(r)throw e;console.error(e)}const Fe=[];let Qe=-1;const It=[];let vt=null,Ft=0;const pa=Promise.resolve();let wr=null;function Vr(e){const t=wr||pa;return e?t.then(this?e.bind(this):e):t}function Qo(e){let t=Qe+1,i=Fe.length;for(;t<i;){const n=t+i>>>1,r=Fe[n],o=ar(r);o<e||o===e&&r.flags&2?t=n+1:i=n}return t}function Ei(e){if(!(e.flags&1)){const t=ar(e),i=Fe[Fe.length-1];!i||!(e.flags&2)&&t>=ar(i)?Fe.push(e):Fe.splice(Qo(t),0,e),e.flags|=1,va()}}function va(){wr||(wr=pa.then(ya))}function Jo(e){ue(e)?It.push(...e):vt&&e.id===-1?vt.splice(Ft+1,0,e):e.flags&1||(It.push(e),e.flags|=1),va()}function qi(e,t,i=Qe+1){for(;i<Fe.length;i++){const n=Fe[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Fe.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ma(e){if(It.length){const t=[...new Set(It)].sort((i,n)=>ar(i)-ar(n));if(It.length=0,vt){vt.push(...t);return}for(vt=t,Ft=0;Ft<vt.length;Ft++){const i=vt[Ft];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}vt=null,Ft=0}}const ar=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ya(e){try{for(Qe=0;Qe<Fe.length;Qe++){const t=Fe[Qe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),dr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Qe<Fe.length;Qe++){const t=Fe[Qe];t&&(t.flags&=-2)}Qe=-1,Fe.length=0,ma(),wr=null,(Fe.length||It.length)&&ya()}}let De=null,ga=null;function kr(e){const t=De;return De=e,ga=e&&e.type.__scopeId||null,t}function St(e,t=De,i){if(!t||e._n)return e;const n=(...r)=>{n._d&&rn(-1);const o=kr(t);let p;try{p=e(...r)}finally{kr(o),n._d&&rn(1)}return p};return n._n=!0,n._c=!0,n._d=!0,n}function Rt(e,t){if(De===null)return e;const i=Hr(De),n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,p,v,u=ye]=t[r];o&&(ce(o)&&(o={mounted:o,updated:o}),o.deep&&st(p),n.push({dir:o,instance:i,value:p,oldValue:void 0,arg:v,modifiers:u}))}return e}function _t(e,t,i,n){const r=e.dirs,o=t&&t.dirs;for(let p=0;p<r.length;p++){const v=r[p];o&&(v.oldValue=o[p].value);let u=v.dir[n];u&&(dt(),rt(u,i,8,[e.el,v,e,t]),ht())}}const es=Symbol("_vte"),ts=e=>e.__isTeleport;function Ai(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ai(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Ot(e,t){return ce(e)?Oe({name:e.name},t,{setup:e}):e}function ba(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Or(e,t,i,n,r=!1){if(ue(e)){e.forEach((a,s)=>Or(a,t&&(ue(t)?t[s]:t),i,n,r));return}if(Qt(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Or(e,t,i,n.component.subTree);return}const o=n.shapeFlag&4?Hr(n.component):n.el,p=r?null:o,{i:v,r:u}=e,f=t&&t.r,d=v.refs===ye?v.refs={}:v.refs,l=v.setupState,P=fe(l),_=l===ye?()=>!1:a=>pe(P,a);if(f!=null&&f!==u&&(xe(f)?(d[f]=null,_(f)&&(l[f]=null)):ke(f)&&(f.value=null)),ce(u))dr(u,v,12,[p,d]);else{const a=xe(u),s=ke(u);if(a||s){const c=()=>{if(e.f){const m=a?_(u)?l[u]:d[u]:u.value;r?ue(m)&&_i(m,o):ue(m)?m.includes(o)||m.push(o):a?(d[u]=[o],_(u)&&(l[u]=d[u])):(u.value=[o],e.k&&(d[e.k]=u.value))}else a?(d[u]=p,_(u)&&(l[u]=p)):s&&(u.value=p,e.k&&(d[e.k]=p))};p?(c.id=-1,Me(c,i)):c()}}}Mr().requestIdleCallback;Mr().cancelIdleCallback;const Qt=e=>!!e.type.__asyncLoader,_a=e=>e.type.__isKeepAlive;function rs(e,t){Pa(e,"a",t)}function is(e,t){Pa(e,"da",t)}function Pa(e,t,i=we){const n=e.__wdc||(e.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Nr(t,n,i),i){let r=i.parent;for(;r&&r.parent;)_a(r.parent.vnode)&&ns(n,t,i,r),r=r.parent}}function ns(e,t,i,n){const r=Nr(t,e,n,!0);xa(()=>{_i(n[t],r)},i)}function Nr(e,t,i=we,n=!1){if(i){const r=i[e]||(i[e]=[]),o=t.__weh||(t.__weh=(...p)=>{dt();const v=hr(i),u=rt(t,i,e,p);return v(),ht(),u});return n?r.unshift(o):r.push(o),o}}const ft=e=>(t,i=we)=>{(!sr||e==="sp")&&Nr(e,(...n)=>t(...n),i)},as=ft("bm"),Li=ft("m"),os=ft("bu"),ss=ft("u"),ls=ft("bum"),xa=ft("um"),us=ft("sp"),cs=ft("rtg"),ds=ft("rtc");function hs(e,t=we){Nr("ec",e,t)}const fs="components";function li(e,t){return vs(fs,e,!0,t)||e}const ps=Symbol.for("v-ndc");function vs(e,t,i=!0,n=!1){const r=De||we;if(r){const o=r.type;{const v=rl(o,!1);if(v&&(v===t||v===Ve(t)||v===Ir(Ve(t))))return o}const p=$i(r[e]||o[e],t)||$i(r.appContext[e],t);return!p&&n?o:p}}function $i(e,t){return e&&(e[t]||e[Ve(t)]||e[Ir(Ve(t))])}const ui=e=>e?Ba(e)?Hr(e):ui(e.parent):null,Jt=Oe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ui(e.parent),$root:e=>ui(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ta(e),$forceUpdate:e=>e.f||(e.f=()=>{Ei(e.update)}),$nextTick:e=>e.n||(e.n=Vr.bind(e.proxy)),$watch:e=>Ds.bind(e)}),Xr=(e,t)=>e!==ye&&!e.__isScriptSetup&&pe(e,t),ms={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:r,props:o,accessCache:p,type:v,appContext:u}=e;let f;if(t[0]!=="$"){const _=p[t];if(_!==void 0)switch(_){case 1:return n[t];case 2:return r[t];case 4:return i[t];case 3:return o[t]}else{if(Xr(n,t))return p[t]=1,n[t];if(r!==ye&&pe(r,t))return p[t]=2,r[t];if((f=e.propsOptions[0])&&pe(f,t))return p[t]=3,o[t];if(i!==ye&&pe(i,t))return p[t]=4,i[t];ci&&(p[t]=0)}}const d=Jt[t];let l,P;if(d)return t==="$attrs"&&Te(e.attrs,"get",""),d(e);if((l=v.__cssModules)&&(l=l[t]))return l;if(i!==ye&&pe(i,t))return p[t]=4,i[t];if(P=u.config.globalProperties,pe(P,t))return P[t]},set({_:e},t,i){const{data:n,setupState:r,ctx:o}=e;return Xr(r,t)?(r[t]=i,!0):n!==ye&&pe(n,t)?(n[t]=i,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:r,propsOptions:o}},p){let v;return!!i[p]||e!==ye&&pe(e,p)||Xr(t,p)||(v=o[0])&&pe(v,p)||pe(n,p)||pe(Jt,p)||pe(r.config.globalProperties,p)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:pe(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Gi(e){return ue(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let ci=!0;function ys(e){const t=Ta(e),i=e.proxy,n=e.ctx;ci=!1,t.beforeCreate&&Xi(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:p,watch:v,provide:u,inject:f,created:d,beforeMount:l,mounted:P,beforeUpdate:_,updated:a,activated:s,deactivated:c,beforeDestroy:m,beforeUnmount:h,destroyed:g,unmounted:y,render:x,renderTracked:T,renderTriggered:w,errorCaptured:D,serverPrefetch:j,expose:F,inheritAttrs:I,components:Y,directives:J,filters:re}=t;if(f&&gs(f,n,null),p)for(const S in p){const k=p[S];ce(k)&&(n[S]=k.bind(i))}if(r){const S=r.call(i,i);_e(S)&&(e.data=Dr(S))}if(ci=!0,o)for(const S in o){const k=o[S],E=ce(k)?k.bind(i,i):ce(k.get)?k.get.bind(i,i):et,B=!ce(k)&&ce(k.set)?k.set.bind(i):et,z=Be({get:E,set:B});Object.defineProperty(n,S,{enumerable:!0,configurable:!0,get:()=>z.value,set:H=>z.value=H})}if(v)for(const S in v)Sa(v[S],n,i,S);if(u){const S=ce(u)?u.call(i):u;Reflect.ownKeys(S).forEach(k=>{gr(k,S[k])})}d&&Xi(d,e,"c");function b(S,k){ue(k)?k.forEach(E=>S(E.bind(i))):k&&S(k.bind(i))}if(b(as,l),b(Li,P),b(os,_),b(ss,a),b(rs,s),b(is,c),b(hs,D),b(ds,T),b(cs,w),b(ls,h),b(xa,y),b(us,j),ue(F))if(F.length){const S=e.exposed||(e.exposed={});F.forEach(k=>{Object.defineProperty(S,k,{get:()=>i[k],set:E=>i[k]=E})})}else e.exposed||(e.exposed={});x&&e.render===et&&(e.render=x),I!=null&&(e.inheritAttrs=I),Y&&(e.components=Y),J&&(e.directives=J),j&&ba(e)}function gs(e,t,i=et){ue(e)&&(e=di(e));for(const n in e){const r=e[n];let o;_e(r)?"default"in r?o=ut(r.from||n,r.default,!0):o=ut(r.from||n):o=ut(r),ke(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:p=>o.value=p}):t[n]=o}}function Xi(e,t,i){rt(ue(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function Sa(e,t,i,n){let r=n.includes(".")?Ua(i,n):()=>i[n];if(xe(e)){const o=t[e];ce(o)&&Dt(r,o)}else if(ce(e))Dt(r,e.bind(i));else if(_e(e))if(ue(e))e.forEach(o=>Sa(o,t,i,n));else{const o=ce(e.handler)?e.handler.bind(i):t[e.handler];ce(o)&&Dt(r,o,e)}}function Ta(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:p}}=e.appContext,v=o.get(t);let u;return v?u=v:!r.length&&!i&&!n?u=t:(u={},r.length&&r.forEach(f=>Cr(u,f,p,!0)),Cr(u,t,p)),_e(t)&&o.set(t,u),u}function Cr(e,t,i,n=!1){const{mixins:r,extends:o}=t;o&&Cr(e,o,i,!0),r&&r.forEach(p=>Cr(e,p,i,!0));for(const p in t)if(!(n&&p==="expose")){const v=bs[p]||i&&i[p];e[p]=v?v(e[p],t[p]):t[p]}return e}const bs={data:Yi,props:Zi,emits:Zi,methods:$t,computed:$t,beforeCreate:Ce,created:Ce,beforeMount:Ce,mounted:Ce,beforeUpdate:Ce,updated:Ce,beforeDestroy:Ce,beforeUnmount:Ce,destroyed:Ce,unmounted:Ce,activated:Ce,deactivated:Ce,errorCaptured:Ce,serverPrefetch:Ce,components:$t,directives:$t,watch:Ps,provide:Yi,inject:_s};function Yi(e,t){return t?e?function(){return Oe(ce(e)?e.call(this,this):e,ce(t)?t.call(this,this):t)}:t:e}function _s(e,t){return $t(di(e),di(t))}function di(e){if(ue(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Ce(e,t){return e?[...new Set([].concat(e,t))]:t}function $t(e,t){return e?Oe(Object.create(null),e,t):t}function Zi(e,t){return e?ue(e)&&ue(t)?[...new Set([...e,...t])]:Oe(Object.create(null),Gi(e),Gi(t??{})):t}function Ps(e,t){if(!e)return t;if(!t)return e;const i=Oe(Object.create(null),e);for(const n in t)i[n]=Ce(e[n],t[n]);return i}function wa(){return{app:null,config:{isNativeTag:co,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xs=0;function Ss(e,t){return function(n,r=null){ce(n)||(n=Oe({},n)),r!=null&&!_e(r)&&(r=null);const o=wa(),p=new WeakSet,v=[];let u=!1;const f=o.app={_uid:xs++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:nl,get config(){return o.config},set config(d){},use(d,...l){return p.has(d)||(d&&ce(d.install)?(p.add(d),d.install(f,...l)):ce(d)&&(p.add(d),d(f,...l))),f},mixin(d){return o.mixins.includes(d)||o.mixins.push(d),f},component(d,l){return l?(o.components[d]=l,f):o.components[d]},directive(d,l){return l?(o.directives[d]=l,f):o.directives[d]},mount(d,l,P){if(!u){const _=f._ceVNode||Pe(n,r);return _.appContext=o,P===!0?P="svg":P===!1&&(P=void 0),e(_,d,P),u=!0,f._container=d,d.__vue_app__=f,Hr(_.component)}},onUnmount(d){v.push(d)},unmount(){u&&(rt(v,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,l){return o.provides[d]=l,f},runWithContext(d){const l=Mt;Mt=f;try{return d()}finally{Mt=l}}};return f}}let Mt=null;function gr(e,t){if(we){let i=we.provides;const n=we.parent&&we.parent.provides;n===i&&(i=we.provides=Object.create(n)),i[e]=t}}function ut(e,t,i=!1){const n=we||De;if(n||Mt){let r=Mt?Mt._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return i&&ce(t)?t.call(n&&n.proxy):t}}const ka={},Oa=()=>Object.create(ka),Ca=e=>Object.getPrototypeOf(e)===ka;function Ts(e,t,i,n=!1){const r={},o=Oa();e.propsDefaults=Object.create(null),Ra(e,t,r,o);for(const p in e.propsOptions[0])p in r||(r[p]=void 0);i?e.props=n?r:ca(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function ws(e,t,i,n){const{props:r,attrs:o,vnode:{patchFlag:p}}=e,v=fe(r),[u]=e.propsOptions;let f=!1;if((n||p>0)&&!(p&16)){if(p&8){const d=e.vnode.dynamicProps;for(let l=0;l<d.length;l++){let P=d[l];if(jr(e.emitsOptions,P))continue;const _=t[P];if(u)if(pe(o,P))_!==o[P]&&(o[P]=_,f=!0);else{const a=Ve(P);r[a]=hi(u,v,a,_,e,!1)}else _!==o[P]&&(o[P]=_,f=!0)}}}else{Ra(e,t,r,o)&&(f=!0);let d;for(const l in v)(!t||!pe(t,l)&&((d=kt(l))===l||!pe(t,d)))&&(u?i&&(i[l]!==void 0||i[d]!==void 0)&&(r[l]=hi(u,v,l,void 0,e,!0)):delete r[l]);if(o!==v)for(const l in o)(!t||!pe(t,l))&&(delete o[l],f=!0)}f&&ot(e.attrs,"set","")}function Ra(e,t,i,n){const[r,o]=e.propsOptions;let p=!1,v;if(t)for(let u in t){if(Gt(u))continue;const f=t[u];let d;r&&pe(r,d=Ve(u))?!o||!o.includes(d)?i[d]=f:(v||(v={}))[d]=f:jr(e.emitsOptions,u)||(!(u in n)||f!==n[u])&&(n[u]=f,p=!0)}if(o){const u=fe(i),f=v||ye;for(let d=0;d<o.length;d++){const l=o[d];i[l]=hi(r,u,l,f[l],e,!pe(f,l))}}return p}function hi(e,t,i,n,r,o){const p=e[i];if(p!=null){const v=pe(p,"default");if(v&&n===void 0){const u=p.default;if(p.type!==Function&&!p.skipFactory&&ce(u)){const{propsDefaults:f}=r;if(i in f)n=f[i];else{const d=hr(r);n=f[i]=u.call(null,t),d()}}else n=u;r.ce&&r.ce._setProp(i,n)}p[0]&&(o&&!v?n=!1:p[1]&&(n===""||n===kt(i))&&(n=!0))}return n}const ks=new WeakMap;function Fa(e,t,i=!1){const n=i?ks:t.propsCache,r=n.get(e);if(r)return r;const o=e.props,p={},v=[];let u=!1;if(!ce(e)){const d=l=>{u=!0;const[P,_]=Fa(l,t,!0);Oe(p,P),_&&v.push(..._)};!i&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!o&&!u)return _e(e)&&n.set(e,At),At;if(ue(o))for(let d=0;d<o.length;d++){const l=Ve(o[d]);Qi(l)&&(p[l]=ye)}else if(o)for(const d in o){const l=Ve(d);if(Qi(l)){const P=o[d],_=p[l]=ue(P)||ce(P)?{type:P}:Oe({},P),a=_.type;let s=!1,c=!0;if(ue(a))for(let m=0;m<a.length;++m){const h=a[m],g=ce(h)&&h.name;if(g==="Boolean"){s=!0;break}else g==="String"&&(c=!1)}else s=ce(a)&&a.name==="Boolean";_[0]=s,_[1]=c,(s||pe(_,"default"))&&v.push(l)}}const f=[p,v];return _e(e)&&n.set(e,f),f}function Qi(e){return e[0]!=="$"&&!Gt(e)}const Ii=e=>e[0]==="_"||e==="$stable",Mi=e=>ue(e)?e.map(Je):[Je(e)],Os=(e,t,i)=>{if(t._n)return t;const n=St((...r)=>Mi(t(...r)),i);return n._c=!1,n},Ea=(e,t,i)=>{const n=e._ctx;for(const r in e){if(Ii(r))continue;const o=e[r];if(ce(o))t[r]=Os(r,o,n);else if(o!=null){const p=Mi(o);t[r]=()=>p}}},Aa=(e,t)=>{const i=Mi(t);e.slots.default=()=>i},La=(e,t,i)=>{for(const n in t)(i||!Ii(n))&&(e[n]=t[n])},Cs=(e,t,i)=>{const n=e.slots=Oa();if(e.vnode.shapeFlag&32){const r=t._;r?(La(n,t,i),i&&Wn(n,"_",r,!0)):Ea(t,n)}else t&&Aa(e,t)},Rs=(e,t,i)=>{const{vnode:n,slots:r}=e;let o=!0,p=ye;if(n.shapeFlag&32){const v=t._;v?i&&v===1?o=!1:La(r,t,i):(o=!t.$stable,Ea(t,r)),p=t}else t&&(Aa(e,t),p={default:1});if(o)for(const v in r)!Ii(v)&&p[v]==null&&delete r[v]},Me=zs;function Fs(e){return Es(e)}function Es(e,t){const i=Mr();i.__VUE__=!0;const{insert:n,remove:r,patchProp:o,createElement:p,createText:v,createComment:u,setText:f,setElementText:d,parentNode:l,nextSibling:P,setScopeId:_=et,insertStaticContent:a}=e,s=(C,R,A,K=null,V=null,M=null,N=void 0,q=null,X=!!R.dynamicChildren)=>{if(C===R)return;C&&!Wt(C,R)&&(K=L(C),H(C,V,M,!0),C=null),R.patchFlag===-2&&(X=!1,R.dynamicChildren=null);const{type:$,ref:oe,shapeFlag:Z}=R;switch($){case Br:c(C,R,A,K);break;case Vt:m(C,R,A,K);break;case br:C==null&&h(R,A,K,N);break;case je:Y(C,R,A,K,V,M,N,q,X);break;default:Z&1?x(C,R,A,K,V,M,N,q,X):Z&6?J(C,R,A,K,V,M,N,q,X):(Z&64||Z&128)&&$.process(C,R,A,K,V,M,N,q,X,Q)}oe!=null&&V&&Or(oe,C&&C.ref,M,R||C,!R)},c=(C,R,A,K)=>{if(C==null)n(R.el=v(R.children),A,K);else{const V=R.el=C.el;R.children!==C.children&&f(V,R.children)}},m=(C,R,A,K)=>{C==null?n(R.el=u(R.children||""),A,K):R.el=C.el},h=(C,R,A,K)=>{[C.el,C.anchor]=a(C.children,R,A,K,C.el,C.anchor)},g=({el:C,anchor:R},A,K)=>{let V;for(;C&&C!==R;)V=P(C),n(C,A,K),C=V;n(R,A,K)},y=({el:C,anchor:R})=>{let A;for(;C&&C!==R;)A=P(C),r(C),C=A;r(R)},x=(C,R,A,K,V,M,N,q,X)=>{R.type==="svg"?N="svg":R.type==="math"&&(N="mathml"),C==null?T(R,A,K,V,M,N,q,X):j(C,R,V,M,N,q,X)},T=(C,R,A,K,V,M,N,q)=>{let X,$;const{props:oe,shapeFlag:Z,transition:ae,dirs:se}=C;if(X=C.el=p(C.type,M,oe&&oe.is,oe),Z&8?d(X,C.children):Z&16&&D(C.children,X,null,K,V,Yr(C,M),N,q),se&&_t(C,null,K,"created"),w(X,C,C.scopeId,N,K),oe){for(const ge in oe)ge!=="value"&&!Gt(ge)&&o(X,ge,null,oe[ge],M,K);"value"in oe&&o(X,"value",null,oe.value,M),($=oe.onVnodeBeforeMount)&&Ze($,K,C)}se&&_t(C,null,K,"beforeMount");const de=As(V,ae);de&&ae.beforeEnter(X),n(X,R,A),(($=oe&&oe.onVnodeMounted)||de||se)&&Me(()=>{$&&Ze($,K,C),de&&ae.enter(X),se&&_t(C,null,K,"mounted")},V)},w=(C,R,A,K,V)=>{if(A&&_(C,A),K)for(let M=0;M<K.length;M++)_(C,K[M]);if(V){let M=V.subTree;if(R===M||Na(M.type)&&(M.ssContent===R||M.ssFallback===R)){const N=V.vnode;w(C,N,N.scopeId,N.slotScopeIds,V.parent)}}},D=(C,R,A,K,V,M,N,q,X=0)=>{for(let $=X;$<C.length;$++){const oe=C[$]=q?mt(C[$]):Je(C[$]);s(null,oe,R,A,K,V,M,N,q)}},j=(C,R,A,K,V,M,N)=>{const q=R.el=C.el;let{patchFlag:X,dynamicChildren:$,dirs:oe}=R;X|=C.patchFlag&16;const Z=C.props||ye,ae=R.props||ye;let se;if(A&&Pt(A,!1),(se=ae.onVnodeBeforeUpdate)&&Ze(se,A,R,C),oe&&_t(R,C,A,"beforeUpdate"),A&&Pt(A,!0),(Z.innerHTML&&ae.innerHTML==null||Z.textContent&&ae.textContent==null)&&d(q,""),$?F(C.dynamicChildren,$,q,A,K,Yr(R,V),M):N||k(C,R,q,null,A,K,Yr(R,V),M,!1),X>0){if(X&16)I(q,Z,ae,A,V);else if(X&2&&Z.class!==ae.class&&o(q,"class",null,ae.class,V),X&4&&o(q,"style",Z.style,ae.style,V),X&8){const de=R.dynamicProps;for(let ge=0;ge<de.length;ge++){const ve=de[ge],Le=Z[ve],Ee=ae[ve];(Ee!==Le||ve==="value")&&o(q,ve,Le,Ee,V,A)}}X&1&&C.children!==R.children&&d(q,R.children)}else!N&&$==null&&I(q,Z,ae,A,V);((se=ae.onVnodeUpdated)||oe)&&Me(()=>{se&&Ze(se,A,R,C),oe&&_t(R,C,A,"updated")},K)},F=(C,R,A,K,V,M,N)=>{for(let q=0;q<R.length;q++){const X=C[q],$=R[q],oe=X.el&&(X.type===je||!Wt(X,$)||X.shapeFlag&198)?l(X.el):A;s(X,$,oe,null,K,V,M,N,!0)}},I=(C,R,A,K,V)=>{if(R!==A){if(R!==ye)for(const M in R)!Gt(M)&&!(M in A)&&o(C,M,R[M],null,V,K);for(const M in A){if(Gt(M))continue;const N=A[M],q=R[M];N!==q&&M!=="value"&&o(C,M,q,N,V,K)}"value"in A&&o(C,"value",R.value,A.value,V)}},Y=(C,R,A,K,V,M,N,q,X)=>{const $=R.el=C?C.el:v(""),oe=R.anchor=C?C.anchor:v("");let{patchFlag:Z,dynamicChildren:ae,slotScopeIds:se}=R;se&&(q=q?q.concat(se):se),C==null?(n($,A,K),n(oe,A,K),D(R.children||[],A,oe,V,M,N,q,X)):Z>0&&Z&64&&ae&&C.dynamicChildren?(F(C.dynamicChildren,ae,A,V,M,N,q),(R.key!=null||V&&R===V.subTree)&&Ia(C,R,!0)):k(C,R,A,oe,V,M,N,q,X)},J=(C,R,A,K,V,M,N,q,X)=>{R.slotScopeIds=q,C==null?R.shapeFlag&512?V.ctx.activate(R,A,K,N,X):re(R,A,K,V,M,N,X):O(C,R,X)},re=(C,R,A,K,V,M,N)=>{const q=C.component=Zs(C,K,V);if(_a(C)&&(q.ctx.renderer=Q),Qs(q,!1,N),q.asyncDep){if(V&&V.registerDep(q,b,N),!C.el){const X=q.subTree=Pe(Vt);m(null,X,R,A)}}else b(q,C,R,A,V,M,N)},O=(C,R,A)=>{const K=R.component=C.component;if(Bs(C,R,A))if(K.asyncDep&&!K.asyncResolved){S(K,R,A);return}else K.next=R,K.update();else R.el=C.el,K.vnode=R},b=(C,R,A,K,V,M,N)=>{const q=()=>{if(C.isMounted){let{next:Z,bu:ae,u:se,parent:de,vnode:ge}=C;{const Xe=Ma(C);if(Xe){Z&&(Z.el=ge.el,S(C,Z,N)),Xe.asyncDep.then(()=>{C.isUnmounted||q()});return}}let ve=Z,Le;Pt(C,!1),Z?(Z.el=ge.el,S(C,Z,N)):Z=ge,ae&&yr(ae),(Le=Z.props&&Z.props.onVnodeBeforeUpdate)&&Ze(Le,de,Z,ge),Pt(C,!0);const Ee=en(C),Ge=C.subTree;C.subTree=Ee,s(Ge,Ee,l(Ge.el),L(Ge),C,V,M),Z.el=Ee.el,ve===null&&Hs(C,Ee.el),se&&Me(se,V),(Le=Z.props&&Z.props.onVnodeUpdated)&&Me(()=>Ze(Le,de,Z,ge),V)}else{let Z;const{el:ae,props:se}=R,{bm:de,m:ge,parent:ve,root:Le,type:Ee}=C,Ge=Qt(R);Pt(C,!1),de&&yr(de),!Ge&&(Z=se&&se.onVnodeBeforeMount)&&Ze(Z,ve,R),Pt(C,!0);{Le.ce&&Le.ce._injectChildStyle(Ee);const Xe=C.subTree=en(C);s(null,Xe,A,K,C,V,M),R.el=Xe.el}if(ge&&Me(ge,V),!Ge&&(Z=se&&se.onVnodeMounted)){const Xe=R;Me(()=>Ze(Z,ve,Xe),V)}(R.shapeFlag&256||ve&&Qt(ve.vnode)&&ve.vnode.shapeFlag&256)&&C.a&&Me(C.a,V),C.isMounted=!0,R=A=K=null}};C.scope.on();const X=C.effect=new Yn(q);C.scope.off();const $=C.update=X.run.bind(X),oe=C.job=X.runIfDirty.bind(X);oe.i=C,oe.id=C.uid,X.scheduler=()=>Ei(oe),Pt(C,!0),$()},S=(C,R,A)=>{R.component=C;const K=C.vnode.props;C.vnode=R,C.next=null,ws(C,R.props,K,A),Rs(C,R.children,A),dt(),qi(C),ht()},k=(C,R,A,K,V,M,N,q,X=!1)=>{const $=C&&C.children,oe=C?C.shapeFlag:0,Z=R.children,{patchFlag:ae,shapeFlag:se}=R;if(ae>0){if(ae&128){B($,Z,A,K,V,M,N,q,X);return}else if(ae&256){E($,Z,A,K,V,M,N,q,X);return}}se&8?(oe&16&&ne($,V,M),Z!==$&&d(A,Z)):oe&16?se&16?B($,Z,A,K,V,M,N,q,X):ne($,V,M,!0):(oe&8&&d(A,""),se&16&&D(Z,A,K,V,M,N,q,X))},E=(C,R,A,K,V,M,N,q,X)=>{C=C||At,R=R||At;const $=C.length,oe=R.length,Z=Math.min($,oe);let ae;for(ae=0;ae<Z;ae++){const se=R[ae]=X?mt(R[ae]):Je(R[ae]);s(C[ae],se,A,null,V,M,N,q,X)}$>oe?ne(C,V,M,!0,!1,Z):D(R,A,K,V,M,N,q,X,Z)},B=(C,R,A,K,V,M,N,q,X)=>{let $=0;const oe=R.length;let Z=C.length-1,ae=oe-1;for(;$<=Z&&$<=ae;){const se=C[$],de=R[$]=X?mt(R[$]):Je(R[$]);if(Wt(se,de))s(se,de,A,null,V,M,N,q,X);else break;$++}for(;$<=Z&&$<=ae;){const se=C[Z],de=R[ae]=X?mt(R[ae]):Je(R[ae]);if(Wt(se,de))s(se,de,A,null,V,M,N,q,X);else break;Z--,ae--}if($>Z){if($<=ae){const se=ae+1,de=se<oe?R[se].el:K;for(;$<=ae;)s(null,R[$]=X?mt(R[$]):Je(R[$]),A,de,V,M,N,q,X),$++}}else if($>ae)for(;$<=Z;)H(C[$],V,M,!0),$++;else{const se=$,de=$,ge=new Map;for($=de;$<=ae;$++){const Ie=R[$]=X?mt(R[$]):Je(R[$]);Ie.key!=null&&ge.set(Ie.key,$)}let ve,Le=0;const Ee=ae-de+1;let Ge=!1,Xe=0;const zt=new Array(Ee);for($=0;$<Ee;$++)zt[$]=0;for($=se;$<=Z;$++){const Ie=C[$];if(Le>=Ee){H(Ie,V,M,!0);continue}let Ye;if(Ie.key!=null)Ye=ge.get(Ie.key);else for(ve=de;ve<=ae;ve++)if(zt[ve-de]===0&&Wt(Ie,R[ve])){Ye=ve;break}Ye===void 0?H(Ie,V,M,!0):(zt[Ye-de]=$+1,Ye>=Xe?Xe=Ye:Ge=!0,s(Ie,R[Ye],A,null,V,M,N,q,X),Le++)}const ji=Ge?Ls(zt):At;for(ve=ji.length-1,$=Ee-1;$>=0;$--){const Ie=de+$,Ye=R[Ie],Bi=Ie+1<oe?R[Ie+1].el:K;zt[$]===0?s(null,Ye,A,Bi,V,M,N,q,X):Ge&&(ve<0||$!==ji[ve]?z(Ye,A,Bi,2):ve--)}}},z=(C,R,A,K,V=null)=>{const{el:M,type:N,transition:q,children:X,shapeFlag:$}=C;if($&6){z(C.component.subTree,R,A,K);return}if($&128){C.suspense.move(R,A,K);return}if($&64){N.move(C,R,A,Q);return}if(N===je){n(M,R,A);for(let Z=0;Z<X.length;Z++)z(X[Z],R,A,K);n(C.anchor,R,A);return}if(N===br){g(C,R,A);return}if(K!==2&&$&1&&q)if(K===0)q.beforeEnter(M),n(M,R,A),Me(()=>q.enter(M),V);else{const{leave:Z,delayLeave:ae,afterLeave:se}=q,de=()=>{C.ctx.isUnmounted?r(M):n(M,R,A)},ge=()=>{Z(M,()=>{de(),se&&se()})};ae?ae(M,de,ge):ge()}else n(M,R,A)},H=(C,R,A,K=!1,V=!1)=>{const{type:M,props:N,ref:q,children:X,dynamicChildren:$,shapeFlag:oe,patchFlag:Z,dirs:ae,cacheIndex:se}=C;if(Z===-2&&(V=!1),q!=null&&(dt(),Or(q,null,A,C,!0),ht()),se!=null&&(R.renderCache[se]=void 0),oe&256){R.ctx.deactivate(C);return}const de=oe&1&&ae,ge=!Qt(C);let ve;if(ge&&(ve=N&&N.onVnodeBeforeUnmount)&&Ze(ve,R,C),oe&6)te(C.component,A,K);else{if(oe&128){C.suspense.unmount(A,K);return}de&&_t(C,null,R,"beforeUnmount"),oe&64?C.type.remove(C,R,A,Q,K):$&&!$.hasOnce&&(M!==je||Z>0&&Z&64)?ne($,R,A,!1,!0):(M===je&&Z&384||!V&&oe&16)&&ne(X,R,A),K&&U(C)}(ge&&(ve=N&&N.onVnodeUnmounted)||de)&&Me(()=>{ve&&Ze(ve,R,C),de&&_t(C,null,R,"unmounted")},A)},U=C=>{const{type:R,el:A,anchor:K,transition:V}=C;if(R===je){ie(A,K);return}if(R===br){y(C);return}const M=()=>{r(A),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(C.shapeFlag&1&&V&&!V.persisted){const{leave:N,delayLeave:q}=V,X=()=>N(A,M);q?q(C.el,M,X):X()}else M()},ie=(C,R)=>{let A;for(;C!==R;)A=P(C),r(C),C=A;r(R)},te=(C,R,A)=>{const{bum:K,scope:V,job:M,subTree:N,um:q,m:X,a:$,parent:oe,slots:{__:Z}}=C;Ji(X),Ji($),K&&yr(K),oe&&ue(Z)&&Z.forEach(ae=>{oe.renderCache[ae]=void 0}),V.stop(),M&&(M.flags|=8,H(N,C,R,A)),q&&Me(q,R),Me(()=>{C.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},ne=(C,R,A,K=!1,V=!1,M=0)=>{for(let N=M;N<C.length;N++)H(C[N],R,A,K,V)},L=C=>{if(C.shapeFlag&6)return L(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const R=P(C.anchor||C.el),A=R&&R[es];return A?P(A):R};let G=!1;const W=(C,R,A)=>{C==null?R._vnode&&H(R._vnode,null,null,!0):s(R._vnode||null,C,R,null,null,null,A),R._vnode=C,G||(G=!0,qi(),ma(),G=!1)},Q={p:s,um:H,m:z,r:U,mt:re,mc:D,pc:k,pbc:F,n:L,o:e};return{render:W,hydrate:void 0,createApp:Ss(W)}}function Yr({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Pt({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function As(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ia(e,t,i=!1){const n=e.children,r=t.children;if(ue(n)&&ue(r))for(let o=0;o<n.length;o++){const p=n[o];let v=r[o];v.shapeFlag&1&&!v.dynamicChildren&&((v.patchFlag<=0||v.patchFlag===32)&&(v=r[o]=mt(r[o]),v.el=p.el),!i&&v.patchFlag!==-2&&Ia(p,v)),v.type===Br&&(v.el=p.el),v.type===Vt&&!v.el&&(v.el=p.el)}}function Ls(e){const t=e.slice(),i=[0];let n,r,o,p,v;const u=e.length;for(n=0;n<u;n++){const f=e[n];if(f!==0){if(r=i[i.length-1],e[r]<f){t[n]=r,i.push(n);continue}for(o=0,p=i.length-1;o<p;)v=o+p>>1,e[i[v]]<f?o=v+1:p=v;f<e[i[o]]&&(o>0&&(t[n]=i[o-1]),i[o]=n)}}for(o=i.length,p=i[o-1];o-- >0;)i[o]=p,p=t[p];return i}function Ma(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ma(t)}function Ji(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Is=Symbol.for("v-scx"),Ms=()=>ut(Is);function Dt(e,t,i){return Da(e,t,i)}function Da(e,t,i=ye){const{immediate:n,deep:r,flush:o,once:p}=i,v=Oe({},i),u=t&&n||!t&&o!=="post";let f;if(sr){if(o==="sync"){const _=Ms();f=_.__watcherHandles||(_.__watcherHandles=[])}else if(!u){const _=()=>{};return _.stop=et,_.resume=et,_.pause=et,_}}const d=we;v.call=(_,a,s)=>rt(_,d,a,s);let l=!1;o==="post"?v.scheduler=_=>{Me(_,d&&d.suspense)}:o!=="sync"&&(l=!0,v.scheduler=(_,a)=>{a?_():Ei(_)}),v.augmentJob=_=>{t&&(_.flags|=4),l&&(_.flags|=2,d&&(_.id=d.uid,_.i=d))};const P=Yo(e,t,v);return sr&&(f?f.push(P):u&&P()),P}function Ds(e,t,i){const n=this.proxy,r=xe(e)?e.includes(".")?Ua(n,e):()=>n[e]:e.bind(n,n);let o;ce(t)?o=t:(o=t.handler,i=t);const p=hr(this),v=Da(r,o.bind(n),i);return p(),v}function Ua(e,t){const i=t.split(".");return()=>{let n=e;for(let r=0;r<i.length&&n;r++)n=n[i[r]];return n}}const Us=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ve(t)}Modifiers`]||e[`${kt(t)}Modifiers`];function Vs(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||ye;let r=i;const o=t.startsWith("update:"),p=o&&Us(n,t.slice(7));p&&(p.trim&&(r=i.map(d=>xe(d)?d.trim():d)),p.number&&(r=i.map(ri)));let v,u=n[v=Kr(t)]||n[v=Kr(Ve(t))];!u&&o&&(u=n[v=Kr(kt(t))]),u&&rt(u,e,6,r);const f=n[v+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[v])return;e.emitted[v]=!0,rt(f,e,6,r)}}function Va(e,t,i=!1){const n=t.emitsCache,r=n.get(e);if(r!==void 0)return r;const o=e.emits;let p={},v=!1;if(!ce(e)){const u=f=>{const d=Va(f,t,!0);d&&(v=!0,Oe(p,d))};!i&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!o&&!v?(_e(e)&&n.set(e,null),null):(ue(o)?o.forEach(u=>p[u]=null):Oe(p,o),_e(e)&&n.set(e,p),p)}function jr(e,t){return!e||!Er(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,kt(t))||pe(e,t))}function en(e){const{type:t,vnode:i,proxy:n,withProxy:r,propsOptions:[o],slots:p,attrs:v,emit:u,render:f,renderCache:d,props:l,data:P,setupState:_,ctx:a,inheritAttrs:s}=e,c=kr(e);let m,h;try{if(i.shapeFlag&4){const y=r||n,x=y;m=Je(f.call(x,y,d,l,_,P,a)),h=v}else{const y=t;m=Je(y.length>1?y(l,{attrs:v,slots:p,emit:u}):y(l,null)),h=t.props?v:Ns(v)}}catch(y){er.length=0,Ur(y,e,1),m=Pe(Vt)}let g=m;if(h&&s!==!1){const y=Object.keys(h),{shapeFlag:x}=g;y.length&&x&7&&(o&&y.some(bi)&&(h=js(h,o)),g=Nt(g,h,!1,!0))}return i.dirs&&(g=Nt(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(i.dirs):i.dirs),i.transition&&Ai(g,i.transition),m=g,kr(c),m}const Ns=e=>{let t;for(const i in e)(i==="class"||i==="style"||Er(i))&&((t||(t={}))[i]=e[i]);return t},js=(e,t)=>{const i={};for(const n in e)(!bi(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function Bs(e,t,i){const{props:n,children:r,component:o}=e,{props:p,children:v,patchFlag:u}=t,f=o.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&u>=0){if(u&1024)return!0;if(u&16)return n?tn(n,p,f):!!p;if(u&8){const d=t.dynamicProps;for(let l=0;l<d.length;l++){const P=d[l];if(p[P]!==n[P]&&!jr(f,P))return!0}}}else return(r||v)&&(!v||!v.$stable)?!0:n===p?!1:n?p?tn(n,p,f):!0:!!p;return!1}function tn(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const o=n[r];if(t[o]!==e[o]&&!jr(i,o))return!0}return!1}function Hs({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const Na=e=>e.__isSuspense;function zs(e,t){t&&t.pendingBranch?ue(e)?t.effects.push(...e):t.effects.push(e):Jo(e)}const je=Symbol.for("v-fgt"),Br=Symbol.for("v-txt"),Vt=Symbol.for("v-cmt"),br=Symbol.for("v-stc"),er=[];let Ue=null;function We(e=!1){er.push(Ue=e?null:[])}function Ks(){er.pop(),Ue=er[er.length-1]||null}let or=1;function rn(e,t=!1){or+=e,e<0&&Ue&&t&&(Ue.hasOnce=!0)}function Ws(e){return e.dynamicChildren=or>0?Ue||At:null,Ks(),or>0&&Ue&&Ue.push(e),e}function qe(e,t,i,n,r,o){return Ws(ee(e,t,i,n,r,o,!0))}function Rr(e){return e?e.__v_isVNode===!0:!1}function Wt(e,t){return e.type===t.type&&e.key===t.key}const ja=({key:e})=>e??null,_r=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?xe(e)||ke(e)||ce(e)?{i:De,r:e,k:t,f:!!i}:e:null);function ee(e,t=null,i=null,n=0,r=null,o=e===je?0:1,p=!1,v=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ja(t),ref:t&&_r(t),scopeId:ga,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:De};return v?(Ui(u,i),o&128&&e.normalize(u)):i&&(u.shapeFlag|=xe(i)?8:16),or>0&&!p&&Ue&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&Ue.push(u),u}const Pe=qs;function qs(e,t=null,i=null,n=0,r=null,o=!1){if((!e||e===ps)&&(e=Vt),Rr(e)){const v=Nt(e,t,!0);return i&&Ui(v,i),or>0&&!o&&Ue&&(v.shapeFlag&6?Ue[Ue.indexOf(e)]=v:Ue.push(v)),v.patchFlag=-2,v}if(il(e)&&(e=e.__vccOpts),t){t=$s(t);let{class:v,style:u}=t;v&&!xe(v)&&(t.class=xi(v)),_e(u)&&(Fi(u)&&!ue(u)&&(u=Oe({},u)),t.style=He(u))}const p=xe(e)?1:Na(e)?128:ts(e)?64:_e(e)?4:ce(e)?2:0;return ee(e,t,i,n,r,p,o,!0)}function $s(e){return e?Fi(e)||Ca(e)?Oe({},e):e:null}function Nt(e,t,i=!1,n=!1){const{props:r,ref:o,patchFlag:p,children:v,transition:u}=e,f=t?Gs(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&ja(f),ref:t&&t.ref?i&&o?ue(o)?o.concat(_r(t)):[o,_r(t)]:_r(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:v,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==je?p===-1?16:p|16:p,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nt(e.ssContent),ssFallback:e.ssFallback&&Nt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Ai(d,u.clone(d)),d}function Se(e=" ",t=0){return Pe(Br,null,e,t)}function Di(e,t){const i=Pe(br,null,e);return i.staticCount=t,i}function Je(e){return e==null||typeof e=="boolean"?Pe(Vt):ue(e)?Pe(je,null,e.slice()):Rr(e)?mt(e):Pe(Br,null,String(e))}function mt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Nt(e)}function Ui(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ue(t))i=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),Ui(e,r()),r._c&&(r._d=!0));return}else{i=32;const r=t._;!r&&!Ca(t)?t._ctx=De:r===3&&De&&(De.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ce(t)?(t={default:t,_ctx:De},i=32):(t=String(t),n&64?(i=16,t=[Se(t)]):i=8);e.children=t,e.shapeFlag|=i}function Gs(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=xi([t.class,n.class]));else if(r==="style")t.style=He([t.style,n.style]);else if(Er(r)){const o=t[r],p=n[r];p&&o!==p&&!(ue(o)&&o.includes(p))&&(t[r]=o?[].concat(o,p):p)}else r!==""&&(t[r]=n[r])}return t}function Ze(e,t,i,n=null){rt(e,t,7,[i,n])}const Xs=wa();let Ys=0;function Zs(e,t,i){const n=e.type,r=(t?t.appContext:e.appContext)||Xs,o={uid:Ys++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new So(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fa(n,r),emitsOptions:Va(n,r),emit:null,emitted:null,propsDefaults:ye,inheritAttrs:n.inheritAttrs,ctx:ye,data:ye,props:ye,attrs:ye,slots:ye,refs:ye,setupState:ye,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Vs.bind(null,o),e.ce&&e.ce(o),o}let we=null,Fr,fi;{const e=Mr(),t=(i,n)=>{let r;return(r=e[i])||(r=e[i]=[]),r.push(n),o=>{r.length>1?r.forEach(p=>p(o)):r[0](o)}};Fr=t("__VUE_INSTANCE_SETTERS__",i=>we=i),fi=t("__VUE_SSR_SETTERS__",i=>sr=i)}const hr=e=>{const t=we;return Fr(e),e.scope.on(),()=>{e.scope.off(),Fr(t)}},nn=()=>{we&&we.scope.off(),Fr(null)};function Ba(e){return e.vnode.shapeFlag&4}let sr=!1;function Qs(e,t=!1,i=!1){t&&fi(t);const{props:n,children:r}=e.vnode,o=Ba(e);Ts(e,n,o,t),Cs(e,r,i||t);const p=o?Js(e,t):void 0;return t&&fi(!1),p}function Js(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ms);const{setup:n}=i;if(n){dt();const r=e.setupContext=n.length>1?tl(e):null,o=hr(e),p=dr(n,e,0,[e.props,r]),v=Hn(p);if(ht(),o(),(v||e.sp)&&!Qt(e)&&ba(e),v){if(p.then(nn,nn),t)return p.then(u=>{an(e,u)}).catch(u=>{Ur(u,e,0)});e.asyncDep=p}else an(e,p)}else Ha(e)}function an(e,t,i){ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_e(t)&&(e.setupState=fa(t)),Ha(e)}function Ha(e,t,i){const n=e.type;e.render||(e.render=n.render||et);{const r=hr(e);dt();try{ys(e)}finally{ht(),r()}}}const el={get(e,t){return Te(e,"get",""),e[t]}};function tl(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,el),slots:e.slots,emit:e.emit,expose:t}}function Hr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(fa(zo(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Jt)return Jt[i](e)},has(t,i){return i in t||i in Jt}})):e.proxy}function rl(e,t=!0){return ce(e)?e.displayName||e.name:e.name||t&&e.__name}function il(e){return ce(e)&&"__vccOpts"in e}const Be=(e,t)=>Go(e,t,sr);function za(e,t,i){const n=arguments.length;return n===2?_e(t)&&!ue(t)?Rr(t)?Pe(e,null,[t]):Pe(e,t):Pe(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&Rr(i)&&(i=[i]),Pe(e,t,i))}const nl="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pi;const on=typeof window<"u"&&window.trustedTypes;if(on)try{pi=on.createPolicy("vue",{createHTML:e=>e})}catch{}const Ka=pi?e=>pi.createHTML(e):e=>e,al="http://www.w3.org/2000/svg",ol="http://www.w3.org/1998/Math/MathML",at=typeof document<"u"?document:null,sn=at&&at.createElement("template"),sl={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const r=t==="svg"?at.createElementNS(al,e):t==="mathml"?at.createElementNS(ol,e):i?at.createElement(e,{is:i}):at.createElement(e);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>at.createTextNode(e),createComment:e=>at.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>at.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,r,o){const p=i?i.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),i),!(r===o||!(r=r.nextSibling)););else{sn.innerHTML=Ka(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const v=sn.content;if(n==="svg"||n==="mathml"){const u=v.firstChild;for(;u.firstChild;)v.appendChild(u.firstChild);v.removeChild(u)}t.insertBefore(v,i)}return[p?p.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},ll=Symbol("_vtc");function ul(e,t,i){const n=e[ll];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const ln=Symbol("_vod"),cl=Symbol("_vsh"),dl=Symbol(""),hl=/(^|;)\s*display\s*:/;function fl(e,t,i){const n=e.style,r=xe(i);let o=!1;if(i&&!r){if(t)if(xe(t))for(const p of t.split(";")){const v=p.slice(0,p.indexOf(":")).trim();i[v]==null&&Pr(n,v,"")}else for(const p in t)i[p]==null&&Pr(n,p,"");for(const p in i)p==="display"&&(o=!0),Pr(n,p,i[p])}else if(r){if(t!==i){const p=n[dl];p&&(i+=";"+p),n.cssText=i,o=hl.test(i)}}else t&&e.removeAttribute("style");ln in e&&(e[ln]=o?n.display:"",e[cl]&&(n.display="none"))}const un=/\s*!important$/;function Pr(e,t,i){if(ue(i))i.forEach(n=>Pr(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=pl(e,t);un.test(i)?e.setProperty(kt(n),i.replace(un,""),"important"):e[n]=i}}const cn=["Webkit","Moz","ms"],Zr={};function pl(e,t){const i=Zr[t];if(i)return i;let n=Ve(t);if(n!=="filter"&&n in e)return Zr[t]=n;n=Ir(n);for(let r=0;r<cn.length;r++){const o=cn[r]+n;if(o in e)return Zr[t]=o}return t}const dn="http://www.w3.org/1999/xlink";function hn(e,t,i,n,r,o=Po(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(dn,t.slice(6,t.length)):e.setAttributeNS(dn,t,i):i==null||o&&!qn(i)?e.removeAttribute(t):e.setAttribute(t,o?"":tt(i)?String(i):i)}function fn(e,t,i,n,r){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?Ka(i):i);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const v=o==="OPTION"?e.getAttribute("value")||"":e.value,u=i==null?e.type==="checkbox"?"on":"":String(i);(v!==u||!("_value"in e))&&(e.value=u),i==null&&e.removeAttribute(t),e._value=i;return}let p=!1;if(i===""||i==null){const v=typeof e[t];v==="boolean"?i=qn(i):i==null&&v==="string"?(i="",p=!0):v==="number"&&(i=0,p=!0)}try{e[t]=i}catch{}p&&e.removeAttribute(r||t)}function gt(e,t,i,n){e.addEventListener(t,i,n)}function vl(e,t,i,n){e.removeEventListener(t,i,n)}const pn=Symbol("_vei");function ml(e,t,i,n,r=null){const o=e[pn]||(e[pn]={}),p=o[t];if(n&&p)p.value=n;else{const[v,u]=yl(t);if(n){const f=o[t]=_l(n,r);gt(e,v,f,u)}else p&&(vl(e,v,p,u),o[t]=void 0)}}const vn=/(?:Once|Passive|Capture)$/;function yl(e){let t;if(vn.test(e)){t={};let n;for(;n=e.match(vn);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):kt(e.slice(2)),t]}let Qr=0;const gl=Promise.resolve(),bl=()=>Qr||(gl.then(()=>Qr=0),Qr=Date.now());function _l(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;rt(Pl(n,i.value),t,5,[n])};return i.value=e,i.attached=bl(),i}function Pl(e,t){if(ue(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const mn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,xl=(e,t,i,n,r,o)=>{const p=r==="svg";t==="class"?ul(e,n,p):t==="style"?fl(e,i,n):Er(t)?bi(t)||ml(e,t,i,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Sl(e,t,n,p))?(fn(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&hn(e,t,n,p,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!xe(n))?fn(e,Ve(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),hn(e,t,n,p))};function Sl(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&mn(t)&&ce(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return mn(t)&&xe(i)?!1:t in e}const jt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ue(t)?i=>yr(t,i):t};function Tl(e){e.target.composing=!0}function yn(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ct=Symbol("_assign"),gn={created(e,{modifiers:{lazy:t,trim:i,number:n}},r){e[ct]=jt(r);const o=n||r.props&&r.props.type==="number";gt(e,t?"change":"input",p=>{if(p.target.composing)return;let v=e.value;i&&(v=v.trim()),o&&(v=ri(v)),e[ct](v)}),i&&gt(e,"change",()=>{e.value=e.value.trim()}),t||(gt(e,"compositionstart",Tl),gt(e,"compositionend",yn),gt(e,"change",yn))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:n,trim:r,number:o}},p){if(e[ct]=jt(p),e.composing)return;const v=(o||e.type==="number")&&!/^0\d/.test(e.value)?ri(e.value):e.value,u=t??"";v!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===i||r&&e.value.trim()===u)||(e.value=u))}},bn={deep:!0,created(e,t,i){e[ct]=jt(i),gt(e,"change",()=>{const n=e._modelValue,r=Wa(e),o=e.checked,p=e[ct];if(ue(n)){const v=$n(n,r),u=v!==-1;if(o&&!u)p(n.concat(r));else if(!o&&u){const f=[...n];f.splice(v,1),p(f)}}else if(Ar(n)){const v=new Set(n);o?v.add(r):v.delete(r),p(v)}else p(qa(e,o))})},mounted:_n,beforeUpdate(e,t,i){e[ct]=jt(i),_n(e,t,i)}};function _n(e,{value:t,oldValue:i},n){e._modelValue=t;let r;if(ue(t))r=$n(t,n.props.value)>-1;else if(Ar(t))r=t.has(n.props.value);else{if(t===i)return;r=Ut(t,qa(e,!0))}e.checked!==r&&(e.checked=r)}const Pn={created(e,{value:t},i){e.checked=Ut(t,i.props.value),e[ct]=jt(i),gt(e,"change",()=>{e[ct](Wa(e))})},beforeUpdate(e,{value:t,oldValue:i},n){e[ct]=jt(n),t!==i&&(e.checked=Ut(t,n.props.value))}};function Wa(e){return"_value"in e?e._value:e.value}function qa(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const wl=Oe({patchProp:xl},sl);let xn;function kl(){return xn||(xn=Fs(wl))}const Ol=(...e)=>{const t=kl().createApp(...e),{mount:i}=t;return t.mount=n=>{const r=Rl(n);if(!r)return;const o=t._component;!ce(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const p=i(r,!1,Cl(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),p},t};function Cl(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Rl(e){return xe(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Et=typeof document<"u";function $a(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Fl(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&$a(e.default)}const he=Object.assign;function Jr(e,t){const i={};for(const n in t){const r=t[n];i[n]=$e(r)?r.map(e):e(r)}return i}const tr=()=>{},$e=Array.isArray,Ga=/#/g,El=/&/g,Al=/\//g,Ll=/=/g,Il=/\?/g,Xa=/\+/g,Ml=/%5B/g,Dl=/%5D/g,Ya=/%5E/g,Ul=/%60/g,Za=/%7B/g,Vl=/%7C/g,Qa=/%7D/g,Nl=/%20/g;function Vi(e){return encodeURI(""+e).replace(Vl,"|").replace(Ml,"[").replace(Dl,"]")}function jl(e){return Vi(e).replace(Za,"{").replace(Qa,"}").replace(Ya,"^")}function vi(e){return Vi(e).replace(Xa,"%2B").replace(Nl,"+").replace(Ga,"%23").replace(El,"%26").replace(Ul,"`").replace(Za,"{").replace(Qa,"}").replace(Ya,"^")}function Bl(e){return vi(e).replace(Ll,"%3D")}function Hl(e){return Vi(e).replace(Ga,"%23").replace(Il,"%3F")}function zl(e){return e==null?"":Hl(e).replace(Al,"%2F")}function lr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Kl=/\/$/,Wl=e=>e.replace(Kl,"");function ei(e,t,i="/"){let n,r={},o="",p="";const v=t.indexOf("#");let u=t.indexOf("?");return v<u&&v>=0&&(u=-1),u>-1&&(n=t.slice(0,u),o=t.slice(u+1,v>-1?v:t.length),r=e(o)),v>-1&&(n=n||t.slice(0,v),p=t.slice(v,t.length)),n=Xl(n??t,i),{fullPath:n+(o&&"?")+o+p,path:n,query:r,hash:lr(p)}}function ql(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function Sn(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function $l(e,t,i){const n=t.matched.length-1,r=i.matched.length-1;return n>-1&&n===r&&Bt(t.matched[n],i.matched[r])&&Ja(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Bt(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ja(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Gl(e[i],t[i]))return!1;return!0}function Gl(e,t){return $e(e)?Tn(e,t):$e(t)?Tn(t,e):e===t}function Tn(e,t){return $e(t)?e.length===t.length&&e.every((i,n)=>i===t[n]):e.length===1&&e[0]===t}function Xl(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),n=e.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let o=i.length-1,p,v;for(p=0;p<n.length;p++)if(v=n[p],v!==".")if(v==="..")o>1&&o--;else break;return i.slice(0,o).join("/")+"/"+n.slice(p).join("/")}const pt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ur;(function(e){e.pop="pop",e.push="push"})(ur||(ur={}));var rr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(rr||(rr={}));function Yl(e){if(!e)if(Et){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Wl(e)}const Zl=/^[^#]+#/;function Ql(e,t){return e.replace(Zl,"#")+t}function Jl(e,t){const i=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-i.left-(t.left||0),top:n.top-i.top-(t.top||0)}}const zr=()=>({left:window.scrollX,top:window.scrollY});function eu(e){let t;if("el"in e){const i=e.el,n=typeof i=="string"&&i.startsWith("#"),r=typeof i=="string"?n?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!r)return;t=Jl(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function wn(e,t){return(history.state?history.state.position-t:-1)+e}const mi=new Map;function tu(e,t){mi.set(e,t)}function ru(e){const t=mi.get(e);return mi.delete(e),t}let iu=()=>location.protocol+"//"+location.host;function eo(e,t){const{pathname:i,search:n,hash:r}=t,o=e.indexOf("#");if(o>-1){let v=r.includes(e.slice(o))?e.slice(o).length:1,u=r.slice(v);return u[0]!=="/"&&(u="/"+u),Sn(u,"")}return Sn(i,e)+n+r}function nu(e,t,i,n){let r=[],o=[],p=null;const v=({state:P})=>{const _=eo(e,location),a=i.value,s=t.value;let c=0;if(P){if(i.value=_,t.value=P,p&&p===a){p=null;return}c=s?P.position-s.position:0}else n(_);r.forEach(m=>{m(i.value,a,{delta:c,type:ur.pop,direction:c?c>0?rr.forward:rr.back:rr.unknown})})};function u(){p=i.value}function f(P){r.push(P);const _=()=>{const a=r.indexOf(P);a>-1&&r.splice(a,1)};return o.push(_),_}function d(){const{history:P}=window;P.state&&P.replaceState(he({},P.state,{scroll:zr()}),"")}function l(){for(const P of o)P();o=[],window.removeEventListener("popstate",v),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",v),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:u,listen:f,destroy:l}}function kn(e,t,i,n=!1,r=!1){return{back:e,current:t,forward:i,replaced:n,position:window.history.length,scroll:r?zr():null}}function au(e){const{history:t,location:i}=window,n={value:eo(e,i)},r={value:t.state};r.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(u,f,d){const l=e.indexOf("#"),P=l>-1?(i.host&&document.querySelector("base")?e:e.slice(l))+u:iu()+e+u;try{t[d?"replaceState":"pushState"](f,"",P),r.value=f}catch(_){console.error(_),i[d?"replace":"assign"](P)}}function p(u,f){const d=he({},t.state,kn(r.value.back,u,r.value.forward,!0),f,{position:r.value.position});o(u,d,!0),n.value=u}function v(u,f){const d=he({},r.value,t.state,{forward:u,scroll:zr()});o(d.current,d,!0);const l=he({},kn(n.value,u,null),{position:d.position+1},f);o(u,l,!1),n.value=u}return{location:n,state:r,push:v,replace:p}}function ou(e){e=Yl(e);const t=au(e),i=nu(e,t.state,t.location,t.replace);function n(o,p=!0){p||i.pauseListeners(),history.go(o)}const r=he({location:"",base:e,go:n,createHref:Ql.bind(null,e)},t,i);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function su(e){return typeof e=="string"||e&&typeof e=="object"}function to(e){return typeof e=="string"||typeof e=="symbol"}const ro=Symbol("");var On;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(On||(On={}));function Ht(e,t){return he(new Error,{type:e,[ro]:!0},t)}function nt(e,t){return e instanceof Error&&ro in e&&(t==null||!!(e.type&t))}const Cn="[^/]+?",lu={sensitive:!1,strict:!1,start:!0,end:!0},uu=/[.+*?^${}()[\]/\\]/g;function cu(e,t){const i=he({},lu,t),n=[];let r=i.start?"^":"";const o=[];for(const f of e){const d=f.length?[]:[90];i.strict&&!f.length&&(r+="/");for(let l=0;l<f.length;l++){const P=f[l];let _=40+(i.sensitive?.25:0);if(P.type===0)l||(r+="/"),r+=P.value.replace(uu,"\\$&"),_+=40;else if(P.type===1){const{value:a,repeatable:s,optional:c,regexp:m}=P;o.push({name:a,repeatable:s,optional:c});const h=m||Cn;if(h!==Cn){_+=10;try{new RegExp(`(${h})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${a}" (${h}): `+y.message)}}let g=s?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;l||(g=c&&f.length<2?`(?:/${g})`:"/"+g),c&&(g+="?"),r+=g,_+=20,c&&(_+=-8),s&&(_+=-20),h===".*"&&(_+=-50)}d.push(_)}n.push(d)}if(i.strict&&i.end){const f=n.length-1;n[f][n[f].length-1]+=.7000000000000001}i.strict||(r+="/?"),i.end?r+="$":i.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const p=new RegExp(r,i.sensitive?"":"i");function v(f){const d=f.match(p),l={};if(!d)return null;for(let P=1;P<d.length;P++){const _=d[P]||"",a=o[P-1];l[a.name]=_&&a.repeatable?_.split("/"):_}return l}function u(f){let d="",l=!1;for(const P of e){(!l||!d.endsWith("/"))&&(d+="/"),l=!1;for(const _ of P)if(_.type===0)d+=_.value;else if(_.type===1){const{value:a,repeatable:s,optional:c}=_,m=a in f?f[a]:"";if($e(m)&&!s)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const h=$e(m)?m.join("/"):m;if(!h)if(c)P.length<2&&(d.endsWith("/")?d=d.slice(0,-1):l=!0);else throw new Error(`Missing required param "${a}"`);d+=h}}return d||"/"}return{re:p,score:n,keys:o,parse:v,stringify:u}}function du(e,t){let i=0;for(;i<e.length&&i<t.length;){const n=t[i]-e[i];if(n)return n;i++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function io(e,t){let i=0;const n=e.score,r=t.score;for(;i<n.length&&i<r.length;){const o=du(n[i],r[i]);if(o)return o;i++}if(Math.abs(r.length-n.length)===1){if(Rn(n))return 1;if(Rn(r))return-1}return r.length-n.length}function Rn(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const hu={type:0,value:""},fu=/[a-zA-Z0-9_]/;function pu(e){if(!e)return[[]];if(e==="/")return[[hu]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${i})/"${f}": ${_}`)}let i=0,n=i;const r=[];let o;function p(){o&&r.push(o),o=[]}let v=0,u,f="",d="";function l(){f&&(i===0?o.push({type:0,value:f}):i===1||i===2||i===3?(o.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:f,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),f="")}function P(){f+=u}for(;v<e.length;){if(u=e[v++],u==="\\"&&i!==2){n=i,i=4;continue}switch(i){case 0:u==="/"?(f&&l(),p()):u===":"?(l(),i=1):P();break;case 4:P(),i=n;break;case 1:u==="("?i=2:fu.test(u)?P():(l(),i=0,u!=="*"&&u!=="?"&&u!=="+"&&v--);break;case 2:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:i=3:d+=u;break;case 3:l(),i=0,u!=="*"&&u!=="?"&&u!=="+"&&v--,d="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${f}"`),l(),p(),r}function vu(e,t,i){const n=cu(pu(e.path),i),r=he(n,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function mu(e,t){const i=[],n=new Map;t=Ln({strict:!1,end:!0,sensitive:!1},t);function r(l){return n.get(l)}function o(l,P,_){const a=!_,s=En(l);s.aliasOf=_&&_.record;const c=Ln(t,l),m=[s];if("alias"in l){const y=typeof l.alias=="string"?[l.alias]:l.alias;for(const x of y)m.push(En(he({},s,{components:_?_.record.components:s.components,path:x,aliasOf:_?_.record:s})))}let h,g;for(const y of m){const{path:x}=y;if(P&&x[0]!=="/"){const T=P.record.path,w=T[T.length-1]==="/"?"":"/";y.path=P.record.path+(x&&w+x)}if(h=vu(y,P,c),_?_.alias.push(h):(g=g||h,g!==h&&g.alias.push(h),a&&l.name&&!An(h)&&p(l.name)),no(h)&&u(h),s.children){const T=s.children;for(let w=0;w<T.length;w++)o(T[w],h,_&&_.children[w])}_=_||h}return g?()=>{p(g)}:tr}function p(l){if(to(l)){const P=n.get(l);P&&(n.delete(l),i.splice(i.indexOf(P),1),P.children.forEach(p),P.alias.forEach(p))}else{const P=i.indexOf(l);P>-1&&(i.splice(P,1),l.record.name&&n.delete(l.record.name),l.children.forEach(p),l.alias.forEach(p))}}function v(){return i}function u(l){const P=bu(l,i);i.splice(P,0,l),l.record.name&&!An(l)&&n.set(l.record.name,l)}function f(l,P){let _,a={},s,c;if("name"in l&&l.name){if(_=n.get(l.name),!_)throw Ht(1,{location:l});c=_.record.name,a=he(Fn(P.params,_.keys.filter(g=>!g.optional).concat(_.parent?_.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),l.params&&Fn(l.params,_.keys.map(g=>g.name))),s=_.stringify(a)}else if(l.path!=null)s=l.path,_=i.find(g=>g.re.test(s)),_&&(a=_.parse(s),c=_.record.name);else{if(_=P.name?n.get(P.name):i.find(g=>g.re.test(P.path)),!_)throw Ht(1,{location:l,currentLocation:P});c=_.record.name,a=he({},P.params,l.params),s=_.stringify(a)}const m=[];let h=_;for(;h;)m.unshift(h.record),h=h.parent;return{name:c,path:s,params:a,matched:m,meta:gu(m)}}e.forEach(l=>o(l));function d(){i.length=0,n.clear()}return{addRoute:o,resolve:f,removeRoute:p,clearRoutes:d,getRoutes:v,getRecordMatcher:r}}function Fn(e,t){const i={};for(const n of t)n in e&&(i[n]=e[n]);return i}function En(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:yu(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function yu(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const n in e.components)t[n]=typeof i=="object"?i[n]:i;return t}function An(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function gu(e){return e.reduce((t,i)=>he(t,i.meta),{})}function Ln(e,t){const i={};for(const n in e)i[n]=n in t?t[n]:e[n];return i}function bu(e,t){let i=0,n=t.length;for(;i!==n;){const o=i+n>>1;io(e,t[o])<0?n=o:i=o+1}const r=_u(e);return r&&(n=t.lastIndexOf(r,n-1)),n}function _u(e){let t=e;for(;t=t.parent;)if(no(t)&&io(e,t)===0)return t}function no({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Pu(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const o=n[r].replace(Xa," "),p=o.indexOf("="),v=lr(p<0?o:o.slice(0,p)),u=p<0?null:lr(o.slice(p+1));if(v in t){let f=t[v];$e(f)||(f=t[v]=[f]),f.push(u)}else t[v]=u}return t}function In(e){let t="";for(let i in e){const n=e[i];if(i=Bl(i),n==null){n!==void 0&&(t+=(t.length?"&":"")+i);continue}($e(n)?n.map(o=>o&&vi(o)):[n&&vi(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+i,o!=null&&(t+="="+o))})}return t}function xu(e){const t={};for(const i in e){const n=e[i];n!==void 0&&(t[i]=$e(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return t}const Su=Symbol(""),Mn=Symbol(""),Ni=Symbol(""),ao=Symbol(""),yi=Symbol("");function qt(){let e=[];function t(n){return e.push(n),()=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)}}function i(){e=[]}return{add:t,list:()=>e.slice(),reset:i}}function yt(e,t,i,n,r,o=p=>p()){const p=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((v,u)=>{const f=P=>{P===!1?u(Ht(4,{from:i,to:t})):P instanceof Error?u(P):su(P)?u(Ht(2,{from:t,to:P})):(p&&n.enterCallbacks[r]===p&&typeof P=="function"&&p.push(P),v())},d=o(()=>e.call(n&&n.instances[r],t,i,f));let l=Promise.resolve(d);e.length<3&&(l=l.then(f)),l.catch(P=>u(P))})}function ti(e,t,i,n,r=o=>o()){const o=[];for(const p of e)for(const v in p.components){let u=p.components[v];if(!(t!=="beforeRouteEnter"&&!p.instances[v]))if($a(u)){const d=(u.__vccOpts||u)[t];d&&o.push(yt(d,i,n,p,v,r))}else{let f=u();o.push(()=>f.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${v}" at "${p.path}"`);const l=Fl(d)?d.default:d;p.mods[v]=d,p.components[v]=l;const _=(l.__vccOpts||l)[t];return _&&yt(_,i,n,p,v,r)()}))}}return o}function Dn(e){const t=ut(Ni),i=ut(ao),n=Be(()=>{const u=lt(e.to);return t.resolve(u)}),r=Be(()=>{const{matched:u}=n.value,{length:f}=u,d=u[f-1],l=i.matched;if(!d||!l.length)return-1;const P=l.findIndex(Bt.bind(null,d));if(P>-1)return P;const _=Un(u[f-2]);return f>1&&Un(d)===_&&l[l.length-1].path!==_?l.findIndex(Bt.bind(null,u[f-2])):P}),o=Be(()=>r.value>-1&&Cu(i.params,n.value.params)),p=Be(()=>r.value>-1&&r.value===i.matched.length-1&&Ja(i.params,n.value.params));function v(u={}){if(Ou(u)){const f=t[lt(e.replace)?"replace":"push"](lt(e.to)).catch(tr);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:n,href:Be(()=>n.value.href),isActive:o,isExactActive:p,navigate:v}}function Tu(e){return e.length===1?e[0]:e}const wu=Ot({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Dn,setup(e,{slots:t}){const i=Dr(Dn(e)),{options:n}=ut(Ni),r=Be(()=>({[Vn(e.activeClass,n.linkActiveClass,"router-link-active")]:i.isActive,[Vn(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const o=t.default&&Tu(t.default(i));return e.custom?o:za("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:r.value},o)}}}),ku=wu;function Ou(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Cu(e,t){for(const i in t){const n=t[i],r=e[i];if(typeof n=="string"){if(n!==r)return!1}else if(!$e(r)||r.length!==n.length||n.some((o,p)=>o!==r[p]))return!1}return!0}function Un(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Vn=(e,t,i)=>e??t??i,Ru=Ot({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const n=ut(yi),r=Be(()=>e.route||n.value),o=ut(Mn,0),p=Be(()=>{let f=lt(o);const{matched:d}=r.value;let l;for(;(l=d[f])&&!l.components;)f++;return f}),v=Be(()=>r.value.matched[p.value]);gr(Mn,Be(()=>p.value+1)),gr(Su,v),gr(yi,r);const u=me();return Dt(()=>[u.value,v.value,e.name],([f,d,l],[P,_,a])=>{d&&(d.instances[l]=f,_&&_!==d&&f&&f===P&&(d.leaveGuards.size||(d.leaveGuards=_.leaveGuards),d.updateGuards.size||(d.updateGuards=_.updateGuards))),f&&d&&(!_||!Bt(d,_)||!P)&&(d.enterCallbacks[l]||[]).forEach(s=>s(f))},{flush:"post"}),()=>{const f=r.value,d=e.name,l=v.value,P=l&&l.components[d];if(!P)return Nn(i.default,{Component:P,route:f});const _=l.props[d],a=_?_===!0?f.params:typeof _=="function"?_(f):_:null,c=za(P,he({},a,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(l.instances[d]=null)},ref:u}));return Nn(i.default,{Component:c,route:f})||c}}});function Nn(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const Fu=Ru;function Eu(e){const t=mu(e.routes,e),i=e.parseQuery||Pu,n=e.stringifyQuery||In,r=e.history,o=qt(),p=qt(),v=qt(),u=Ko(pt);let f=pt;Et&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Jr.bind(null,L=>""+L),l=Jr.bind(null,zl),P=Jr.bind(null,lr);function _(L,G){let W,Q;return to(L)?(W=t.getRecordMatcher(L),Q=G):Q=L,t.addRoute(Q,W)}function a(L){const G=t.getRecordMatcher(L);G&&t.removeRoute(G)}function s(){return t.getRoutes().map(L=>L.record)}function c(L){return!!t.getRecordMatcher(L)}function m(L,G){if(G=he({},G||u.value),typeof L=="string"){const A=ei(i,L,G.path),K=t.resolve({path:A.path},G),V=r.createHref(A.fullPath);return he(A,K,{params:P(K.params),hash:lr(A.hash),redirectedFrom:void 0,href:V})}let W;if(L.path!=null)W=he({},L,{path:ei(i,L.path,G.path).path});else{const A=he({},L.params);for(const K in A)A[K]==null&&delete A[K];W=he({},L,{params:l(A)}),G.params=l(G.params)}const Q=t.resolve(W,G),le=L.hash||"";Q.params=d(P(Q.params));const C=ql(n,he({},L,{hash:jl(le),path:Q.path})),R=r.createHref(C);return he({fullPath:C,hash:le,query:n===In?xu(L.query):L.query||{}},Q,{redirectedFrom:void 0,href:R})}function h(L){return typeof L=="string"?ei(i,L,u.value.path):he({},L)}function g(L,G){if(f!==L)return Ht(8,{from:G,to:L})}function y(L){return w(L)}function x(L){return y(he(h(L),{replace:!0}))}function T(L){const G=L.matched[L.matched.length-1];if(G&&G.redirect){const{redirect:W}=G;let Q=typeof W=="function"?W(L):W;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=h(Q):{path:Q},Q.params={}),he({query:L.query,hash:L.hash,params:Q.path!=null?{}:L.params},Q)}}function w(L,G){const W=f=m(L),Q=u.value,le=L.state,C=L.force,R=L.replace===!0,A=T(W);if(A)return w(he(h(A),{state:typeof A=="object"?he({},le,A.state):le,force:C,replace:R}),G||W);const K=W;K.redirectedFrom=G;let V;return!C&&$l(n,Q,W)&&(V=Ht(16,{to:K,from:Q}),z(Q,Q,!0,!1)),(V?Promise.resolve(V):F(K,Q)).catch(M=>nt(M)?nt(M,2)?M:B(M):k(M,K,Q)).then(M=>{if(M){if(nt(M,2))return w(he({replace:R},h(M.to),{state:typeof M.to=="object"?he({},le,M.to.state):le,force:C}),G||K)}else M=Y(K,Q,!0,R,le);return I(K,Q,M),M})}function D(L,G){const W=g(L,G);return W?Promise.reject(W):Promise.resolve()}function j(L){const G=ie.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(L):L()}function F(L,G){let W;const[Q,le,C]=Au(L,G);W=ti(Q.reverse(),"beforeRouteLeave",L,G);for(const A of Q)A.leaveGuards.forEach(K=>{W.push(yt(K,L,G))});const R=D.bind(null,L,G);return W.push(R),ne(W).then(()=>{W=[];for(const A of o.list())W.push(yt(A,L,G));return W.push(R),ne(W)}).then(()=>{W=ti(le,"beforeRouteUpdate",L,G);for(const A of le)A.updateGuards.forEach(K=>{W.push(yt(K,L,G))});return W.push(R),ne(W)}).then(()=>{W=[];for(const A of C)if(A.beforeEnter)if($e(A.beforeEnter))for(const K of A.beforeEnter)W.push(yt(K,L,G));else W.push(yt(A.beforeEnter,L,G));return W.push(R),ne(W)}).then(()=>(L.matched.forEach(A=>A.enterCallbacks={}),W=ti(C,"beforeRouteEnter",L,G,j),W.push(R),ne(W))).then(()=>{W=[];for(const A of p.list())W.push(yt(A,L,G));return W.push(R),ne(W)}).catch(A=>nt(A,8)?A:Promise.reject(A))}function I(L,G,W){v.list().forEach(Q=>j(()=>Q(L,G,W)))}function Y(L,G,W,Q,le){const C=g(L,G);if(C)return C;const R=G===pt,A=Et?history.state:{};W&&(Q||R?r.replace(L.fullPath,he({scroll:R&&A&&A.scroll},le)):r.push(L.fullPath,le)),u.value=L,z(L,G,W,R),B()}let J;function re(){J||(J=r.listen((L,G,W)=>{if(!te.listening)return;const Q=m(L),le=T(Q);if(le){w(he(le,{replace:!0,force:!0}),Q).catch(tr);return}f=Q;const C=u.value;Et&&tu(wn(C.fullPath,W.delta),zr()),F(Q,C).catch(R=>nt(R,12)?R:nt(R,2)?(w(he(h(R.to),{force:!0}),Q).then(A=>{nt(A,20)&&!W.delta&&W.type===ur.pop&&r.go(-1,!1)}).catch(tr),Promise.reject()):(W.delta&&r.go(-W.delta,!1),k(R,Q,C))).then(R=>{R=R||Y(Q,C,!1),R&&(W.delta&&!nt(R,8)?r.go(-W.delta,!1):W.type===ur.pop&&nt(R,20)&&r.go(-1,!1)),I(Q,C,R)}).catch(tr)}))}let O=qt(),b=qt(),S;function k(L,G,W){B(L);const Q=b.list();return Q.length?Q.forEach(le=>le(L,G,W)):console.error(L),Promise.reject(L)}function E(){return S&&u.value!==pt?Promise.resolve():new Promise((L,G)=>{O.add([L,G])})}function B(L){return S||(S=!L,re(),O.list().forEach(([G,W])=>L?W(L):G()),O.reset()),L}function z(L,G,W,Q){const{scrollBehavior:le}=e;if(!Et||!le)return Promise.resolve();const C=!W&&ru(wn(L.fullPath,0))||(Q||!W)&&history.state&&history.state.scroll||null;return Vr().then(()=>le(L,G,C)).then(R=>R&&eu(R)).catch(R=>k(R,L,G))}const H=L=>r.go(L);let U;const ie=new Set,te={currentRoute:u,listening:!0,addRoute:_,removeRoute:a,clearRoutes:t.clearRoutes,hasRoute:c,getRoutes:s,resolve:m,options:e,push:y,replace:x,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:o.add,beforeResolve:p.add,afterEach:v.add,onError:b.add,isReady:E,install(L){const G=this;L.component("RouterLink",ku),L.component("RouterView",Fu),L.config.globalProperties.$router=G,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>lt(u)}),Et&&!U&&u.value===pt&&(U=!0,y(r.location).catch(le=>{}));const W={};for(const le in pt)Object.defineProperty(W,le,{get:()=>u.value[le],enumerable:!0});L.provide(Ni,G),L.provide(ao,ca(W)),L.provide(yi,u);const Q=L.unmount;ie.add(L),L.unmount=function(){ie.delete(L),ie.size<1&&(f=pt,J&&J(),J=null,u.value=pt,U=!1,S=!1),Q()}}};function ne(L){return L.reduce((G,W)=>G.then(()=>j(W)),Promise.resolve())}return te}function Au(e,t){const i=[],n=[],r=[],o=Math.max(t.matched.length,e.matched.length);for(let p=0;p<o;p++){const v=t.matched[p];v&&(e.matched.find(f=>Bt(f,v))?n.push(v):i.push(v));const u=e.matched[p];u&&(t.matched.find(f=>Bt(f,u))||r.push(u))}return[i,n,r]}const Lu={id:"app"},Iu={class:"navbar"},Mu={class:"nav-container"},Du={class:"nav-menu"},Uu={class:"main-content"},Vu=Ot({__name:"App",setup(e){return(t,i)=>{const n=li("router-link"),r=li("router-view");return We(),qe("div",Lu,[ee("nav",Iu,[ee("div",Mu,[i[5]||(i[5]=ee("div",{class:"nav-brand"},[ee("h1",null,"LivePhoto Vue")],-1)),ee("ul",Du,[ee("li",null,[Pe(n,{to:"/"},{default:St(()=>i[0]||(i[0]=[Se("")])),_:1,__:[0]})]),ee("li",null,[Pe(n,{to:"/demo"},{default:St(()=>i[1]||(i[1]=[Se("")])),_:1,__:[1]})]),ee("li",null,[Pe(n,{to:"/docs"},{default:St(()=>i[2]||(i[2]=[Se("")])),_:1,__:[2]})]),ee("li",null,[Pe(n,{to:"/examples"},{default:St(()=>i[3]||(i[3]=[Se("")])),_:1,__:[3]})]),i[4]||(i[4]=ee("li",null,[ee("a",{href:"https://github.com/your-username/livephoto-vue",target:"_blank"}," GitHub ")],-1))])])]),ee("main",Uu,[Pe(r)]),i[6]||(i[6]=ee("footer",{class:"footer"},[ee("div",{class:"footer-container"},[ee("p",null," 2024 LivePhoto Vue. Made with ")])],-1))])}}});var xr={exports:{}};/*!
 * Copyright (c) 2017 Apple Inc. All rights reserved.
 * 
 * # LivePhotosKit JS License
 * 
 * **IMPORTANT:** This Apple LivePhotosKit software is supplied to you by Apple
 * Inc. ("Apple") in consideration of your agreement to the following terms, and
 * your use, reproduction, or installation of this Apple software constitutes
 * acceptance of these terms. If you do not agree with these terms, please do not
 * use, reproduce or install this Apple software.
 * 
 * This Apple LivePhotosKit software is supplied to you by Apple Inc. ("Apple") in
 * consideration of your agreement to the following terms, and your use,
 * reproduction, or installation of this Apple software constitutes acceptance of
 * these terms. If you do not agree with these terms, please do not use, reproduce
 * or install this Apple software.
 * 
 * This software is licensed to you only for use with LivePhotos that you are
 * authorized or legally permitted to embed or display on your website. 
 * 
 * The LivePhotosKit Software is only licensed and intended for the purposes set
 * forth above and may not be used for other purposes or in other contexts without
 * Apple's prior written permission. For the sake of clarity, you may not and
 * agree not to or enable others to, modify or create derivative works of the
 * LivePhotosKit Software.
 * 
 * Neither the name, trademarks, service marks or logos of Apple Inc. may be used
 * to endorse or promote products, services without specific prior written
 * permission from Apple. Except as expressly stated in this notice, no other
 * rights or licenses, express or implied, are granted by Apple herein.
 * 
 * The LivePhotosKit Software is provided by Apple on an "AS IS" basis. APPLE
 * MAKES NO WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE
 * IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE, REGARDING THE LIVEPHOTOSKIT SOFTWARE OR ITS USE AND
 * OPERATION ALONE OR IN COMBINATION WITH YOUR PRODUCTS, SYSTEMS, OR SERVICES.
 * APPLE DOES NOT WARRANT THAT THE LIVEPHOTOSKIT SOFTWARE WILL MEET YOUR
 * REQUIREMENTS, THAT THE OPERATION OF THE LIVEPHOTOSKIT SOFTWARE WILL BE
 * UNINTERRUPTED OR ERROR-FREE, THAT DEFECTS IN THE LIVEPHOTOSKIT SOFTWARE WILL BE
 * CORRECTED, OR THAT THE LIVEPHOTOSKIT SOFTWARE WILL BE COMPATIBLE WITH FUTURE
 * APPLE PRODUCTS, SOFTWARE OR SERVICES. NO ORAL OR WRITTEN INFORMATION OR ADVICE
 * GIVEN BY APPLE OR AN APPLE AUTHORIZED REPRESENTATIVE WILL CREATE A WARRANTY. 
 * 
 * IN NO EVENT SHALL APPLE BE LIABLE FOR ANY DIRECT, SPECIAL, INDIRECT, INCIDENTAL
 * OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) RELATING TO OR ARISING IN ANY WAY OUT OF THE USE, REPRODUCTION,
 * OR INSTALLATION, OF THE LIVEPHOTOSKIT SOFTWARE BY YOU OR OTHERS, HOWEVER CAUSED
 * AND WHETHER UNDER THEORY OF CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT
 * LIABILITY OR OTHERWISE, EVEN IF APPLE HAS BEEN ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE. SOME JURISDICTIONS DO NOT ALLOW THE LIMITATION OF LIABILITY FOR
 * PERSONAL INJURY, OR OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THIS LIMITATION
 * MAY NOT APPLY TO YOU. In no event shall Apple's total liability to you for all
 * damages (other than as may be required by applicable law in cases involving
 * personal injury) exceed the amount of fifty dollars ($50.00). The foregoing
 * limitations will apply even if the above stated remedy fails of its essential
 * purpose. 
 * 
 * 
 * **ACKNOWLEDGEMENTS:**
 * https://cdn.apple-livephotoskit.com/lpk/1/acknowledgements.txt
 * 
 * v1.5.6
 */var Nu=xr.exports,jn;function ju(){return jn||(jn=1,function(e,t){(function(i,n){e.exports=n()})(Nu,function(){return function(i){function n(o){if(r[o])return r[o].exports;var p=r[o]={i:o,l:!1,exports:{}};return i[o].call(p.exports,p,p.exports,n),p.l=!0,p.exports}var r={};return n.m=i,n.c=r,n.i=function(o){return o},n.d=function(o,p,v){n.o(o,p)||Object.defineProperty(o,p,{configurable:!1,enumerable:!0,get:v})},n.n=function(o){var p=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(p,"a",p),p},n.o=function(o,p){return Object.prototype.hasOwnProperty.call(o,p)},n.p="",n(n.s=25)}([function(i,n,r){function o(b){if(b){var S=b.staticMembers;S&&p.call(this,S),p.call(this.prototype,b)}}function p(b){for(var S in b)if(b.hasOwnProperty(S)&&S!=="staticMembers"){var k=Object.getOwnPropertyDescriptor(b,S);k.get||k.set?Object.defineProperty(this,S,k):v.call(this,S,b[S])}}function v(b,S){var k=this[b];return k instanceof Function&&S instanceof Function?u.call(this,b,S,k):O.instanceOrKindOf(S,O.Metadata)?f.call(this,b,S):void(this[b]=S)}function u(b,S,k){this[b]=function(){var E=this._super;this._super=k;var B=S.apply(this,arguments);return this._super=E,B}}function f(b,S){this.hasOwnProperty("_metadatas")||(this._metadatas=Object.create(this._metadatas)),(S.isLPKClass?S.sharedInstance:S).registerOnDefinition(this,b)}function d(b){var S=this["_callbacksFor_"+b];if(S){var k=void 0;if(arguments.length>1){k=O.arrayPool.get();for(var E=1,B=arguments.length;E<B;E++)k[E-1]=arguments[E]}var z=void 0;if(z=this._triggerPauseStack){var H=z[z.length-1];if(H[H.length-1]!=="IS_FLUSHING")return void H.push(this,b,k)}for(var U=0,ie=S.length;U<ie;U++){var te=S[U];te&&te.apply(this,k)}k&&O.arrayPool.ret(k)}}function l(b,S){if(b.indexOf(".")!==-1)return _.call(this,b,S);var k="_callbackToIndexMapFor_"+b,E=this.hasOwnProperty(k)?this[k]:this[k]=this[k]?new Y.a(this[k]):new Y.a;if(E.get(S)===void 0){var B="_callbacksFor_"+b,z=this.hasOwnProperty(B)?this[B]:this[B]=this[B]?this[B].slice():[];E.set(S,z.length),z.push(S)}}function P(b,S){if(b.indexOf(".")!==-1)return a.call(this,b,S);var k="_callbackToIndexMapFor_"+b,E=this[k];if(E&&E.get(S)!==void 0){var B=this.hasOwnProperty(k)?this[k]:this[k]=this[k]?new Y.a(this[k]):new Y.a,z="_callbacksFor_"+b;(this.hasOwnProperty(z)?this[z]:this[z]=this[z]?this[z].slice():[])[B.get(S)]=null,B.delete(S)}}function _(b,S,k){var E="_"+b+"_"+O.guidFor(S)+"_"+O.guidFor(k),B="_chainListenerMaintenanceCallback_for"+E;if(!this[B]){var z=b.indexOf("."),H=z!==-1,U=b.substring(z+1),ie=U.substring(0,(U.indexOf(".")+1||U.length+1)-1),te=b.substring(0,z===-1?b.length:z),ne="_chainListenerPreviousStoredValue_for"+E,L=function(G){var W=k||this;if(ie&&H){var Q=this[te],le=this[ne];Q!==le&&(this[ne]=Q,le&&le.isLPKObservable&&a.call(le,U,S,W),Q&&Q.isLPKObservable&&_.call(Q,U,S,W))}G||S.call(W)};l.call(this,te,L),this.isInitialized&&L.call(this,!0),this[B]=L}}function a(b,S,k){var E="_"+b+"_"+O.guidFor(S)+"_"+O.guidFor(k),B="_chainListenerMaintenanceCallback_for"+E,z=this[B];if(z){var H=b.indexOf("."),U=b.substring(0,H===-1?b.length:H);P.call(this,U,z);var ie="_chainListenerPreviousStoredValue_for"+E,te=this[ie];if(te&&te.isLPKObservable){this[ie]=void 0;var ne=b.substring(H+1),L=k||this;a.call(te,ne,S,L)}this[B]=void 0}}function s(b,S){l.apply(this,arguments),this.isInitialized&&S.call(this)}function c(b,S){P.apply(this,arguments)}function m(){var b=this._nextObserverId=(this._nextObserverId||0)+1,S="_runtimeObserver"+b,k=O.observer.apply(O.observer,arguments);return k.registerOnDefinition(this,S),k}function h(b){var S=this._metadatas[b];S&&S.invalidateForObject&&S.invalidateForObject(this)}function g(b){return O.resolvePropertyPathFromObject(this,b)}function y(b,S){var k=b.lastIndexOf(".");if(k===-1)return void(this[b]=S);var E=O.resolvePropertyPathFromObject(this,b.slice(0,k));E&&(E[b.slice(k+1)]=S)}function x(){for(var b=O.objectPool.get(),S=0,k=arguments.length;S<k;S++){var E=arguments[S];b[E]=this.getPath(E)}return b}function T(){var b=arguments.length,S=arguments[b-1],k=O.arrayPool.get();if(b>1)for(var E=0;E<b-1;E++)k[E]=arguments[E];else for(var B in S)Object.prototype.hasOwnProperty.call(S,B)&&k.push(B);O.Object.prototype.pauseNotifications();for(var z=0,H=k.length;z<H;z++){var U=k[z];this.setPath(U,S[U])}O.Object.prototype.resumeNotifications(),O.arrayPool.ret(k)}function w(){(this.hasOwnProperty("_triggerPauseStack")?this._triggerPauseStack:this._triggerPauseStack=O.arrayPool.get()).push(O.arrayPool.get())}function D(){var b=this.hasOwnProperty("_triggerPauseStack")&&this._triggerPauseStack;if(!b)throw"Unmatched `resumeNotifications` call. Cannot over-resume notifications.";var S=b[b.length-1];j(S),b.pop(),O.arrayPool.ret(S),b.length||(delete this._triggerPauseStack,O.arrayPool.ret(b))}function j(b){b.push("IS_FLUSHING");for(var S=O.objectPool.get(),k=0,E=b.length-1;k<E;k+=3){var B=b[k],z=b[k+1],H=b[k+2],U=O.guidFor(B)+":"+z,ie=S[U];ie!==void 0&&(b[ie]=null),S[U]=H?void 0:k}O.objectPool.ret(S);for(var te=0,ne=b.length-1;te<ne;te+=3){var L=b[te];if(L){var G=b[te+1],W=b[te+2];W?(W.unshift(G),L.trigger.apply(L,W),O.arrayPool.ret(W)):L.trigger(G)}}}var F=r(47),I=r(20),Y=r(19),J=r(44),re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},O={mixin:function(b){for(var S=arguments.length,k=Array(S>1?S-1:0),E=1;E<S;E++)k[E-1]=arguments[E];for(var B=1,z=arguments.length;B<z;B++){var H=arguments[B];if(H)for(var U in H)H.hasOwnProperty(U)&&(b[U]=H[U])}},instanceOf:function(b,S){return!!b&&(b.constructor===S||O.kindOf(b.constructor,S))},kindOf:function(b,S){if(!(b&&b.isLPKClass&&S&&S.isLPKClass))return!1;do if(b===S)return!0;while(b=b.superclass);return!1},instanceOrKindOf:function(b,S){return O.instanceOf(b,S)||O.kindOf(b,S)},isHash:function(b){var S=void 0;return!((b===void 0?"undefined":re(b))!=="object"||b===null||(S=b.constructor)&&S!==Object||b.isLPKObject||b.isLPKClass)},arrayPool:F.a,mapPool:F.b,objectPool:F.c,canvasPool:F.d,String:J.a,Array:{mapIntoArray:function(b,S,k){var E=b.length;k.length!==E&&(k.length=E);for(var B=0;B<E;B++)k[B]=S(b[B],B);return k}},resolvePropertyPathFromObject:function(b,S){for(var k=S.indexOf("."),E=0,B=b;k!==-1;){if(!(B=B[S.substring(E,k)]))return;E=k+1,k=S.indexOf(".",E)}return B[S.substring(E)]},InequalityTests:{DEFAULT:function(b,S,k){return b!==S||Array.isArray(b)||O.isHash(b)},STRICT:function(b,S,k){return b!==S},NAN_AWARE:function(b,S,k){return!Object.is(b,S)}},guidFor:I.a,reusableObject:{},emptyArray:[],Object:null,Metadata:null,observer:null,MetadataExtension:null,metadataExtension:null,AccumulatorMetadata:null,accumulator:null,ObserverMetadata:null,Property:null,property:null,ObservableProperty:null,observableProperty:null,ProxyProperty:null,proxyProperty:null,boundFunction:null};O.Object={staticMembers:{isLPKClass:!0,isLPKObservable:!0,isInitialized:!0,create:function(){for(var b=arguments.length,S=Array(b),k=0;k<b;k++)S[k]=arguments[k];var E=Object.create(this.prototype);return E.constructor=this,E.init.apply(E,arguments),E},extend:function(){for(var b=arguments.length,S=Array(b),k=0;k<b;k++)S[k]=arguments[k];var E=Object.create(this);return E.prototype=Object.create(E.prototype),Array.prototype.forEach.call(arguments,o,E),E.superclass=this,E.init(),E},init:function(){},isClassFor:function(b){var S=b&&b.constructor;return!(!S||!this.isSuperclassOf(S))},isSuperclassOf:function(b){var S=this;if(!(b&&b.isLPKClass&&S&&S.isLPKClass))return!1;do if(b===S)return!0;while(b=b.superclass);return!1},_super:null,_metadatas:{},trigger:d,_listen:l,_observe:s,_unlisten:P,_unobserve:c,observe:m,propertyChanged:h,pauseNotifications:w,resumeNotifications:D,getPath:g,setPath:y,getMultiple:x,setMultiple:T},isLPKObject:!0,isLPKObservable:!0,isInitialized:!1,_metadatas:{},init:function(b){O.mixin(this,b),this._awakenPropertiesWithAccessors()},_awakenPropertiesWithAccessors:function(){var b=O.arrayPool.get(),S=this._metadatas;do b.push(S);while(S=Object.getPrototypeOf(S));for(var k,E=O.arrayPool.get(),B=O.arrayPool.get(),z=O.arrayPool.get(),H=O.mapPool.get(),U=b.length-1;k=b[U];U--){for(var ie in k)if(k.hasOwnProperty(ie)){var te=k[ie];if(te.hasAccessors){var ne=this[ie];if(ne!==void 0){var L=H.get(te);L!==void 0&&(E[L]=B[L]=void 0),H.set(te,E.length),E.push(te),B.push(ne)}}}z.push(E.length)}this.isInitialized=!0,O.Object.prototype.pauseNotifications();for(var G=0,W=B.length;G<W;G++){var Q=B[G];Q!==void 0&&E[G].awakenForObjectWithValue(this,Q)}O.Object.prototype.resumeNotifications(),O.arrayPool.ret(b),O.arrayPool.ret(E),O.arrayPool.ret(B),O.arrayPool.ret(z),O.mapPool.ret(H)},_super:null,trigger:d,_listen:l,_observe:s,_unlisten:P,_unobserve:c,observe:m,propertyChanged:h,pauseNotifications:w,resumeNotifications:D,getPath:g,setPath:y,getMultiple:x,setMultiple:T},O.Object.staticMembers.prototype=O.Object,O.Object=O.Object.staticMembers,delete O.Object.prototype.staticMembers,Object.defineProperty(O.Object,"sharedInstance",{get:function(){return this.hasOwnProperty("_internalValue_for_sharedInstance")||(this._internalValue_for_sharedInstance=this.create()),this._internalValue_for_sharedInstance},set:function(){throw"Cannot write to a read-only property."}}),O.Metadata=O.Object.extend({registerOnDefinition:function(b,S){b._metadatas[S]=this},unregisterFromDefinition:function(b,S){b._metadatas[S]=void 0}}),O.MetadataExtension=O.Metadata.extend({init:function(b){this._super(),this._extensionParams=b},registerOnDefinition:function(b,S){b._metadatas[S].constructor.extend(this._extensionParams).sharedInstance.registerOnDefinition(b,S)}}),O.metadataExtension=O.MetadataExtension.create.bind(O.MetadataExtension),O.AccumulatorMetadata=O.Metadata.extend({init:function(b){this._super(),this.value=b},registerOnDefinition:function(b,S){var k=b[S];b[S]=this.accumulateValues(b,k,this.value)},accumulateValues:function(b,S,k){if(Array.isArray(S)&&Array.isArray(k))return S.concat(k);if(S&&S.isLPKClass&&O.isHash(k))return S.extend(k);if(k instanceof Function)return k.call(b,S);throw"Cannot use accumulators this way yet."}}),O.accumulator=O.AccumulatorMetadata.create.bind(O.AccumulatorMetadata),O.ObserverMetadata=O.Metadata.extend({staticMembers:{_collector:[]},dependencies:[],observerCallback:function(){throw"Must specify `observerCallback` on observers."},decideRequiresUpdate:O.InequalityTests.DEFAULT,init:function(){if(O.isHash(arguments[0]))this._super.apply(this,arguments);else{var b=Array.prototype.slice.call(arguments),S=b.pop();this._super({dependencies:b,observerCallback:S})}},registerOnDefinition:function(b,S){this._super.apply(this,arguments),this.keyOnObject=S;var k=this;this._invokeObserverCallbackIfNeeded=this._invokeObserverCallbackIfNeeded||(this._invokeObserverCallbackIfNeeded=function(){var z=k.dependencies,H=k.observerCallback,U=k.constructor._collector;U.length=z.length;var ie=!1;k._shouldForceNextInvocationOfObserverCallback&&(k._shouldForceNextInvocationOfObserverCallback=!1,ie=!0);for(var te=0;te<z.length;te++){var ne=z[te],L=this.getPath(ne),G="_lastValueSeenByObserver_"+S+"_forDependency_"+ne,W=this[G];this[G]=L,!ie&&k.decideRequiresUpdate(L,W,ne)&&(ie=!0),U[te]=L}ie&&H.apply(this,U),U.length=0}),b[this.keyOnObject]=b[this.keyOnObject]||(b[this.keyOnObject]=function(){k._shouldForceNextInvocationOfObserverCallback=!0,k._invokeObserverCallbackIfNeeded.call(this)});for(var E=this.dependencies,B=0;B<E.length;B++)b.isInitialized?b._observe(E[B],this._invokeObserverCallbackIfNeeded):b._listen(E[B],this._invokeObserverCallbackIfNeeded)},unregisterFromDefinition:function(b,S){this._super.apply(this,arguments);for(var k=this.dependencies,E=0;E<k.length;E++)b._unlisten(k[E],this._invokeObserverCallbackIfNeeded)}}),O.observer=O.ObserverMetadata.create.bind(O.ObserverMetadata),O.Property=O.Metadata.extend({staticMembers:{extend:function(b){return arguments.length!==1||O.isHash(b)?this._super.apply(this,arguments):this._super({defaultValue:b})}},hasAccessors:!0,readOnly:!1,defaultValue:void 0,get:null,set:null,keyOnObject:null,storageKeyOnObject:null,_defaultGetter:function(b){return b},_defaultSetter:function(b){return b},_internalGetterForObject:function(b){return this.get.call(b,b[this.storageKeyOnObject])},_internalSetterForObject:function(b,S){b[this.storageKeyOnObject]=this.set.call(b,S)},init:function(b){var S=this;if(arguments.length!==1||O.isHash(b)?this._super.apply(this,arguments):this._super({defaultValue:b}),this.get||(this.get=this._defaultGetter),this.readOnly){if(this.set)throw"Cannot include both `readOnly` and `set`.";this.set=function(k){if(S._isAwakeningInReadOnlyMode)return S._isAwakeningInReadOnlyMode=!1,k;throw"Cannot write to a read-only property"}}else this.set||(this.set=this._defaultSetter)},registerOnDefinition:function(b,S){this._super.apply(this,arguments),this.keyOnObject=S;var k=this.storageKeyOnObject="_internalValue_for_"+S;this._internalGetterForObject=this._internalGetterForObject.bind(this),this._internalSetterForObject=this._internalSetterForObject.bind(this);var E=this;Object.defineProperty(b,S,{get:function(){return this.isInitialized?E._internalGetterForObject(this):this[k]},set:function(B){if(!this.isInitialized)return void(this[k]=B);E._internalSetterForObject(this,B)}}),b[S]=this.defaultValue},unregisterFromDefinition:function(b,S){O.reusableObject[S]=void 0;var k=Object.getOwnPropertyDescriptor(O.reusableObject,S);delete O.reusableObject[S],Object.defineProperty(b,S,k),delete b["_internalValue_for_"+S],this._super.apply(this,arguments)},awakenForObjectWithValue:function(b,S){this.readOnly&&(this._isAwakeningInReadOnlyMode=!0),S instanceof Function&&(S=S.call(b)),b[this.keyOnObject]=S}}),O.property=O.Property.extend.bind(O.Property),O.ObservableProperty=O.Property.extend({isCacheable:!1,dependencies:[],writeDependencies:[],decideRequiresUpdate:O.InequalityTests.DEFAULT,_internalSetterForObject:function(b){this._super.apply(this,arguments),this.invalidateForObject(b)},_internalGetterForObject:function(b){if(!this.isCacheable)return this._super.apply(this,arguments);var S=this.cacheExistenceKeyOnObject;if(b[S])return b[this.cacheStorageKeyOnObject];var k=this._super.apply(this,arguments);return b[S]=!0,b[this.cacheStorageKeyOnObject]=k,k},invalidateForObject:function(b){b[this.cacheExistenceKeyOnObject]=!1,b[this.cacheStorageKeyOnObject]=void 0,b.trigger(this.keyOnObject)},registerOnDefinition:function(b,S){this._super.apply(this,arguments);var k=this;this.cacheStorageKeyOnObject="_cacheStorageForProperty_"+S,this.cacheExistenceKeyOnObject="_cacheExistenceForProperty_"+S,O.observer({dependencies:this.dependencies,observerCallback:function(){k.invalidateForObject(this)},decideRequiresUpdate:this.decideRequiresUpdate}).registerOnDefinition(b,"_dependencyObserverForProperty_"+S),this.didChange&&O.observer({dependencies:[S],observerCallback:this.didChange,decideRequiresUpdate:this.decideRequiresUpdate}).registerOnDefinition(b,"_didChangeObserverForProperty_"+S)}}),O.observableProperty=O.ObservableProperty.extend.bind(O.ObservableProperty),O.ProxyProperty=O.ObservableProperty.extend({proxyPath:null,decode:function(b){return b},encode:function(b){return b},init:function(b){var S=typeof b=="string"?b:b.proxyPath;if(!S)throw"A proxyPath must be configured on a ProxyProperty.";this.dependencies=[S];var k=this;this.get=function(){return k.decode(this.getPath(k.proxyPath))},b&&b.readOnly||(this.set=function(E){this.setPath(k.proxyPath,k.encode(E))}),typeof b=="string"?this._super({proxyPath:b}):this._super.apply(this,arguments)}}),O.proxyProperty=O.ProxyProperty.create.bind(O.ProxyProperty),O.boundFunction=function(b){return O.property(function(){return b.bind(this)})},n.a=O},function(i,n,r){r.d(n,"a",function(){return o});var o={default:"full",FULL:"full",HINT:"hint",LOOP:"loop"}},function(i,n,r){function o(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")}var p=function(){function d(l,P){for(var _=0;_<P.length;_++){var a=P[_];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(l,a.key,a)}}return function(l,P,_){return P&&d(l.prototype,P),_&&d(l,_),l}}(),v=navigator.userAgent.toLowerCase(),u=/\sedge\//.test(v),f=function(){function d(){o(this,d)}return p(d,null,[{key:"isEdge",get:function(){return u}},{key:"isChrome",get:function(){return d._isChrome}},{key:"isSafari",get:function(){return d._isSafari}},{key:"isFirefox",get:function(){return d._isFirefox}},{key:"isIE",get:function(){return d._isIE}},{key:"isIOS",get:function(){if(d._isIOS)return!0;var l=window.top,P=l.document;return!(!d._macLike||!("ontouchstart"in l||"createTouch"in P))}}]),d}();n.a=f,f._isChrome=!f.isEdge&&/chrome/.test(v),f._isSafari=!f.isEdge&&!f.isChrome&&/safari/.test(v),f._isFirefox=!f.isEdge&&!f.isChrome&&!f.isSafari&&/firefox/.test(v),f._isIE=!f.isEdge&&!f.isChrome&&!f.isSafari&&!f.isFirefox&&/trident|msie/.test(v),f._isIOS=!!navigator.userAgent.match(/\b(iPad|iPhone|iPod)\b.*\bOS \d+_\d+/i),f._macLike=/mac/i.test(navigator.userAgent)&&!/like mac/i.test(navigator.userAgent)},function(i,n,r){var o=r(10),p=r(1);r.d(n,"a",function(){return v});var v={_mappingToLocalizedStrings:{live:"Live",get bounce(){return o.a.getString("VideoEffects.Badge.Title.Bounce")},get exposure(){return o.a.getString("VideoEffects.Badge.Title.LongExposure")},get loop(){return o.a.getString("VideoEffects.Badge.Title.Loop")}},_mappingToPlaybackStyle:{bounce:p.a.LOOP,exposure:p.a.FULL,live:p.a.FULL,loop:p.a.LOOP},default:"live",BOUNCE:"bounce",EXPOSURE:"exposure",LIVE:"live",LOOP:"loop",toBadgeText:function(u){return this.toLocalizedString(u).toLocaleUpperCase()},toLocalizedString:function(u){return this._mappingToLocalizedStrings[u||v.default]},toPlaybackStyle:function(u){return this._mappingToPlaybackStyle[u||p.a.default]}}},function(i,n,r){function o(h,g,y){return g in h?Object.defineProperty(h,g,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[g]=y,h}var p=r(0),v=r(7),u=r(39),f=r(38),d=r(40),l=r(9),P=Object.assign||function(h){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(h[x]=y[x])}return h},_=p.a.Object.extend({layerName:null,renderLayerClass_dom:null,renderLayerMixin:{},init:function(h){this._super(),this.renderLayerMixin=h},getRenderLayer:function(h,g){return this["renderLayerClass_"+h.approach].extend(this.renderLayerMixin,{layerName:this.layerName}).create(h,g)}}),a=_.extend({renderLayerClass_dom:u.a}),s=_.extend({renderLayerClass_dom:f.a}),c=_.extend({renderLayerClass_dom:d.a}),m=p.a.Object.extend({staticMembers:{PhotoIngredient:a,InterpolatedVideoIngredient:s,VideoIngredient:c,computedStyle:v.a.computedStyle,getRecipeFromPlaybackStyle:function(h){return this._recipesByPlaybackStyle[h]},registerRecipeWithPlaybackStyle:function(h,g){this._recipesByPlaybackStyle=P({},this._recipesByPlaybackStyle,o({},g,h))}},correspondingPlaybackStyle:null,get name(){return"recipe_for_playbackStyle_"+this.correspondingPlaybackStyle},minimumShortenedDuration:0,spontaneousFinishDuration:0,ingredients:null,requiresInterpolation:!1,init:function(h){this.ingredients=[],this._super();for(var g in h)if(h.hasOwnProperty(g)){var y=h[g];this[g]=y,_.isClassFor(y)&&(y.layerName=g,this.ingredients.push(y))}this.correspondingPlaybackStyle&&m.registerRecipeWithPlaybackStyle(this,this.correspondingPlaybackStyle)},getRenderLayers:function(h){for(var g,y=[],x=0;g=this.ingredients[x];x++)g.isDisabled||y.push(g.getRenderLayer(h,this));return y},beginFinishingPlaybackEarly:function(h){if(!h.isPlaying)return void(h.wantsToPlay=!1);h.duration=Math.min(h.duration,Math.max(this.minimumShortenedDuration,h.currentTime+this.spontaneousFinishDuration))},calculateAnimationDuration:function(h,g,y){return g||0},continuePlayback:function(h){h.currentTime<h.duration?h._rafID=requestAnimationFrame(h._nextFrame.bind(h)):(h.stop(),h.dispatchEvent(r.i(l.f)()))},register:function(){},requestMoreCompatibleRecipe:function(){return this}});n.a=m},function(i,n,r){var o=r(12),p={debug:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];o.a&&console.debug.apply(console,arguments)},log:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];o.a&&console.log.apply(console,arguments)},info:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];o.a&&console.info.apply(console,arguments)},warn:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];console.warn.apply(console,arguments)},error:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];console.error.apply(console,arguments)}};n.a=p},function(i,n,r){r.d(n,"a",function(){return o});var o;(function(p){p[p.FAILED_TO_DOWNLOAD_RESOURCE=0]="FAILED_TO_DOWNLOAD_RESOURCE",p[p.PHOTO_FAILED_TO_LOAD=1]="PHOTO_FAILED_TO_LOAD",p[p.VIDEO_FAILED_TO_LOAD=2]="VIDEO_FAILED_TO_LOAD"})(o||(o={}))},function(i,n,r){var o=r(8),p=r(0),v=o.a.extend({_hasBeenDisposed:!1,staticMembers:{computedStyle:function(u){return u._lpk_isComputedStyle=!0,u}},recipe:p.a.observableProperty(),renderer:p.a.observableProperty(),duration:p.a.proxyProperty("renderer.duration"),canRender:p.a.observableProperty(!1),computedStyles:p.a.property(function(){return[]}),displayWidth:0,displayHeight:0,shouldLoop:!1,init:function(u,f){this.renderer=u,this.recipe=f,this._super();for(var d in this){var l=this[d];l&&l._lpk_isComputedStyle&&this.computedStyles.push({styleKey:d,getter:l})}},updateSize:function(u,f){if(!arguments.length)return this.updateSize(this.displayWidth,this.displayHeight);this.displayWidth=u,this.displayHeight=f},setUpForRender:function(){},tearDownFromRender:function(){this.reduceMemoryFootprint()},reduceMemoryFootprint:function(){},_canRenderDidChange:p.a.observer("canRender","renderer._lastRecipe",function(u,f){var d=this.recipe,l=this.renderer;this._hasBeenDisposed||(!u||!f||f!==d&&l._hasInitialized?this.tearDownFromRender():(l._hasInitialized=!0,this.setUpForRender(),this.updateSize()))}),prepareToRenderAtTime:function(){return!0},canRenderAtTime:function(){return!0},renderAtTime:function(u){if(!arguments.length)return this.renderAtTime(this._lastRenderedTime);this._lastRenderedTime=u;for(var f,d=0;f=this.computedStyles[d];d++)f.value=f.getter.call(this,u);this.renderStyles(this.computedStyles)},renderStyles:function(u){},dispose:function(){this.detach(),this._hasBeenDisposed=!0}});n.a=v},function(i,n,r){var o=r(0),p=o.a.Object.extend({element:null,_lpk_isView:!0,tagName:"div",eventDispatchingElement:null,init:function(v){v?this.element=v:this.tagName&&(this.element=document.createElement(this.tagName)),this._super()},attachInto:function(v,u,f){if(!this.element)return void(this.parentView=v);u||(u=v.element),f&&f._lpk_isView&&(f=f.element),f?u.insertBefore(this.element,f):u.appendChild(this.element),this.parentView=v},detach:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.parentView=null},dispatchEvent:function(v){var u=this.eventDispatchingElement||this.element;if(!u)throw"Cannot dispatch an event from a view with no DOM element.";u.dispatchEvent.call(u,v)},parentView:o.a.observableProperty(null)});n.a=p},function(i,n,r){function o(_){return function(a){return new CustomEvent(_,{detail:a})}}var p=r(14);r.d(n,"a",function(){return v}),r.d(n,"b",function(){return u}),r.d(n,"f",function(){return f}),r.d(n,"e",function(){return d}),r.d(n,"c",function(){return l}),r.d(n,"d",function(){return P}),function(){function _(a,s){s=s||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,s.bubbles,s.cancelable,s.detail),c}if(typeof window.CustomEvent=="function")return!1;_.prototype=window.Event.prototype,window.CustomEvent=_}();var v=o(p.a.LIVEPHOTOSKIT_LOADED),u=o("canplay"),f=o("ended"),d=o("error"),l=o("photoload"),P=o("videoload")},function(i,n,r){var o=r(0),p=["ar-sa","ca-cs","cs-cz","da-dk","nl-nl","pt-br","pt-pt","no-no","el-gr","en-us","fi-fi","fr-fr","de-de","he-il","hr-hr","hu-hu","id-id","it-it","ja-jp","ko-kr","ms-my","pl-pl","ro-ro","ru-ru","zh-cn","zh-tw","sk-sk","es-es","sv-se","th-th","tr-tr","uk-ua","vi-vi"],v={"es-419":"es-es",pt:"pt-pt",no:"no-no",nb:"no-no",nn:"no-no",zh:"zh-cn","zh-Hans":"zh-cn","zh-Hant":"zh-tw","zh-HK":"zh-tw","zh-MO":"zh-tw","zh-SG":"zh-cn"},u={};for(var f in v){var d=v[f],l=u[d]||[];u[d]=[].concat(function(x){if(Array.isArray(x)){for(var T=0,w=Array(x.length);T<x.length;T++)w[T]=x[T];return w}return Array.from(x)}(l),[f])}for(var P={},_=0;_<p.length;_++){var a=p[_];try{var s=r(21)("./"+a+".lproj/strings.json"),c=a.split("-")[0],m=u[a];if(P[a]=s,P[c]||(P[c]=s),m)for(var h in m)P[h]=s}catch{}}var g=function(x){var T=y.locale,w=y.strings;return(w[T]||w["en-us"])[x]||""},y=o.a.Object.extend({locale:o.a.observableProperty({get:function(x){return x||window.navigator.language},set:function(x){return x}}),getString:g,strings:P}).create();n.a=y},function(i,n,r){function o(F,I){if(!(F instanceof I))throw new TypeError("Cannot call a class as a function")}function p(F){var I=parseFloat(F);if(+I===I)return I;var Y=F==="true"||F!=="false"&&void 0;return!!Y===Y?Y:F}var v=r(27),u=r(0),f=r(5),d=r(1),l=r(3),P=r(12);r.d(n,"a",function(){return T}),r.d(n,"b",function(){return w}),r.d(n,"c",function(){return D});var _=Object.assign||function(F){for(var I=1;I<arguments.length;I++){var Y=arguments[I];for(var J in Y)Object.prototype.hasOwnProperty.call(Y,J)&&(F[J]=Y[J])}return F},a="property",s={play:"method",pause:"method",stop:"method",toggle:"method",beginFinishingPlaybackEarly:"method",isPlaying:"read_only_property",wantsToPlay:"read_only_property",currentTime:"read_only_property",renderedTime:"read_only_property",duration:"read_only_property",autoplay:a,caption:a,playbackStyle:a,preloadedEffectType:a,updateSize:"method",photoWidth:"read_only_property",photoHeight:"read_only_property",videoWidth:"read_only_property",videoHeight:"read_only_property",effectType:a,proactivelyLoadsVideo:a,photoSrc:a,photoMimeType:a,videoSrc:a,videoMimeType:a,metadataVideoSrc:a,photo:a,video:a,photoTime:a,frameTimes:a,videoRotation:a,canPlay:"read_only_property",loadProgress:"read_only_property",errors:"read_only_property",showsNativeControls:a,observe:"method"};delete s.observe;var c=function(){var F=[];for(var I in s)s.hasOwnProperty(I)&&F.push(I);return F}(),m={},h=c.map(function(F){var I="data-"+u.a.String.hyphenate(F);return m[I]=F,I}),g=c.map(function(F){return s[F]}),y={enumerable:!1,configurable:!1,writable:!1},x={enumerable:!1,configurable:!1},T=function(F,I){if(!F)return f.a.warn("LivePhotosKit.augmentElementAsPlayer requires a target element to augment."),null;if(F.tagName==="IMG"){var Y=document.createElement("div"),J=F.parentNode,re=F.getAttribute("src"),O=F.getAttribute("photo-src")||re;F.removeAttribute("src"),F.setAttribute("data-photo-src",O);for(var b=F.attributes,S=0;S<b.length;S++){var k=b[S],E=k.nodeName,B=k.value;Y.setAttribute(E,B)}J.insertBefore(Y,F),J.removeChild(F),F=Y}var z=void 0,H=void 0,U=F;if(U.__isLPKPlayer__)return U;y.value=!0,Object.defineProperty(U,"__isLPKPlayer__",y);var ie=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};P.a&&!V.videoSrc&&V.photoSrc?f.a.warn("Changing a `photoSrc` independent of its `videoSrc` can result in unexpected behavior"):P.a&&V.videoSrc&&!V.photoSrc&&f.a.warn("Changing a `videoSrc` independent of its `photoSrc` can result in unexpected behavior");var M=H?{photoSrc:H.photo,videoSrc:H.videoSrc,effectType:H.effectType,autoplay:H.autoplay,proactivelyLoadsVideo:H.proactivelyLoadsVideo}:{},N=_({},M,V),q=(N.photoSrc,N.videoSrc,N.effectType),X=N.autoplay,$=N.proactivelyLoadsVideo;z=u.a.objectPool.get(),N.preloadedEffectType=q,N.autoplay=X!==!1;var oe=q||l.a.default;l.a.toPlaybackStyle(oe)===d.a.LOOP&&N.autoplay&&(P.a&&!$&&f.a.warn("When using a looping asset you should set `proactivelyLoadsVideo` to `true` unless `autoplay` is also set to `false`"),N.proactivelyLoadsVideo=!0);for(var Z in N)Object.prototype.hasOwnProperty.call(N,Z)&&(s[Z]===a?z[Z]=N[Z]:f.a.warn("LivePhotosKit.Player: Initial configuration for `"+Z+"` was ignored, because the property is not a writable property."));if(H)for(var ae in z){var se=z[ae];H[ae]=se}else H=v.a.create(U,z);u.a.objectPool.ret(z),z=null};U.setProperties=ie,U.setProperties(I);for(var te,ne,L=0;(te=c[L])&&(ne=g[L]);L++)(function(V,M,N){N==="method"?(y.value=H[M].bind(H),Object.defineProperty(U,M,y)):(x.set=N===a?function(q){H[M]=q}:function(){},x.get=function(){return H[M]},Object.defineProperty(U,M,x))})(0,te,ne);y.value=function(){var V=arguments.length,M=arguments[V-1];if(V<1||!(M instanceof Function))throw new Error("Invalid arguments passed to `observe`. Form: key, [key, ], callback.");for(var N=u.a.arrayPool.get(),q=0,X=V;q<X;q++)N[q]=arguments[q];for(var $=0,oe=V-1;$<oe;$++){var Z=s[N[$]];if(Z!==a&&Z!=="read_only_property")throw new Error("Can't observe non-observable property '"+N[$]+"'.")}N[V-1]=M.bind(this);var ae=H.observe.apply(H,N);return u.a.arrayPool.ret(N),new j(ae,H)},Object.defineProperty(U,"observe",y);for(var te,ne,G,L=0;(te=c[L])&&(ne=g[L])&&(G=h[L]);L++)if(ne===a){var W=U.getAttribute(G);W&&(te==="effectType"?H.preloadedEffectType=p(W):H[te]=p(W))}var Q=U.setAttribute;y.value=function(V,M){var N=m[V];if(!N)return void Q.apply(this,arguments);this[N]=p(M)},Object.defineProperty(U,"setAttribute",y);var le=U.removeAttribute;y.value=function(V){var M=m[V];if(!M)return le.apply(this,arguments);this[M]=null},Object.defineProperty(U,"removeAttribute",y);for(var C,R,A,K=0;(C=c[K])&&(R=g[K])&&(A=h[K]);K++)(function(V,M,N,q){if(N!==a&&N!=="read_only_property")return"continue";U.observe(M,function(X){X==null||typeof X!="string"&&+X!==X&&typeof X!="boolean"?le.call(this,q):Q.call(this,q,String(X))})})(0,C,R,A);return U.getAttribute("data-live-photo")!==""&&U.setAttribute("data-live-photo",""),y.value=H,Object.defineProperty(U,"__internalLPKPlayer__",y),y.value=void 0,x.set=x.get=void 0,U},w=function(F){var I=document.createElement("div");return T(I,F)},D=function(F,I){if(arguments.length>=3||typeof arguments[0]=="string"&&typeof arguments[1]=="string")throw new Error("LivePhotosKit.Player: Creating a new Player using arguments of the form 'photoSrc, videoSrc, [targetElement, [options]]' is no longer supported. Instead, use the new signature, '[targetElement, [options]]");return f.a.warn("The `LivePhotosKit.Player` method will be deprecated in an upcoming release. Please use the `LivePhotosKit.augementElementAsPlayer` or `LivePhotosKit.createPlayer` methods, instead."),F?T(F,I):w(I)},j=function F(I,Y){o(this,F),this.fire=function(){Y[I.keyOnObject]()},this.disconnect=function(){I.unregisterFromDefinition(Y)},this.connect=function(){I.registerOnDefinition(Y)}}},function(i,n,r){var o=/_lpk_debug=true/i;n.a=o.test(window.location.search)||o.test(window.location.hash)},function(i,n,r){var o={setUpForRender:function(){this.attachInto(this.renderer)},tearDownFromRender:function(){this.detach(),this._super()},renderStyles:function(p){for(var v,u=this.element,f=u.style,d=0;v=p[d];d++){var l=v,P=l.styleKey,_=l.value;f[P]!==_&&(f[P]=_)}}};n.a=o},function(i,n,r){var o=r(55),p=r(56),v=r(57);n.a={APP_NAME:"LivePhotosKit",BUILD_NUMBER:o.a,MASTERING_NUMBER:p.a,FEEDBACK_URL_PREFIX:"https://feedbackws.icloud.com",LIVEPHOTOSKIT_LOADED:"livephotoskitloaded",URL_PREFIX:"https://cdn.apple-livephotoskit.com",VERSION:v.a}},function(i,n,r){function o(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}var p=r(3),v=r(50),u=r(18),f=r(10),d=r(1);r.d(n,"a",function(){return _});var l=function(){function a(s,c){for(var m=0;m<c.length;m++){var h=c[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}return function(s,c,m){return c&&a(s.prototype,c),m&&a(s,m),s}}(),P={element:null,label:"",labelPadding:6,leftPadding:5,height:25,backgroundColor:"rgba(255, 255, 255, 0.7)",itemColor:"rgb(0, 0, 0)",fontSize:9,borderRadius:5,dottedRadius:8.5,innerRadius:5.25,zIndex:4,shouldAnimateProgressRing:!0,progressRingAnimationSpeed:300,shouldAddEventListeners:!0,effectType:null,playbackStyle:null,configurePlayAction:r.i(v.a)(),configureStopAction:r.i(v.a)()},_=function(){function a(){var s=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};o(this,a),this._setInstanceProps(c),this._createCanvas(),this.redraw(),this._addEventListeners(),f.a.observe("locale",function(){return s.updateBadgeText()})}return l(a,[{key:"attachPlayerInstance",value:function(s){s.attachBadgeView(this),this.updateBadgeText(s.effectType)}},{key:"redraw",value:function(){var s=this.progress;s>0&&this.shouldAnimateProgressRing?this._animateProgressRing():this._redraw(s)}},{key:"reset",value:function(){var s=this._requestedFrame;s&&cancelAnimationFrame(s),this._progress=0,this._previousProgress=0,this.redraw()}},{key:"appendTo",value:function(s){s.appendChild(this.element)}},{key:"updateAriaLabel",value:function(){var s=p.a.toLocalizedString(this.effectType),c=f.a.getString("VideoEffects.Badge");this.element.setAttribute("aria-label",c+": "+s)}},{key:"updateBadgeText",value:function(s){s?this.effectType=s:s=this.effectType,this.label=s?p.a.toBadgeText(s):"",this.playbackStyle=p.a.toPlaybackStyle(s),this.updateAriaLabel(),this._redraw()}},{key:"_createCanvas",value:function(){var s=this.element;if(s){if(s.tagName.toLowerCase()!=="canvas")throw new Error("Backing element for LivePhotoBadge needs to be an HTMLCanvasElement.")}else s=this.element=document.createElement("canvas");s.setAttribute("role","button"),this.updateAriaLabel(),s.classList.add("lpk-badge"),this._context=s.getContext("2d")}},{key:"_setCanvasSize",value:function(){var s=this.element,c=u.a(),m=this.height,h=this.width;s.height=m*c,s.width=h*c,s.style.height=m+"px",s.style.width=h+"px"}},{key:"_setInstanceProps",value:function(s){var c={};for(var m in P)c.hasOwnProperty.call(P,m)&&(this[m]=s.hasOwnProperty(m)?s[m]:P[m]);this.defaultProps=P}},{key:"_redraw",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=(this.element,this.label),m=c.toLowerCase()||p.a.default;this._setCanvasSize(),this._context.clearRect(0,0,this.width,this.height),this._drawBackground(),this._drawLabel(),this.shouldShowError||(this._drawInnerCircle(),p.a.toPlaybackStyle(m)!==d.a.LOOP?this._drawPlayArrow():this._drawLoopCircle()),this.shouldShowError?(this._drawProgressRing(1),this._drawErrorSlash()):this.progress>0?this._drawProgressRing(s):this._drawDottedCircle()}},{key:"_drawBackground",value:function(){var s=u.a(),c=this._context,m=this.borderRadius*s,h=this.width*s,g=this.height*s;c.beginPath(),c.moveTo(m,0),c.lineTo(h-m,0),c.quadraticCurveTo(h,0,h,m),c.lineTo(h,g-m),c.quadraticCurveTo(h,g,h-m,g),c.lineTo(m,g),c.quadraticCurveTo(0,g,0,g-m),c.lineTo(0,m),c.quadraticCurveTo(0,0,m,0),c.closePath(),c.fillStyle=this.backgroundColor,c.fill()}},{key:"_drawDottedCircle",value:function(){for(var s=a.numberOfDots,c=this.dottedRadius*u.a(),m=0;m<s;m++){var h=this.x0+c*Math.cos(2*Math.PI*m/s),g=this.y0+c*Math.sin(2*Math.PI*m/s);this._drawDot(h,g)}}},{key:"_drawDot",value:function(s,c){var m=this._context,h=u.a()===1?1:1.25;m.beginPath(),m.arc(s,c,h,0,2*Math.PI),m.fillStyle=this.itemColor,m.fill()}},{key:"_drawInnerCircle",value:function(){var s=u.a(),c=this._context,m=this.innerRadius*s;c.beginPath(),c.arc(this.x0,this.y0,m,0,2*Math.PI),c.lineWidth=s===1?1.25:1.5,c.strokeStyle=this.itemColor,c.stroke()}},{key:"_drawPlayArrow",value:function(){var s=u.a(),c=this._context,m=5*s,h=4*s,g=this.x0+.5*s,y=this.y0;c.beginPath(),c.moveTo(g-h/2,y-m/2),c.lineTo(g+h/2,y),c.lineTo(g-h/2,y+m/2),c.fillStyle=this.itemColor,c.fill()}},{key:"_drawLoopCircle",value:function(){var s=u.a(),c=this._context,m=2*s;c.beginPath(),c.arc(this.x0,this.y0,m,0,2*Math.PI),c.fillStyle=this.itemColor,c.fill()}},{key:"_drawLabel",value:function(){var s=u.a(),c=this._context,m=(this.leftPadding+2*this.dottedRadius+this.labelPadding)*s,h=(this.height/2+4.5)*s;c.fillStyle=this.itemColor,c.font=this.fontStyle,c.fillText(this.label,m,h)}},{key:"_drawProgressRing",value:function(s){var c=u.a(),m=this._context,h=this.dottedRadius*c,g=2*Math.PI*.75,y=(.75+s)*(2*Math.PI);m.beginPath(),m.arc(this.x0,this.y0,h,g,y,!1),m.lineWidth=1.5*c,m.strokeStyle=this.itemColor,m.stroke()}},{key:"_drawErrorSlash",value:function(){var s=u.a(),c=this._context,m=this.dottedRadius*s,h=m*Math.sqrt(2)/2;c.beginPath(),c.moveTo(this.x0+h,this.y0+h),c.lineTo(this.x0-h,this.y0-h),c.lineWidth=1.5*s,c.strokeStyle=this.itemColor,c.stroke()}},{key:"_animateProgressRing",value:function(){var s=this,c=this.progress,m=this._previousProgress||0,h=Math.abs(c-m),g=c<m;g&&(c=m,m=this.progress);for(var y=h*this.progressRingAnimationSpeed,x=y/(1e3/60),T=h/x,w=[],D=0,j=x;D<j;D++)w.push(m+D*T);w[w.length-1]=c,g&&w.reverse(),function F(){var I=w.shift();s._redraw(I),w.length&&(s._requestedFrame=window.requestAnimationFrame(F)),I===1&&window.setTimeout(function(){s.progress=0},.25*s.progressRingAnimationSpeed)}()}},{key:"_addEventListeners",value:function(){var s=this,c=this.element,m=void 0;c.addEventListener("mouseup",function(){m=window.setTimeout(function(){s.configurePlayAction()},0)}),c.addEventListener("mouseenter",function(){m=window.setTimeout(function(){s.configurePlayAction()},0)}),c.addEventListener("mouseleave",function(){m&&window.clearTimeout(m),s.configureStopAction()})}},{key:"width",get:function(){var s=this._context;if(!s)return 0;var c=this.dottedRadius,m=this.fontStyle,h=this.label,g=this.labelPadding,y=this.leftPadding;s.font=m;var x=s.measureText(h);this._textMetrics=x;var T=h.length>0?x.width:0;return this._width=(T>2?y:-2)+2*c+2*g+Math.ceil(T/u.a())}},{key:"fontStyle",get:function(){return this.fontSize*u.a()+'pt/1 system, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica'}},{key:"x0",get:function(){return(this.dottedRadius+this.leftPadding)*u.a()}},{key:"y0",get:function(){return this.height/2*u.a()}},{key:"progress",set:function(s){typeof s=="number"&&(this._previousProgress=this._progress,this._progress=s,this.redraw())},get:function(){return this._progress}},{key:"shouldShowError",set:function(s){this._shouldShowError=!!s,this._redraw(this.progress)},get:function(){return this._shouldShowError}}],[{key:"numberOfDots",get:function(){return u.a()===1?17:26}}]),a}()},function(i,n,r){var o=r(30),p=r(0),v=r(6),u=o.a.extend({mimeType:p.a.observableProperty({dependencies:["_mimeTypeFromXHR"],get:function(f){return this._mimeTypeFromXHR||f||null}}),_mimeTypeFromXHR:p.a.observableProperty(),requiresMimeTypeForRawArrayBufferSrc:!0,exposedMimeTypeKeyForErrorStrings:"mimeType",exposedSrcKeyForErrorStrings:"src",abortCurrentLoad:function(){this.__xhr&&(this._detachXHR(),this._xhr.abort()),this._mimeTypeFromXHR=null,this.abortCurrentSecondaryLoad()},loadSrc:function(f){if(typeof f=="string"){this._mimeTypeFromXHR=null,this._attachXHR();var d=this._xhr;d.open("GET",f),d.responseType="arraybuffer",d.send(null)}else if(f instanceof ArrayBuffer){if(!this.mimeType&&this.requiresMimeTypeForRawArrayBufferSrc)throw new Error("MIME Type must be assigned to `"+this.exposedMimeTypeKeyForErrorStrings+"` prior to assigning a raw ArrayBuffer to `"+this.exposedSrcKeyForErrorStrings+"`.");this.beginSecondaryLoad(f,this.mimeType)}},get _xhr(){var f=this.__xhr;return f||(f=this.__xhr=new XMLHttpRequest),f},_detachXHR:function(){var f=this._xhr;f.removeEventListener("progress",this._xhrProgress),f.removeEventListener("readystatechange",this._xhrReadyStateChanged)},_attachXHR:function(){var f=this._xhr;f.addEventListener("progress",this._xhrProgress),f.addEventListener("readystatechange",this._xhrReadyStateChanged)},_xhrReadyStateChanged:function(){if(this.state==="loading"){if(this._xhr.readyState>=2&&this._xhr.status!==200){var f=new Error("Failed to download resource from URL assigned to '"+this.exposedSrcKeyForErrorStrings+"'.");return f.errCode=v.a.FAILED_TO_DOWNLOAD_RESOURCE,this.loadDidFail(f)}return this._xhr.readyState===4&&this._xhr.status===200?this._xhrLoadDidFinish():void 0}},_xhrProgress:function(f){if(f&&f.total){var d=(+f.loaded||0)/f.total;+d===d&&(this.progress=Math.max(0,Math.min(1,d)))}},_xhrLoadDidFinish:function(){this._mimeTypeFromXHR=this._xhr.getResponseHeader("Content-Type"),this.beginSecondaryLoad(this._xhr.response,this.mimeType)},beginSecondaryLoad:function(f,d){this._defaultSecondaryLoadTimeout=setTimeout(this.loadDidSucceed.bind(this,f),0)},abortCurrentSecondaryLoad:function(){this._defaultSecondaryLoadTimeout&&(clearTimeout(this._defaultSecondaryLoadTimeout),this._defaultSecondaryLoadTimeout=null)},init:function(){this._xhrReadyStateChanged=this._xhrReadyStateChanged.bind(this),this._xhrProgress=this._xhrProgress.bind(this),this._super()}});n.a=u},function(i,n,r){var o=r(2);n.a=o.a.isEdge||o.a.isIE},function(i,n,r){function o(){d.forEach(function(l){return l()})}function p(l){d.push(l)}function v(){return window.devicePixelRatio}function u(){return Math.ceil(v())}n.b=p,n.a=u;var f=void 0,d=[];(function(){window.matchMedia&&(f=window.matchMedia("only screen and (-webkit-min-device-pixel-ratio:1.3),only screen and (-o-min-device-pixel-ratio:13/10),only screen and (min-resolution:120dpi)"),f.addListener(o))})()},function(i,n,r){function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var p=function(){function u(f,d){for(var l=0;l<d.length;l++){var P=d[l];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(f,P.key,P)}}return function(f,d,l){return d&&u(f.prototype,d),l&&u(f,l),f}}(),v=function(){function u(f){var d=this;o(this,u),this._k=[],this._v=[],f&&f._k.forEach(function(l){d.set(l,f.get(l))})}return p(u,[{key:"_indexOfKey",value:function(f){return this._k.indexOf(f)}},{key:"get",value:function(f){var d=this._indexOfKey(f);return d===-1?void 0:this._v[d]}},{key:"set",value:function(f,d){var l=this._indexOfKey(f);return l===-1&&(l=this._k.push(f)-1),this._v[l]=d,this}},{key:"delete",value:function(f){var d=this._indexOfKey(f);return d!==-1&&(this._k.splice(d,1),this._v.splice(d,1),!0)}},{key:"clear",value:function(){this._k.length>0&&(this._k.length=0,this._v.length=0)}}]),u}();n.a=v},function(i,n,r){function o(f){if(f===null)return"_null";if(f===void 0)return"_undefined";if(f.hasOwnProperty("_LPKGUID"))return f._LPKGUID;var d=f===void 0?"undefined":p(f);switch(d){case"number":Object.is(f,-0)&&(f="-0");case"string":case"boolean":return d+f;case"object":case"function":u++;var l=d+u;return v.value=l,Object.defineProperty(f,"_LPKGUID",v),l;default:throw"unrecognized object type"}}n.a=o;var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},v={value:"",enumerable:!1,writable:!1,configurable:!1},u=0},function(i,n,r){function o(u){return r(p(u))}function p(u){var f=v[u];if(!(f+1))throw new Error("Cannot find module '"+u+"'.");return f}var v={"./en-us.lproj/strings.json":22};o.keys=function(){return Object.keys(v)},o.resolve=p,i.exports=o,o.id=21},function(i,n){i.exports={"VideoEffects.Badge":"Badge","VideoEffects.Badge.Title.Loop":"Loop","VideoEffects.Badge.Title.Bounce":"Bounce","VideoEffects.Badge.Title.LongExposure":"Long Exposure"}},function(i,n,r){var o=r(28),p=r(32),v=r(34),u=r(37),f=r(35),d=r(4),l=r(0),P=r(8),_=r(5),a=r(1);v.a.register(),u.a.register(),f.a.register();var s=P.a.extend({approach:"",autoplay:!0,caption:"",_hasInitialized:!1,_lastRecipe:null,recipe:l.a.observableProperty({get:function(){var c=d.a.getRecipeFromPlaybackStyle(this.playbackStyle);return this._setRecipe(c),c},set:function(c){this._setRecipe(c)}}),_setRecipe:function(c){c&&c!==this._lastRecipe&&(this._lastRecipe=c,this.setUpRenderLayers())},requestMoreCompatibleRecipe:function(){this.recipe=this.recipe.requestMoreCompatibleRecipe()},duration:l.a.observableProperty({dependencies:["recipe","provider.videoDuration","provider.photoTime"],get:function(c){var m=this.recipe,h=this.provider,g=h.photoTime,y=h.videoDuration;return m?m.calculateAnimationDuration(c,y,g):0}}),displayWidth:0,displayHeight:0,get backingWidth(){return Math.round(this.displayWidth*devicePixelRatio)},get backingHeight(){return Math.round(this.displayHeight*devicePixelRatio)},get renderLayerWidth(){return this.displayWidth},get renderLayerHeight(){return this.displayHeight},get videoWidth(){return this.videoDecoder.videoWidth},get videoHeight(){return this.videoDecoder.videoHeight},photoWidth:l.a.proxyProperty("photo.width"),photoHeight:l.a.proxyProperty("photo.height"),photo:l.a.proxyProperty("provider.photo"),video:l.a.proxyProperty("provider.video"),photoTime:l.a.proxyProperty("provider.photoTime"),frameTimes:l.a.proxyProperty("provider.frameTimes"),effectType:l.a.proxyProperty("provider.effectType"),preloadedEffectType:l.a.proxyProperty("provider.preloadedEffectType"),playbackStyle:l.a.proxyProperty("provider.playbackStyle"),currentTime:l.a.observableProperty({defaultValue:0,dependencies:["duration"],get:function(c){return Math.min(this.duration||0,Math.max(0,c||0))},didChange:function(c){this.prepareToRenderAtTime(c)}}),canRenderCurrentTime:l.a.observableProperty({readOnly:!0,dependencies:["currentTime"],get:function(){return this.canRenderAtTime(this.currentTime)}}),_currentTimeRenderObserver:l.a.observer("currentTime","canRenderCurrentTime",function(c,m){m&&(this.renderedTime=c)}),renderedTime:l.a.observableProperty({defaultValue:0,didChange:function(c){this.renderAtTime(c),this.currentTime=c}}),areAllRenderLayersPrepared:l.a.observableProperty({defaultValue:!1}),isFullyPreparedForPlayback:l.a.observableProperty({readOnly:!0,dependencies:["video","areAllRenderLayersPrepared","photoTime","frameTimes","playbackStyle"],get:function(){return!!(this.video&&this.areAllRenderLayersPrepared&&(this.photoTime||this.playbackStyle!==a.a.HINT)&&Array.isArray(this.frameTimes))}}),cannotRenderDueToMissingPhotoTimeOrFrameTimes:l.a.observableProperty({readOnly:!0,dependencies:["video","areAllRenderLayersPrepared","photoTime","frameTimes","playbackStyle"],get:function(){return!!(this.video&&this.areAllRenderLayersPrepared&&(!this.photoTime&&this.playbackStyle===a.a.HINT||!Array.isArray(this.frameTimes)))}}),renderLayers:l.a.property(function(){return[]}),videoDecoder:l.a.observableProperty(function(){return this._videoDecoderClass.create({owner:this})}),_videoDecoderClass:o.a.extend({owner:l.a.observableProperty(),provider:l.a.proxyProperty("owner.provider")}),provider:l.a.observableProperty(function(){return p.a.create()}),init:function(){this._super(),this.element.className=((this.element.className||"")+" lpk-live-photo-renderer").trim(),this.element.style.position="absolute",this.element.style.overflow="hidden",this.element.style.textAlign="left"},updateSize:function(c,m){if(!arguments.length)return void(this.displayWidth&&this.displayHeight&&this.updateSize(this.displayWidth,this.displayHeight));this.displayWidth=c=Math.round(c),this.displayHeight=m=Math.round(m),this.element.style.width=c+"px",this.element.style.height=m+"px";for(var h,g=0;h=this.renderLayers[g];g++)h.updateSize(this.renderLayerWidth,this.renderLayerHeight)},_imageOrVideoDidEnterOrLeave:l.a.observer("videoDecoder.canProvideFrames","photo",function(){this.prepareToRenderAtTime(this.currentTime)}),prepareToRenderAtTime:l.a.boundFunction(function(c){this.propertyChanged("canRenderCurrentTime");for(var m,h=!0,g=0;m=this.renderLayers[g];g++)h=m.prepareToRenderAtTime(c)&&h;this.areAllRenderLayersPrepared=h}),canRenderAtTime:function(c){if(c===0)return!0;if(!this.duration&&c)return!1;for(var m,h=!0,g="",y=0;m=this.renderLayers[y];y++)m.canRenderAtTime(c)||(h=!1,g+=(g?", ":"Cannot render; waiting for ")+m.layerName);return g&&_.a.log(g+"."),h},renderAtTime:function(c){if(this.duration)for(var m,h=0;m=this.renderLayers[h];h++)m.renderAtTime(c)},getNewRenderLayers:function(){return this.recipe.getRenderLayers(this)},setUpRenderLayers:function(){var c=this.renderLayers;c&&this._cleanUpRenderLayers(c),this.renderLayers=this.getNewRenderLayers(),this.updateSize(),this.currentTime=0,this.prepareToRenderAtTime(0)},_cleanUpRenderLayers:function(c){for(var m,h=0;m=c[h];h++)m.dispose(),m.tearDownFromRender()},reduceMemoryFootprint:function(){for(var c,m=0;c=this.renderLayers[m];m++)c.reduceMemoryFootprint()},_clearRetainedFramesWhenNecessary:l.a.observer("provider.videoRotation","provider.frameTimes",function(){this.reduceMemoryFootprint(),this.prepareToRenderAtTime(this.currentTime)})});n.a=s},function(i,n,r){var o=r(23),p=o.a.extend({approach:"dom"});n.a=p},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(14),p=r(9),v=r(10),u=r(11);r.d(n,"augmentElementAsPlayer",function(){return u.a}),r.d(n,"createPlayer",function(){return u.b}),r.d(n,"Player",function(){return u.c});var f=r(6);r.d(n,"Errors",function(){return f.a});var d=r(15);r.d(n,"LivePhotoBadge",function(){return d.a});var l=r(1);r.d(n,"PlaybackStyle",function(){return l.a}),r.d(n,"Localization",function(){return P}),r.d(n,"BUILD_NUMBER",function(){return _}),r.d(n,"MASTERING_NUMBER",function(){return a}),r.d(n,"VERSION",function(){return s}),r.d(n,"LIVEPHOTOSKIT_LOADED",function(){return c});var P={get locale(){return v.a.locale},set locale(b){v.a.locale=b}},_=o.a.BUILD_NUMBER,a=o.a.MASTERING_NUMBER,s=o.a.VERSION,c=o.a.LIVEPHOTOSKIT_LOADED,m=typeof window<"u"&&typeof document<"u";if(m){var h=window.document;if(setTimeout(function(){return h.dispatchEvent(r.i(p.a)())}),h.styleSheets&&document.head){for(var g=null,y=null,x=0;x<h.styleSheets.length;++x)try{var T=h.styleSheets[x];if(T.cssRules)for(var w=0;w<T.cssRules.length;++w){var D=T.cssRules[w];if(D.cssText.indexOf(".lpk-live-photo-player")!==-1){g=D;break}}if(g){y=T;break}}catch(b){if(b.name!=="SecurityError"&&b.message.substring(0,17)!=="Access is denied."&&b.message.substring(0,17)!=="Member not found.")throw b}if(!y){var j=document.createElement("style");j.type="text/css",document.head.appendChild(j),y=j.sheet}var F="user-select: none;-khtml-user-select: none; -moz-user-select: none;-ms-user-select: none;-webkit-touch-callout: none; -webkit-user-select: none;";y.addRule?y.addRule(".lpk-live-photo-player",F):y.insertRule&&y.insertRule(".lpk-live-photo-player {"+F+"}",0)}}if(m&&document.querySelectorAll instanceof Function){var I=function(){O=!0,Array.prototype.forEach.call(document.querySelectorAll("[data-live-photo]"),function(b){return r.i(u.a)(b)})},Y=function(){!O&&J&&re&&I()},J=/interactive|complete|loaded/.test(document.readyState),re=!!window.LivePhotosKit,O=!1;J||document.addEventListener("DOMContentLoaded",function(){J=!0,Y()}),re||document.addEventListener("livephotoskitloaded",function(){re=!0,Y()}),Y()}},function(i,n,r){var o=r(8),p=r(18),v=r(15);r.d(n,"a",function(){return u});var u=o.a.extend({badgeView:null,init:function(){var f=this;this._super(),this._createBadgeView(),p.b(function(){return f.badgeView.redraw()})},_createBadgeView:function(){this.badgeView=new v.a,this.element.appendChild(this.badgeView.element);var f=this.badgeView.element.style;f.top="10px",f.left="10px",f.position="absolute",f.zIndex=4},updateToRendererLayout:function(f,d,l,P){var _=this.badgeView,a=_.element.style;a.left=f+10+"px",a.top=d+10+"px",a.right=""},redraw:function(){this.badgeView.redraw()}})},function(i,n,r){function o(m){if(Array.isArray(m)){for(var h=0,g=Array(m.length);h<m.length;h++)g[h]=m[h];return g}return Array.from(m)}function p(m){if(!m)return!1;try{m.appendChild(c),m.removeChild(c)}catch{return!1}return!0}var v=r(8),u=r(24),f=r(26),d=r(54),l=r(0),P=r(9),_=r(53),a=r(1),s=v.a.extend({staticMembers:{activeInstance:l.a.observableProperty(null)},renderer:l.a.observableProperty(function(){return u.a.create()}),showsNativeControls:l.a.observableProperty(!0),isPlaying:l.a.observableProperty(!1),wantsToPlay:l.a.observableProperty({defaultValue:!1,didChange:function(m){m&&(this.constructor.activeInstance=this)}}),canPlay:l.a.observableProperty({readOnly:!0,dependencies:["isPlaying","renderer.isFullyPreparedForPlayback"],get:function(){return this.isPlaying||this.renderer.isFullyPreparedForPlayback},didChange:function(m){m&&(this._hasHadCanPlay=!0,this.dispatchEvent(r.i(P.b)()),this.wantsToPlay&&this.play())}}),_generateErrorIfPlayedWithoutNecessaryMetadata:l.a.observer("renderer.cannotRenderDueToMissingPhotoTimeOrFrameTimes","wantsToPlay",function(m){m&&this.wantsToPlay&&(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=new Error("The `photoTime` and/or `frameTimes` values are missing. Provide them directly (or via `metadataVideoSrc`) if they cannot be parsed from the video.")),m||(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=null)}),_cannotRenderDueToMissingPhotoTimeOrFrameTimesError:l.a.observableProperty(),_playerErrors:l.a.observableProperty({readOnly:!0,dependencies:["_cannotRenderDueToMissingPhotoTimeOrFrameTimesError"],get:function(){var m=this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError;return m?[m]:null}}),_captionChanged:l.a.observer("caption",function(m){var h="";m&&(h=": "+m),this.element.setAttribute("aria-label","Live Photo"+h)}),_effectTypeChanged:l.a.observer("effectType",function(m){this.badgeView&&m&&this.updateBadgeText()}),errors:l.a.observableProperty({readOnly:!0,dependencies:["provider.errors","_playerErrors"],get:function(){var m=this.provider.errors,h=this._playerErrors,g=[];return m&&m.length&&g.push.apply(g,o(m)),h&&h.length&&g.push.apply(g,o(h)),g}}),lastError:l.a.observableProperty({dependencies:["provider.lastError"],get:function(m){return m||this.provider.lastError||null},didChange:function(m){m&&(this.throwError(m),this.stop())}}),playbackRate:l.a.proxyProperty("renderer.videoDecoder.playbackRate"),currentTime:l.a.proxyProperty("renderer.currentTime"),renderedTime:l.a.proxyProperty("renderer.renderedTime"),duration:l.a.proxyProperty("renderer.duration"),videoWidth:l.a.proxyProperty("renderer.videoWidth"),videoHeight:l.a.proxyProperty("renderer.videoHeight"),photoWidth:l.a.proxyProperty("renderer.photoWidth"),photoHeight:l.a.proxyProperty("renderer.photoHeight"),recipe:l.a.proxyProperty("renderer.recipe"),requiresInterpolation:l.a.proxyProperty("renderer.recipe.requiresInterpolation"),effectType:l.a.proxyProperty("provider.effectType"),preloadedEffectType:l.a.proxyProperty("renderer.preloadedEffectType"),playbackStyle:l.a.proxyProperty("renderer.playbackStyle"),provider:l.a.proxyProperty("renderer.provider"),proactivelyLoadsVideo:l.a.proxyProperty("provider.proactivelyLoadsVideo"),metadataVideoSrc:l.a.proxyProperty("provider.metadataVideoSrc"),photoMimeType:l.a.proxyProperty("provider.photoMimeType"),photoSrc:l.a.proxyProperty("provider.photoSrc"),photo:l.a.proxyProperty("provider.photo"),videoMimeType:l.a.proxyProperty("provider.videoMimeType"),videoSrc:l.a.proxyProperty("provider.videoSrc"),video:l.a.proxyProperty("provider.video"),photoTime:l.a.proxyProperty("provider.photoTime"),frameTimes:l.a.proxyProperty("provider.frameTimes"),videoRotation:l.a.proxyProperty("provider.videoRotation"),loadProgress:l.a.proxyProperty("provider.progress"),autoplay:l.a.proxyProperty("renderer.autoplay"),caption:l.a.proxyProperty("renderer.caption"),_isZeroSizeWarningLogged:l.a.observableProperty(!1),_renderWhenPossible:l.a.observer("renderer.video","renderer.photo",function(){if(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=null,this.updateSize(!0),!this._isZeroSizeWarningLogged){var m=this.element.getBoundingClientRect();m.width!==0&&m.height!==0||(console.warn("The LivePhotosKit Player located at position ("+m.left+", "+m.top+") in the viewport has either a zero width or zero height (or both) and will not render. To fix this, ensure that the Player has a style that will yield a non-zero width and height."),this._isZeroSizeWarningLogged=!0)}}),attachBadgeView:function(m){var h=this;this.badgeView=m,this.updateBadgeText(),m.configurePlayAction(function(){return h.play()}),m.configureStopAction(function(){return h.beginFinishingPlaybackEarly()})},updateBadgeText:function(){this.badgeView.updateBadgeText(this.effectType)},nativeControls:l.a.observableProperty({readOnly:!0,dependencies:["showsNativeControls"],get:function(){var m=this;return this.showsNativeControls?this._nativeControls_cachedValue||(this._nativeControls_cachedValue=f.a.extend({owner:l.a.observableProperty(this),_slurpProgress:l.a.observer("owner.provider.progress",function(h){this.badgeView&&(this.badgeView.progress=h)}),_slurpError:l.a.observer("owner.errors",function(h){this.badgeView&&(this.badgeView.shouldShowError=!!h&&h.length>0)}),init:function(){this._super.apply(this,arguments),m.attachBadgeView(this.badgeView)}}).create()):null},didChange:function(m){this._nativeControls_previousValue&&this._nativeControls_previousValue.detach(),this._nativeControls_previousValue=m,m&&m.attachInto(this)}}),init:function(m,h){var g=this;if(m&&!p(m))throw"Any pre-existing element provided for use as a LivePhotosKit.Player must be able to append child DOM nodes.";m&&m.childNodes.length&&(m.innerHTML="");for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(this[y]=h[y]);switch(this._super(m),this.element.className.indexOf("lpk-live-photo-player")<0&&(this.element.className=this.element.className+" lpk-live-photo-player"),this.element.setAttribute("role","image"),r.i(_.a)(this.element,"position")||this.element.style.position){case"absolute":case"fixed":case"relative":break;default:this.element.style.position="relative"}switch(r.i(_.a)(this.element,"display")||this.element.style.display){case"block":case"inline-block":case"table":case"table-caption":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row-group":case"table-cell":case"table-column":case"table-row":break;default:this.element.style.display="inline-block"}this.renderer.attachInto(this),this.renderer.eventDispatchingElement=this.element,window.addEventListener("resize",this.updateSize),"ontouchstart"in document.documentElement&&(this.addEventListener("touchstart",function(){return g.play()},!1),this.addEventListener("touchend",function(){return g.beginFinishingPlaybackEarly()},!1))},play:function(){if(!this.isPlaying){var m=this.provider;m.video||(m.needsLoadedVideoForPlayback=!0),this.wantsToPlay=!0,this.canPlay&&(this.isPlaying=!0,this._lastFrameNow=Date.now(),this._nextFrame())}return this.isPlaying},pause:function(){this.isPlaying=!1,this.wantsToPlay=!1,this._cancelNextFrame()},stop:function(){this.pause(),this.currentTime=0,this.renderer.duration=NaN},toggle:function(){this.wantsToPlay?this.pause():this.play()},beginFinishingPlaybackEarly:function(){this.recipe.beginFinishingPlaybackEarly(this)},_stopWhenAnotherPlayerStarts:l.a.observer("_constructor.activeInstance",function(m){m&&m!==this&&(this.stop(),this.renderer.reduceMemoryFootprint())}),_constructor:l.a.observableProperty(function(){return s}),_stopPlaybackWhenItemsLoadOrUnload:l.a.observer("video","photo",function(){!this.isPlaying||this.playbackStyle===a.a.LOOP&&this.autoplay||this.stop()}),addEventListener:function(m,h,g){var y=this.element;y.addEventListener.call(y,m,h,g)},removeEventListener:function(m,h,g){var y=this.element;y.removeEventListener.call(y,m,h,g)},_nextFrame:function(){var m=Date.now(),h=(m-this._lastFrameNow)*this.playbackRate;this._lastFrameNow=m,this.currentTime===this.renderedTime&&(this.currentTime+=h/1e3),this.recipe&&this.recipe.continuePlayback(this)},_cancelNextFrame:function(){cancelAnimationFrame(this._rafID)},updateSize:l.a.boundFunction(function(m,h){if(this.photoWidth&&this.photoHeight){var g=m===!0?void 0:m,y=m===!0?m:void 0;if(isNaN(g)||isNaN(h)?(g=this.element.offsetWidth,h=this.element.offsetHeight):(g=Math.round(g),h=Math.round(h),this.element.style.width=g+"px",this.element.style.height=h+"px"),g&&h){if(this._lastUpdateChangeToken===(this._lastUpdateChangeToken=g+":"+h)&&!y)return!1;var x=r.i(d.a)(this.photoWidth,this.photoHeight,g,h),T=Math.ceil(x.height),w=Math.ceil(x.width),D=Math.floor(g/2-w/2),j=Math.round(h/2-T/2),F=this.renderer;F.element.style.top=j+"px",F.element.style.left=D+"px",F.updateSize(w,T),this.displayWidth=g,this.displayHeight=h,this.nativeControls&&this.nativeControls.updateToRendererLayout(D,j,w,T)}}}),_dispatchPhotoLoadEventOnNewPhoto:l.a.observer("photo",function(m){m&&this.dispatchEvent(r.i(P.c)())}),_dispatchVideoLoadEventOnNewVideo:l.a.observer("video",function(m){m&&this.dispatchEvent(r.i(P.d)())}),throwError:function(m){this.dispatchEvent(r.i(P.e)({error:m,errorCode:m.errCode}))}}),c=document.createElement("div");n.a=s},function(i,n,r){function o(){c=!1}function p(){}function v(h,g){return-(h.importance-g.importance)||h.number-g.number}function u(h,g){for(var y=0,x=h.length,T=0;T<x-y;T++)if(h[T]===g&&(y++,T--),y){var w=T+1;h[w]=h[w+y]}return h.length-=y,h}var f=r(52),d=r(29),l=r(0),P=r(17),_=r(2),a=location.href.indexOf("_lpk_play_to_decode=true")!==-1||location.href.indexOf("_lpk_play_to_decode=false")===-1&&!_.a.isSafari&&!_.a.isIOS,s=location.href.indexOf("_lpk_persistent_frames=true")!==-1||(location.href.indexOf("_lpk_persistent_frames=false"),!1),c=!0,m=l.a.Object.extend({id:l.a.property(function(){return r.i(f.a)()}),provider:l.a.observableProperty(),video:l.a.proxyProperty("provider.video"),duration:l.a.proxyProperty("provider.videoDuration"),videoRotation:l.a.proxyProperty("provider.videoRotation"),frameTimes:l.a.proxyProperty("provider.frameTimes"),requiresInterpolation:l.a.proxyProperty("renderer.recipe.requiresInterpolation"),get frameCount(){var h=this.frameTimes;return h?h.length:0},shouldPrepareToSeek:!1,canProvideFrames:l.a.observableProperty({readOnly:!0,dependencies:["video"],get:function(){return!!this.video}}),videoWidth:l.a.observableProperty({readOnly:!0,dependencies:["video","videoRotation"],get:function(){var h=this.video;if(h)return this.videoRotation%180==0?h.videoWidth:h.videoHeight}}),videoHeight:l.a.observableProperty({readOnly:!0,dependencies:["video","videoRotation"],get:function(){var h=this.video;if(h)return this.videoRotation%180==0?h.videoHeight:h.videoWidth}}),playbackRate:l.a.observableProperty(1),_sendPlaybackRateToVideo:l.a.observer("playbackRate","video",function(h,g){g&&(g.playbackRate=h)}),_pendingFrames:l.a.property(function(){return[]}),init:function(){this._largeCanvas=document.createElement("canvas"),this._largeContext=this._largeCanvas.getContext("2d"),this._super.apply(this,arguments)},_handleVideoChange:l.a.observer("video",function(){var h=this.video,g=this._lastVideo;if(this._lastVideo=h,h!==g&&(g&&this.cleanUpOldVideo(g),h&&this.setUpNewVideo(h),h&&s))for(var y=P.a?1:0;this.frameTimes&&y<this.frameTimes.length;y++)this.getFrame(y).retain()}),setUpNewVideo:function(h){h.addEventListener("seeked",this._seeked),h.muted=!0},cleanUpOldVideo:function(h){h.removeEventListener("seeked",this._seeked),h.playbackRate=1,h.muted=!1,h.pause(),this._stopSeekingEntirely()},fractionalIndexForTime:function(h){if(h=Math.min(this.duration,Math.max(0,h)),isNaN(h))return h;var g=this.frameTimes,y=g.length,x=void 0;for(x=0;x<y&&g[x]<h;x++);x&&x--;var T=g[x],w=g[x+1];return w?x+Math.min(1,(h-T)/(w-T)):x},timeForFractionalIndex:function(h){if(h<=0)return 0;if(h>=this.frameTimes.length)return this.duration;var g=0|h,y=Math.ceil(h);if(g===y)return this.frameTimes[g];var x=this.frameTimes[g],T=y<this.frameTimes.length?this.frameTimes[y]:this.duration;return T?x+(h-g)*(T-x):x},getFrame:function(h,g){if(!this.frameTimes)throw"Attempted to get frame before ready.";if(isNaN(this.frameTimes[h]))throw"Frame number "+h+" is is not a frame in the video.";var y=d.a.getCached(this,h);return isNaN(g)||(y.importance=Math.max(y.importance,g)),y.readyState||(this._pendingFrames.push(y),this._pendingFrames.sort(v),y.didPend(),this._isSeeking||this._scheduleArtificialSeek()),y},peekFrame:function(h){var g=d.a.peekCached(this,h);return g&&g.readyState===2&&!g.lacksOwnPixelData?g:null},getNearestDecodedFrame:function(h){for(var g=Math.max(h,this.frameTimes.length-1-h),y=-1;++y<=g;){var x=this.peekFrame(h+y)||this.peekFrame(h-y);if(x)return x}return null},_scheduleArtificialSeek:function(){this._artificialSeekTimeout||(this._artificialSeekTimeout=setTimeout(this._seeked),this._artificialSeekRAFId=requestAnimationFrame(this._seeked))},_unscheduleArtificialSeek:function(){this._artificialSeekTimeout&&(clearTimeout(this._artificialSeekTimeout),this._artificialSeekTimeout=null,cancelAnimationFrame(this._artificialSeekRAFId),this._artificialSeekRAFId=null)},_stopSeekingEntirely:function(){this._unscheduleArtificialSeek(),this._isPlaying=!1,this._isSeeking=!1,this._expectedNextSeenFrameNumber=NaN,this.video&&this.video.pause()},_seeked:l.a.boundFunction(function(h){var g=this._pendingFrames;if((g.length!==0||this.requiresInterpolation)&&!(h instanceof Event&&h.target!==this.video)&&(h instanceof Event||this.video)){this._unscheduleArtificialSeek(),this._isSeeking=!1;var y=this.fractionalIndexForTime(this.video.currentTime);y|=0;for(var x,T=NaN,w=0;x=g[w];w++)if(x.number===y){T=y,x.didDecode(),this._removePendingFrame(x);break}var D=this._expectedNextSeenFrameNumber;if(this._expectedNextSeenFrameNumber=NaN,D<T)for(var j,F=0;j=g[F];F++)j.number>=D&&j.number<T&&(j.didGetSkipped(),this._removePendingFrame(j),F--);var I=g[0];if(!I)return this._isPlaying&&this.requiresInterpolation&&(this._isPlaying=!1,this.video.pause()),void(this._expectedNextSeenFrameNumber=NaN);var Y=I.number>y&&I.number<=y+2&&c;if(a||(Y=!1),Y){if(!this._isPlaying){this._isPlaying=!0;try{var J=this.video.play();J&&J.then instanceof Function&&J.then(p,o)}catch{c=!1}}this._expectedNextSeenFrameNumber=I.number,this._scheduleArtificialSeek()}else this._isPlaying&&(this._isPlaying=!1,this.video.pause()),this._expectedNextSeenFrameNumber=NaN,this.video.currentTime=I.time+1e-4,this._isSeeking=!0}}),_frameWillDispose:function(h){this._removePendingFrame(h)},_removePendingFrame:function(h){u(this._pendingFrames,h),this._pendingFrames.length||this._unscheduleArtificialSeek()}});n.a=m},function(i,n,r){function o(s){s.container=document.createElement("div"),s.container.frame=s,s.container.innerHTML='<div style="position:absolute; left:0; right:0; top:0; bottom:0; text-align:center; line-height:30px; color:white; text-shadow: black 0px 0px 4px,black 0px 0px 4px,black 0px 0px 4px,black 0px 0px 4px; font-family:HelveticaNeue-Light;"></div>',s.textBox=s.container.lastChild,s.container.insertBefore(s.image,s.textBox),s.image.style.position="absolute",s.container.style.cssText="position:relative; display:inline-block; border: 1px solid black;";var c=s._debug_aspect||(s._debug_aspect=s.videoDecoder&&(s.videoDecoder.videoWidth>s.videoDecoder.videoHeight?"landscape":"portrait"));s.container.style.width=s.image.style.width=c==="landscape"?"40px":"30px",s.container.style.height=s.image.style.height=c==="landscape"?"30px":"40px",document.body.appendChild(s.container)}var p=r(12),v=r(48),u=r(5),f=r(0),d=r(46),l=r(2);r.d(n,"a",function(){return P});var P=f.a.Object.extend(d.a,v.a,{staticMembers:{getPoolingCacheKey:function(s,c){return"f"+c+"_in_"+s.id}},container:null,image:null,_context:null,number:-1,time:-1,importance:0,videoDecoder:null,readyState:0,_poolingCacheKey:null,_debugShowInDOM:p.a,lacksOwnPixelData:!1,_postDispose:function(){this.image.width=this.image.height=0},get backingFrame(){return this.lacksOwnPixelData?this.videoDecoder.getNearestDecodedFrame(this.number)||this:this},init:function(){this._postDispose=this._postDispose.bind(this);var s=this.image=document.createElement("canvas");this._context=this.image.getContext("2d"),this._super(),this._debugShowInDOM?o(this):a&&(a.appendChild(s),s.style.cssText="position: absolute; top: 0px; width:1px; height: 1px; display: inline-block;",s.style.left=_+++"px")},initFromPool:function(s,c){clearTimeout(this._postDisposalTimeout),this.videoDecoder=s,this.number=c,this.time=s.frameTimes[c],this._debugShowInDOM&&(this.textBox.innerHTML=this.number)},dispose:function(){this.resetReadiness(),this.videoDecoder._frameWillDispose(this),this.number=this.time=-1,this.importance=0,this.videoDecoder=null,this.readyState=0,this.lacksOwnPixelData=!1,this._postDisposalTimeout=setTimeout(this._postDispose,3e3),this.constructor._disposeInstance(this),this._debugShowInDOM&&(this.textBox.innerHTML="x",this.textBox.style.color="#FF0000",this._context.clearRect(0,0,this.image.width,this.image.height))},didPend:function(){this.readyState=1,this._debugShowInDOM&&(this.textBox.style.color="#FF8800")},didDecode:function(){this.obtainPixelData(),this.readyState=2,this.resolveReadiness(this),this._debugShowInDOM&&(this.textBox.style.color="#00FF00")},obtainPixelData:function(){var s=this.image,c=this._context,m=this.videoDecoder,h=m.videoRotation,g=m.videoWidth,y=m.videoHeight,x=h%180==0?g:y,T=h%180==0?y:g;s.width===g&&s.height===y||(s.width=g,s.height=y),l.a.isFirefox&&c.getImageData(0,0,1,1);for(var w=0;w<h;w+=90)c.translate(w%180?y:g,0),c.rotate(Math.PI/2);c.drawImage(m.video,0,0,x,T),c.setTransform(1,0,0,1,0,0)},didGetSkipped:function(){u.a.log("    Skipped decoding frame "+this.number+". Using nearest frame instead."),this.lacksOwnPixelData=!0,this.readyState=2,this.resolveReadiness(this),this._debugShowInDOM&&(this._context.fillStyle="red",this._context.fillRect(0,0,this.image.width,this.image.height),this.textBox.style.color="#00FF00")}}),_=0,a=function(){if(!l.a.isIE&&!l.a.isEdge)return null;var s=document.createElement("div");return s.style.cssText="top: 0px; left: 0px; width: 50px; height: 1px; overflow: hidden; position: absolute; z-index: 100000; opacity: 0.001; pointer-events: none;",document.body?document.body.appendChild(s):setTimeout(function(){return document.body.appendChild(s)},0),s}()},function(i,n,r){var o=r(0),p=o.a.Object.extend({state:o.a.observableProperty("unloaded"),validateResult:function(v){return!!v},loadSrc:function(v){},abortCurrentLoad:function(){},isSrcLoadAllowed:o.a.observableProperty(!0),_loadSrcOnceAllowed:o.a.observer("isSrcLoadAllowed",function(v){if(v&&this.state==="unloaded"){var u=this.src;u&&(this.state="loading",this.loadSrc(u))}}),src:o.a.observableProperty({didChange:function(v){this._isWritingSrcDueToWritingOfResult||(this._isWritingResultDueToWritingOfSrc=!0,this.result=null,this._isWritingResultDueToWritingOfSrc=!1,this.abortCurrentLoad(),v&&this.isSrcLoadAllowed?(this.state="loading",this.loadSrc(v)):this.state="unloaded")}}),result:o.a.observableProperty({decideRequiresUpdate:function(){return!0},didChange:function(v){if(!this._isWritingResultDueToWritingOfSrc){var u=this.validateResult(v)?"loaded":v||this._isWritingResultDueToError?"errored":"unloaded";this._isWritingResultDueToLoadOfSrc||this._isWritingResultDueToError||(this._isWritingSrcDueToWritingOfResult=!0,this.src=null,this._isWritingSrcDueToWritingOfResult=!1,this.abortCurrentLoad(),this.state="unloaded"),this.state=u}}}),error:o.a.observableProperty(null),_clearErrorOnceNoLongerErrored:o.a.observer("state",function(v){v!=="errored"&&(this.error=null)}),progress:o.a.observableProperty({defaultValue:0,dependencies:["state"],get:function(v){return this.state==="loading"?Math.min(1,Math.max(0,+v||0)):this.state==="loaded"?1:0}}),_clearProgressOnceUnloaded:o.a.observer("state",function(v){v==="unloaded"&&(this.progress=0)}),loadDidFail:function(v){this.state==="loading"&&(this._isWritingResultDueToError=!0,this.result=null,this._isWritingResultDueToError=!1,this.error=v)},loadDidSucceed:function(v){this.state==="loading"&&(this._isWritingResultDueToLoadOfSrc=!0,this.result=v,this._isWritingResultDueToLoadOfSrc=!1,this.error=null)}});n.a=p},function(i,n,r){function o(_,a,s){var c=_.getContext("2d"),m=s===7||s===8?270:s===3||s===4?180:s===5||s===6?90:0,h=a.naturalWidth,g=a.naturalHeight,y=m%180==0?h:g,x=m%180==0?g:h,T=s===2||s===4?-1:1,w=s===5||s===7?-1:1;_.width===y&&_.height===x||(_.width=y,_.height=x);for(var D=0;D<m;D+=90)c.translate(D%180?x:y,0),c.rotate(Math.PI/2);c.scale(T,w),c.translate((T-1)/2*h,(w-1)/2*g),c.drawImage(a,0,0),c.setTransform(1,0,0,1,0,0)}var p=r(16),v=r(51),u=r(6),f=r(3),d=[],l={},P=p.a.extend({mimeType:"image/jpeg",beginSecondaryLoad:function(_,a){var s=r.i(v.a)(_);this._exifOrientationInLastLoadedBuffer=s.orientation||NaN,s.photosRenderEffect===3&&(this.effectType=f.a.EXPOSURE),d[0]=_,l.type=a,this._internalImage.src=this._internalImageSrc=URL.createObjectURL(new Blob(d,l)),(window.photoBuffers||(window.photoBuffers=[])).push(_)},abortCurrentSecondaryLoad:function(){this.__internalImage&&this._internalImage.removeAttribute("src"),this._internalImageSrc&&(URL.revokeObjectURL(this._internalImageSrc),this._internalImageSrc=null),this._exifOrientationInLastLoadedBuffer=null,this.effectType=null},get _internalImage(){var _=this.__internalImage;return _||(_=this.__internalImage=new Image,_.addEventListener("load",this._internalImageLoadDidSucceed.bind(this)),_.addEventListener("error",(function(a){this.loadDidFail(a)}).bind(this))),_},get _internalCanvas(){return this.__internalCanvas||(this.__internalCanvas=document.createElement("canvas"))},loadDidFail:function(_){if(_)return _.errCode=u.a.PHOTO_FAILED_TO_LOAD,this._super(_)},_internalImageLoadDidSucceed:function(){var _=this._internalImage;this._exifOrientationInLastLoadedBuffer!==1&&(o(this._internalCanvas,this._internalImage,this._exifOrientationInLastLoadedBuffer),_=this._internalCanvas),this.loadDidSucceed(_)}});n.a=P},function(i,n,r){var o=r(0),p=r(33),v=r(31),u=r(3),f=r(1),d=o.a.Object.extend({videoSrc:o.a.proxyProperty("_videoProvider.src"),videoMimeType:o.a.proxyProperty("_videoProvider.mimeType"),video:o.a.proxyProperty("_videoProvider.result"),effectType:o.a.observableProperty({dependencies:["_photoProvider.effectType","_videoProvider.effectType","preloadedEffectType"],get:function(){return this._photoProvider.effectType||this._videoProvider.effectType||this.preloadedEffectType||u.a.default},didChange:function(l){this.setPlaybackStyle(l)}}),preloadedEffectType:o.a.observableProperty({get:function(l){return l},set:function(l){return this._photoProvider.effectType=null,this._videoProvider.effectType=null,l}}),setPlaybackStyle:function(l){this.effectType=l,this.playbackStyle=u.a.toPlaybackStyle(l)},photoSrc:o.a.proxyProperty("_photoProvider.src"),photoMimeType:o.a.proxyProperty("_photoProvider.mimeType"),photo:o.a.proxyProperty("_photoProvider.result"),playbackStyle:o.a.observableProperty(f.a.default),metadataVideoSrc:o.a.proxyProperty("_metadataVideoProvider.src"),progress:o.a.observableProperty({readOnly:!0,dependencies:["_photoProvider.progress","_videoProvider.state","_videoProvider.progress","_metadataVideoProvider.state","_metadataVideoProvider.progress"],get:function(){var l=this._videoProvider,P=this._metadataVideoProvider,_=l.state,a=P.state,s=_!=="unloaded"||a!=="unloaded"?.75:0,c=s?a==="unloaded"?l.progress:(l.progress+P.progress)/2:0;return this._photoProvider.progress*(1-s)+c*s}}),photoTime:o.a.observableProperty({dependencies:["_metadataVideoProvider.photoTime","_videoProvider.photoTime"],get:function(l){return+l===l?l:this._metadataVideoProvider.photoTime||this._videoProvider.photoTime||null}}),videoRotation:o.a.observableProperty({dependencies:["_videoProvider.videoRotation"],get:function(l){if(+l===l)return l;var P=this._videoProvider.videoRotation;return+P===P?P:null},set:function(l){return 90*Math.round(l/90)%360|0}}),frameTimes:o.a.observableProperty({dependencies:["_metadataVideoProvider.frameTimes","_videoProvider.frameTimes"],get:function(l){return l||this._metadataVideoProvider.frameTimes||this._videoProvider.frameTimes},set:function(l){if(!l)return null;if(typeof l=="string"){var P=o.a.arrayPool.get();o.a.String.splitIntoArray(l,",",P),o.a.Array.mapIntoArray(P,function(h){return Number(h.trim())},P),l=P}for(var _=Array.isArray(l),a=_&&l.length>=2,s=0,c=l.length;s<c&&a;s++){var m=l[s];+m!==m&&(a=!1)}if(!a)throw new Error("If frameTimes is provided, it must be provided as an Array or comma-delimited string containing numbers.");return l}}),videoDuration:o.a.observableProperty({readOnly:!0,dependencies:["frameTimes"],get:function(){return this.frameTimes?this.frameTimes[this.frameTimes.length-1]:void 0}}),proactivelyLoadsVideo:o.a.observableProperty(!1),needsLoadedVideoForPlayback:o.a.observableProperty(!1),_reset_needsLoadedVideoForPlayback_whenAppropriate:o.a.observer("video",function(){this.needsLoadedVideoForPlayback=!1}),isVideoLoadAllowed:o.a.observableProperty({readOnly:!0,dependencies:["proactivelyLoadsVideo","needsLoadedVideoForPlayback"],get:function(){return this.proactivelyLoadsVideo||this.needsLoadedVideoForPlayback}}),errors:o.a.observableProperty({readOnly:!0,dependencies:["_videoProvider.error","_photoProvider.error"],get:function(){return[this._photoProvider.error,this._videoProvider.error].filter(function(l){return!!l})}}),lastError:o.a.observableProperty(),_lastPhotoError:o.a.observableProperty({readOnly:!0,dependencies:["_photoProvider.error"],get:function(){return this._photoProvider.error},didChange:function(l){this.lastError=l}}),_lastVideoError:o.a.observableProperty({readOnly:!0,dependencies:["_videoProvider.error"],get:function(){return this._videoProvider.error},didChange:function(l){this.lastError=l}}),_metadataVideoProvider:o.a.observableProperty(function(){return p.a.extend({requiresMimeTypeForRawArrayBufferSrc:!1,actuallyProvidesResultingVideoFromSecondaryLoad:!1}).create()}),_videoProvider:o.a.observableProperty(function(){return p.a.extend({owner:o.a.observableProperty(this),isSrcLoadAllowed:o.a.proxyProperty("owner.isVideoLoadAllowed"),exposedSrcKeyForErrorStrings:"videoSrc",exposedMimeTypeKeyForErrorStrings:"videoMimeType"}).create()}),_photoProvider:o.a.observableProperty(function(){return v.a.extend({exposedSrcKeyForErrorStrings:"photoSrc",exposedMimeTypeKeyForErrorStrings:"photoMimeType"}).create()})});n.a=d},function(i,n,r){function o(y){var x=[0,0,0,0,0,0,0,0,1];x[0]=p(y.slice(0,4),16,16),x[1]=p(y.slice(4,8),16,16),x[3]=p(y.slice(12,16),16,16),x[4]=p(y.slice(16,20),16,16);for(var T=0;T<g.length;T++)if(v(g[T],x))return 90*T;return 0}function p(y,x,T){var w=y[0]<<24|y[1]<<16|y[2]<<8|y[3];return Math.abs(w>>T)*((w&1<<x+T-1)!=0?-1:1)}function v(y,x){if(y===x)return!0;if(!y||!x)return!1;var T=y.length;if(T!==x.length)return!1;for(var w=0;w<T;w++)if(y[w]!==x[w])return!1;return!0}var u=r(16),f=r(45),d=r(0),l=r(5),P=r(6),_=r(2),a=r(3),s=[],c={},m=u.a.extend({__internalVideo:null,_internalVideoSRC:null,photoTime:d.a.observableProperty(),playbackStyle:d.a.observableProperty(null),effectType:d.a.observableProperty(null),frameTimes:d.a.observableProperty(),videoRotation:d.a.observableProperty(),actuallyProvidesResultingVideoFromSecondaryLoad:!0,_clearMetadataPropertiesOnUnload:d.a.observer("state",function(y){y!=="loaded"&&(this.photoTime=this.frameTimes=this.videoRotation=void 0)}),beginSecondaryLoad:function(y,x){this.preprocessAndAttemptToReadMetadataFromBuffer(y),this.actuallyProvidesResultingVideoFromSecondaryLoad&&(s[0]=y,c.type=x==="video/quicktime"?"video/mp4":x,x==="application/octet-stream"&&(l.a.warn('Encountered a Content-Type of "application/octet-stream" for the file obtained for `videoSrc`.Some browsers may be unable to use the video with this MIME type. If the video portion of the Player is not functioning, make sure the proper MIME type is being provided with the response,or provide the proper MIME type manually by assigning it to the `videoMimeType` property on the Player instance. For now, an attempt will be made to treat the videos bytes as "video/mp4", but playback is not guaranteed unless either of these corrective steps are taken.'),x="video/mp4"),this._internalVideo.src=this._internalVideoSRC=URL.createObjectURL(new Blob(s,c)),_.a.isIOS&&this._internalVideo.load())},abortCurrentSecondaryLoad:function(){this.__internalVideo&&(this.__internalVideo.pause(),this.__internalVideo.removeAttribute("src"),this.__internalVideo.load(),_.a.isIOS&&(this.__internalVideo=null),this._internalVideoSRC&&(URL.revokeObjectURL(this._internalVideoSRC),this._internalVideoSRC=null),this.effectType=null)},get _internalVideo(){var y=this.__internalVideo;return y||(y=this.__internalVideo=document.createElement("video"),y.addEventListener("canplay",this.loadDidSucceed.bind(this)),y.addEventListener("error",this.loadDidFail.bind(this)),y.volume=0),y},loadDidFail:function(y){if(y)return y.errCode=P.a.VIDEO_FAILED_TO_LOAD,this._super(y);var x=this.__internalVideo;return x.error.errCode=P.a.VIDEO_FAILED_TO_LOAD,x&&this._super(x.error)},loadDidSucceed:function(){var y=this.__internalVideo;return y&&this._super(y)},preprocessAndAttemptToReadMetadataFromBuffer:function(y){var x=void 0,T=void 0;try{x=new f.a(new f.b(y)),x.read()}catch{x=null}if(!x)return this.photoTime=null,this.frameTimes=null,void(this.videoRotation=0);var w=(T=x.tracks)&&(T=T.vide)&&(T=T[0])&&T.getAllSampleSeconds&&T.getAllSampleSeconds();w&&(this.frameTimes=w);var D=void 0;try{D=x.tracks.meta[0].timeToSeconds(x.tracks.meta[0].trak.edts.elst.editList[0].trackDuration)}catch{}D&&(this.photoTime=D);var j=new Uint8Array(y),F=(T=x.tracks)&&(T=T.soun)&&(T=T[0])&&(T=T.trak)&&T.offset;if(F){var I="free";j[F+4]=I.charCodeAt(0),j[F+5]=I.charCodeAt(1),j[F+6]=I.charCodeAt(2),j[F+7]=I.charCodeAt(3)}var Y=(T=x.tracks)&&(T=T.vide)&&(T=T[0])&&(T=T.trak)&&(T=T.tkhd)&&(T=T.offset)&&T+48,J=0;if(Y){for(var re=[],O=0;O<h.length;O++)re[O]=j[Y+O];if(J=o(re))for(var b=0;b<h.length;b++)j[Y+b]=h[b]}this.videoRotation=J;var S=x.metaData.keys&&x.metaData.keys.keyList.get("com.apple.photos.variation-identifier"),k=void 0;if(S>0)switch(x.metaData.values.items[S]){case 1:k=a.a.LOOP;break;case 2:k=a.a.BOUNCE;break;case 3:k=a.a.EXPOSURE}this.effectType=k}}),h=[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],g=[[1,0,0,0,1,0,0,0,1],[0,1,0,-1,0,0,0,0,1],[-1,0,0,0,-1,0,0,0,1],[0,-1,0,1,0,0,0,0,1]];n.a=m},function(i,n,r){var o=r(4),p=r(1),v=r(2),u=v.a.isSafari,f=o.a.create({correspondingPlaybackStyle:p.a.FULL,get minimumShortenedDuration(){return this.enterDuration+this.exitDuration+.01},get spontaneousFinishDuration(){return this.exitDuration},enterDuration:1/3,exitDuration:.5,videoBeginTime:.15,zoomScaleFactor:1.075,blurRadius:5,blurRadiusStep:.2,requiresInterpolation:!0,quantizeRadius:function(d){return this.blurRadiusStep?Math.round(d/this.blurRadiusStep)*this.blurRadiusStep:d},easeInOut:function(d){return d<0?0:d>1?1:.5-.5*Math.cos(d*Math.PI)},calculateAnimationDuration:function(d,l,P){var _=l?l+this.videoBeginTime+this.exitDuration:0;return Math.max(0,Math.min(d||1/0,_))},getEntranceExitParameter:function(d,l){return Math.min(Math.max(0,Math.min(1,1-this.easeInOut((d-(l-this.exitDuration))/this.exitDuration))),1-Math.max(0,Math.min(1,1-this.easeInOut(d/this.enterDuration))))||0},getTransform:function(d,l,P,_){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,m=1+(this.zoomScaleFactor-1)*this.getEntranceExitParameter(d,l),h=-(m-1)/2*P,g=-(m-1)/2*_,y=Math.round(h*devicePixelRatio)/devicePixelRatio,x=Math.round(g*devicePixelRatio)/devicePixelRatio;return Math.abs(m-a)<1e-5?"translate3d("+y+"px, "+x+"px, 0) scale3d("+s+", "+c+", 1)":h||g||m?"translate3d("+h+"px, "+g+"px, 0) scale3d("+m+", "+m+", 1)":"translate3d(0, 0, 0)"},photo:o.a.PhotoIngredient.create({opacity:o.a.computedStyle(function(d){if(d<this.recipe.enterDuration)return(1-this.recipe.easeInOut(d/this.recipe.enterDuration)).toString();if(d<this.renderer.duration-this.recipe.exitDuration)return"0";var l=this.recipe.easeInOut((d-(this.renderer.duration-this.recipe.exitDuration))/this.recipe.exitDuration);return l!==1?l:"1"}),display:o.a.computedStyle(function(d){return d>this.recipe.enterDuration&&d<this.renderer.duration-this.recipe.exitDuration?"none":""}),filter:o.a.computedStyle(function(d){if(!u)return"";var l=this.recipe,P=l.blurRadius*l.getEntranceExitParameter(d,this.renderer.duration);return P?"blur("+l.quantizeRadius(P)+"px)":""}),transform:o.a.computedStyle(function(d){return this.recipe.getTransform(d,this.renderer.duration,this.displayWidth,this.displayHeight)}),zIndex:o.a.computedStyle(function(){return 3})}),video:o.a.InterpolatedVideoIngredient.create({get backingScaleFactor(){return this.recipe.zoomScaleFactor},lookaheadTime:.01+7/15,videoTimeAtTime:function(d){var l=Math.max(0,Math.min(this.videoDuration,d-this.recipe.videoBeginTime));return Math.min(l,this.renderer.duration-this.recipe.exitDuration-this.recipe.videoBeginTime)},prepareVideoFramesFromTime:function(d){this.retainFramesForTime(d,d+this.lookaheadTime)},display:o.a.computedStyle(function(d){return d===0||d===this.renderer.duration?"none":""}),transform:o.a.computedStyle(function(d){return this.recipe.getTransform(d,this.renderer.duration,this.displayWidth,this.displayHeight,this.backingScaleFactor,this.backingScaleX,this.backingScaleY)}),zIndex:o.a.computedStyle(function(){return 1})})});n.a=f},function(i,n,r){var o=r(4),p=r(1),v=o.a.create({correspondingPlaybackStyle:p.a.HINT,minimumShortenedDuration:.9,get spontaneousFinishDuration(){return this.exitBlurDuration},exitBlurDuration:.75,bottomVideoRevealBeginTime:.1,zoomScaleFactor:1.075,blurRadius:7.5,blurRadiusStep:1,requiresInterpolation:!0,quantizeRadius:function(u){return Math.round(u/this.blurRadiusStep)*this.blurRadiusStep},tween:function(u){return u<0?0:u>1?1:.5-.5*Math.cos(u*Math.PI)},calculateAnimationDuration:function(u,f,d){var l=f?f-d+this.exitBlurDuration:0;return Math.max(0,Math.min(u||1/0,l))},photo:o.a.PhotoIngredient.create({hideDuration:.06,get returnDuration(){return this.recipe.exitBlurDuration},opacity:o.a.computedStyle(function(u){if(u<this.hideDuration)return(1-this.recipe.tween(u/this.hideDuration)).toString();if(u<this.renderer.duration-this.returnDuration)return"0";var f=this.recipe.tween((u-(this.renderer.duration-this.returnDuration))/this.returnDuration);return f!==1?f.toString():""}),display:o.a.computedStyle(function(u){return u>this.hideDuration&&u<this.renderer.duration-this.returnDuration?"none":""}),webkitFilter:o.a.computedStyle(function(u){if(u<this.renderer.duration-this.returnDuration)return"";var f=this.recipe.blurRadius*(1-this.recipe.tween((u-(this.renderer.duration-this.returnDuration))/this.returnDuration));return f?"blur("+this.recipe.quantizeRadius(f)+"px)":""}),transform:o.a.computedStyle(function(u){if(u<this.renderer.duration-this.returnDuration)return"translateZ(0)";var f=1+(this.recipe.zoomScaleFactor-1)*(1-this.recipe.tween((u-(this.renderer.duration-this.returnDuration))/this.returnDuration));return"translate3d("+-(f-1)/2*this.displayWidth+"px, "+-(f-1)/2*this.displayHeight+"px, 0) scale3d("+f+", "+f+", 1)"}),zIndex:o.a.computedStyle(function(){return 3})}),video:o.a.InterpolatedVideoIngredient.create({get backingScaleFactor(){return this.recipe.zoomScaleFactor},scaleInDuration:.15,get blurOutDuration(){return this.recipe.exitBlurDuration},lookaheadTime:.01+7/15,videoTimeAtTime:function(u){return Math.min(this.videoDuration,u+this.renderer.photoTime)},prepareVideoFramesFromTime:function(u){this.retainFramesForTime(u,u+this.lookaheadTime)},display:o.a.computedStyle(function(u){return u&&u!==this.renderer.duration?"":"none"}),transform:o.a.computedStyle(function(u){var f=1+(this.recipe.zoomScaleFactor-1)*Math.max(0,Math.min(1,1-this.recipe.tween((u-(this.renderer.duration-this.blurOutDuration))/this.blurOutDuration)-(1-this.recipe.tween(u/this.scaleInDuration)))),d=-(f-1)/2*this.displayWidth,l=-(f-1)/2*this.displayHeight,P=Math.round(d*devicePixelRatio)/devicePixelRatio,_=Math.round(l*devicePixelRatio)/devicePixelRatio;return Math.abs(f-this.backingScaleFactor)<1e-5?"translate3d("+P+"px, "+_+"px, 0) scale3d("+this.backingScaleX+", "+this.backingScaleY+", 1)":"translate3d("+d+"px, "+l+"px, 0) scale3d("+f+", "+f+", 1)"}),webkitFilter:o.a.computedStyle(function(u){var f=this.recipe.blurRadius*this.recipe.tween((u-(this.renderer.duration-this.blurOutDuration))/this.blurOutDuration);return f?"blur("+this.recipe.quantizeRadius(f)+"px)":""}),zIndex:o.a.computedStyle(function(){return 1})})});n.a=v},function(i,n,r){var o=r(4),p=r(2),v=(p.a.isSafari,o.a.create({requiresInterpolation:!0,photo:o.a.PhotoIngredient.create({display:o.a.computedStyle(function(u){return this.isPlaying||u>0?"none":""})}),video:o.a.InterpolatedVideoIngredient.create({lookaheadTime:.01+7/15,videoTimeAtTime:function(u){return u%this.renderer.duration},prepareVideoFramesFromTime:function(u){this.retainFramesForTime(u,u+this.lookaheadTime)},display:o.a.computedStyle(function(u){return""})}),beginFinishingPlaybackEarly:function(u){u.autoplay||(u.isPlaying?u.pause():u.wantsToPlay=!1)},continuePlayback:function(u){var f=u.currentTime,d=u.duration;f>=d&&(u.currentTime=f%d),u._rafID=requestAnimationFrame(u._nextFrame.bind(u))}}));n.a=v},function(i,n,r){var o=r(4),p=r(36),v=r(1);p.a.register();var u=o.a.create({correspondingPlaybackStyle:v.a.LOOP,photo:o.a.PhotoIngredient.create({display:o.a.computedStyle(function(f){return this.isPlaying||f>0?"none":""})}),video:o.a.VideoIngredient.create({display:o.a.computedStyle(function(f){return""})}),beginFinishingPlaybackEarly:function(f){f.autoplay||(f.isPlaying?f.pause():f.wantsToPlay=!1)},continuePlayback:function(f){var d=f.currentTime,l=f.duration;d>=l&&(f.currentTime=d%l),f._rafID=requestAnimationFrame(f._nextFrame.bind(f))},requestMoreCompatibleRecipe:function(f){return o.a.registerRecipeWithPlaybackStyle(p.a,this.correspondingPlaybackStyle),p.a}});n.a=u},function(i,n,r){var o=r(0),p=r(41),v=r(1),u=r(13),f=p.a.extend(u.a,{_loCanvas:null,_hiCanvas:null,backingScaleFactor:1,setUpForRender:function(){var d=this.element,l=(this.isPlaying,this.renderer),P=l.autoplay,_=l.parentView,a=l.playbackStyle,s=l.video;if(!this._loCanvas||!this._hiCanvas){d.innerHTML&&(d.innerHTML="");var c=this._loCanvas=o.a.canvasPool.get(),m=this._hiCanvas=o.a.canvasPool.get();c._context=c.getContext("2d"),m._context=m.getContext("2d"),c.style.cssText=m.style.cssText="position: absolute; left: 0; top: 0; width: 100%; height: 100%; transform: translateZ(0);",d.appendChild(c),d.appendChild(m),this._swapCanvases()}d.className="lpk-render-layer lpk-video",d.style.position="absolute",d.style.transformOrigin="0 0",d.style.zIndex=1,this._super(),a===v.a.LOOP&&(this.shouldLoop=!0),this.shouldLoop&&requestAnimationFrame(function(){s.currentTime=-1,P&&_.play()}),window.test=this},updateSize:function(d,l){if(!arguments.length)return this._super();this._super(d,l);var P=Math.ceil(d*this.backingScaleFactor),_=Math.ceil(l*this.backingScaleFactor);this.backingScaleX=P/d,this.backingScaleY=_/l,this.element.style.width=P+"px",this.element.style.height=_+"px",this._loCanvas&&this._hiCanvas&&(this._loCanvas.width=this._hiCanvas.width=P*devicePixelRatio,this._loCanvas.height=this._hiCanvas.height=_*devicePixelRatio,this._loCanvas._drawnFrameNumber=this._hiCanvas._drawnFrameNumber=-1,this.renderAtTime())},renderAtTime:function(d){if(!arguments.length)return this._super();this._super(d);var l=this.backingScaleX,P=this.backingScaleY;l===1&&P===1||(this.element.style.transform+=" scale3d("+1/l+", "+1/P+", 1)")},renderFramePair:function(d,l,P){(d&&this._hiCanvas._drawnFrameNumber===d.number||l&&this._loCanvas._drawnFrameNumber===l.number)&&this._swapCanvases(),this._putFrameInCanvasIfNeeded(d,this._loCanvas),this._putFrameInCanvasIfNeeded(l,this._hiCanvas),l&&(this._hiCanvas.style.opacity=P)},_swapCanvases:function(){var d=this._hiCanvas;this._hiCanvas=this._loCanvas,this._loCanvas=d,this._loCanvas.style.opacity="",this._loCanvas.style.zIndex=1,this._hiCanvas.style.zIndex=2},_putFrameInCanvasIfNeeded:function(d,l){l._drawnFrameNumber!==(l._drawnFrameNumber=d?d.number:-1)&&(l.setAttribute("data-frame-number",l._drawnFrameNumber.toString()),d?l._context.drawImage(d.image,0,0,l.width,l.height):l._context.clearRect(0,0,l.width,l.height))},dispose:function(){this._super(),this._loCanvas&&o.a.canvasPool.ret(this._loCanvas),this._hiCanvas&&o.a.canvasPool.ret(this._hiCanvas)},tearDownFromRender:function(){var d=this.renderer,l=d.parentView;this.shouldLoop=!1,l&&l.stop(),this._clearAllRetainedFrames(),this._super()}});n.a=f},function(i,n,r){var o=r(42),p=r(13),v=r(49),u=o.a.extend(p.a,{tagName:"canvas",get _canvas(){return this.element},get _context(){return this.__context||(this.__context=this._canvas.getContext("2d"))},init:function(){this._super.apply(this,arguments),this.element.className="lpk-render-layer lpk-photo",this.element.style.position="absolute",this.element.style.width=this.element.style.height="100%",this.element.style.transformOrigin="0 0",this.element.style.zIndex=2},tearDownFromRender:function(){this._super(),this._canvas.width=this._canvas.height=0},updateSize:function(f,d){if(!arguments.length)return this._super();this._super(f,d);var l=Math.ceil(f*devicePixelRatio),P=Math.ceil(d*devicePixelRatio),_=this.photo,a=this._canvas;this._lastPhoto===(this._lastPhoto=_)&&a.width===l&&a.height===P||(a.width=l,a.height=P,_&&r.i(v.a)(this._context,_,0,0,l,P))}});n.a=u},function(i,n,r){var o=r(0),p=r(2),v=r(13),u=r(43),f=u.a.extend(v.a,{_isPlayingChanged:o.a.observer("isPlaying",function(d){this._video&&(d?(this.duration=1/0,this.play()):this.pause())}),_isVisible:!1,applyStyles:function(){var d=this.element,l=this.video,P=this.videoRotation,_=l.videoHeight,a=l.videoWidth,s=1;[90,270].indexOf(P)>=0&&(s=a/_);var c=`
                height: 100%;
                position: absolute;
                width: 100%;
                -moz-transform: scale(`+s+") rotate("+P+`deg);
                -webkit-transform: scale(`+s+") rotate("+P+`deg);
                -o-transform: scale(`+s+") rotate("+P+`deg);
                -ms-transform: scale(`+s+") rotate("+P+`deg);
                transform: scale(`+s+") rotate("+P+`deg);
                z-index: 1;
            `;d.setAttribute("style",c),d.className="lpk-render-layer lpk-video",l.style.height="100%",l.style.width="100%"},cleanupElement:function(){var d=this.element,l=this.renderer,P=this._video,_=l.parentView;d.innerHtml&&(d.innerHtml=""),P&&(P.loop=!1,P.muted=!1,P.removeEventListener("pause",this.playIfPlaying)),_&&_.stop(),delete this._video},pause:function(){var d=this._isVisible,l=this._video;d&&l.pause()},play:function(){if(this._isVisible){var d=this._video,l=d.play();l?l.catch(this._handlePlayFailure):p.a.isIE||p.a.isEdge||(d.pause(),setTimeout(this._handlePlayFailure))}},_handlePlayFailure:o.a.boundFunction(function(){this.renderer.requestMoreCompatibleRecipe()}),playIfPlaying:o.a.boundFunction(function(){var d=this.isPlaying,l=this._video;if(d&&l.paused){var P=l.play();P&&P.catch(function(){})}}),setUpForRender:function(){var d=this.element,l=(this.isPlaying,this.renderer),P=l.autoplay,_=l.parentView,a=l.video;this.cleanupElement(),d.appendChild(a),this.applyStyles(),a.loop=!0,a.muted=!0,this._video=a,this._isVisible=!0,this._super(),P&&(a.addEventListener("pause",this.playIfPlaying),_.play())},tearDownFromRender:function(){this.cleanupElement(),this._isVisible=!1,this._super()}});n.a=f},function(i,n,r){function o(_){_.retain()}function p(_){_.release()}var v=r(0),u=r(7),f=r(17),d=u.a.extend({videoDecoder:v.a.proxyProperty("renderer.videoDecoder"),videoDuration:v.a.proxyProperty("videoDecoder.duration"),canRender:v.a.proxyProperty({readOnly:!0,proxyPath:"videoDecoder.canProvideFrames"}),init:function(){this._super.apply(this,arguments);var _=this.layerName,a=this.recipe;this._framePrepIDKey=a.name+"_"+_+"_framePrepID"},videoTimeAtTime:function(_){return _},_videoTimeAtTime:function(_){return isNaN(_)?_:this.videoTimeAtTime(_)},prepareToRenderAtTime:function(_){var a=this._currentPrepID=++l;if(!this.canRender)return!1;this.prepareVideoFramesFromTime(_);for(var s,c=this._retainedFrames,m=0,h=0;s=c[h];h++)s.readyState!==2&&(s[this._framePrepIDKey]=a,s.onReadyOrFail(this._frameDidPrepare),m++);return this._preppingFrameCount=m,!m},reduceMemoryFootprint:function(){this._super(),this._clearAllRetainedFrames()},_clearAllRetainedFrames:function(){this._clearExtraRetainedFrames(),this._clearRetainedInstantaneousFrames()},_clearExtraRetainedFrames:function(){var _=this._retainedFrames;_&&(_.forEach(p),_.length=0)},_clearRetainedInstantaneousFrames:function(){this._retainedLoFrame&&this._retainedLoFrame.release(),this._retainedHiFrame&&this._retainedHiFrame.release(),this._retainedLoFrame=this._retainedHiFrame=null},_frameDidPrepare:v.a.boundFunction(function(_){_[this._framePrepIDKey]===this._currentPrepID&&(_[this._framePrepIDKey]=void 0,--this._preppingFrameCount||this.renderer.prepareToRenderAtTime(this.renderer.currentTime))}),prepareVideoFramesFromTime:function(_){this.retainFramesForTime(_)},canRenderAtTime:function(_){if(this.display(_)==="none")return!0;if(!this.canRender)return!1;for(var a,s=!0,c=this.requiredFramesForTime(_),m=0;a=c[m];m++)s=s&&a.readyState===2,a.retain().release();return s},renderAtTime:function(_){if(!arguments.length)return this._super();if(this.display(_)==="none")return this._clearRetainedInstantaneousFrames(),this._super(_);var a=this._videoTimeAtTime(_),s=this.requiredFramesForVideoTime(a),c=s[0]||null,m=s[1]||null;if(c&&c.retain(),m&&m.retain(),this._clearRetainedInstantaneousFrames(),this._retainedLoFrame=c,this._retainedHiFrame=m,c&&(c=c.backingFrame),m&&(m=m.backingFrame),c&&m&&c.number>m.number){var h=c;m=c,c=h}c===m&&(m=null);var g=!c||m?this.videoDecoder.fractionalIndexForTime(a):c.frameNumber,y=g-(0|g);this.renderFramePair(c,m,y),this._super(_)},renderFramePair:function(){},requiredFramesForVideoTime:function(_,a,s){isNaN(a)&&(a=_);var c=this.videoDecoder,m=this.videoDuration,h=c.frameCount,g=P;if(g.length=0,a<0||_>m||isNaN(_)||isNaN(a))return g;var y=Math.max(0,Math.floor(c.fractionalIndexForTime(_))),x=Math.min(c.frameCount,Math.ceil(c.fractionalIndexForTime(a))),T=x<y,w=T?h-1:x;if(y===w-1){var D=c.frameTimes;D[w]-D[y]<1/30+.001&&(w=y)}for(var j=y;j<=w;j++)f.a&&j===0||(g.push(c.getFrame(j,s)),j+1===h&&T&&(j=-1,w=x));return g},requiredFramesForTime:function(_,a,s){return this.requiredFramesForVideoTime(this._videoTimeAtTime(_),this._videoTimeAtTime(a),s)},retainFramesForVideoTime:function(_,a,s){a===void 0&&(a=_);var c=this.lookaheadTime,m=this.shouldLoop,h=this.requiredFramesForVideoTime(_,a,s),g=this._retainedFrames||(this._retainedFrames=[]);h.forEach(o);for(var y=g.length-1;y>=0;y--){var x=g[y],T=x.time;(!m||T>c/2)&&(p(x),g.splice(y,1))}g.push.apply(g,h)},retainFramesForTime:function(_,a,s){return this.retainFramesForVideoTime(this._videoTimeAtTime(_),this._videoTimeAtTime(a),s)},dispose:function(){this.retainFramesForVideoTime(NaN),this._super()}}),l=1,P=[];n.a=d},function(i,n,r){var o=r(7),p=r(0),v=o.a.extend({isPlaying:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.parentView.isPlaying"}),photo:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.photo"}),canRender:p.a.proxyProperty("photo"),canRenderAtTime:function(u){var f=this.photo;return!(this.display(u)!=="none"&&(!f||f instanceof Image&&!f.complete))}});n.a=v},function(i,n,r){var o=r(7),p=r(0),v=o.a.extend({canRender:p.a.proxyProperty({readOnly:!0,proxyPath:"video"}),isPlaying:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.parentView.isPlaying"}),video:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.video"}),videoRotation:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.provider.videoRotation"})});n.a=v},function(i,n,r){function o(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function p(g){var y=r.i(u.a)(g),x=l.get(y);if(x)return x;var T=g.map(function(w){if(w[0]==="i"&&a(w[1]))return"I"+w.substring(1)});return g=g.concat(T.filter(function(w){return!!w})),x=new RegExp(g.join("|"),"g"),l.set(y,x),x}function v(g,y){var x=g.charCodeAt(0),T=y.charCodeAt(0),w=new Map;return function(D){var j=w.get(D);if(j!==void 0)return j;var F=D.charCodeAt(0);return j=F>=x&&F<=T,w.set(D,j),j}}var u=r(20),f=function(){function g(y,x){for(var T=0;T<x.length;T++){var w=x[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,x,T){return x&&g(y.prototype,x),T&&g(y,T),y}}(),d=["iOS","iPhone","iPad","iPod","WebKit"],l=new Map,P=v("0","9"),_=v("a","z"),a=v("A","Z"),s=function(g){return _(g)||a(g)},c=function(g){return s(g)||P(g)},m=new Map,h=function(){function g(){o(this,g)}return f(g,null,[{key:"splitIntoArray",value:function(y,x,T){for(var w=y.indexOf(x),D=0,j=x.length;w!==-1;)T.push(y.substring(D,w)),D=w+j,w=y.indexOf(x,D);T.push(y.substring(D))}},{key:"hyphenate",value:function(y,x,T){if(!y)return"";x||x===null||x===!1||(x=d);var w=x||T?r.i(u.a)(x)+"#"+y+"#"+!!T:y,D=m.get(w);if(D)return D;if(Array.isArray(x)){var j=g.hyphenateCarefully(y,x,T);return m.set(w,j),j}var F=y.length,I="",Y=void 0,J=void 0,re=void 0,O=void 0,b=void 0;for(Y=0;Y<F;Y++)J=y[Y-1],re=y[Y],O=re.toLowerCase(),b=y[Y+1],J&&c(re)&&c(J)&&(!a(J)&&a(re)||P(J)&&s(re)||b&&a(J)&&a(re)&&_(b))?I+="-"+O:I+=O;return m.set(w,I),I}},{key:"hyphenateCarefully",value:function(y,x,T){var w=p(x),D=y.match(w);if(!D||!D.length)return g.hyphenate(y,null,T);for(var j=y.split(w),F=g.hyphenate(j[0]),I=0,Y=D.length;I<Y;I++){var J=D[I];T||(J=J.toLowerCase());var re=j[I+1];re&&(re=g.hyphenate(re,null,T)),F+=(F&&"-")+J,re&&(F+=(s(re[0])?"-":"")+re)}return F}}]),g}();n.a=h},function(i,n,r){function o(_,a){if(!(_ instanceof a))throw new TypeError("Cannot call a class as a function")}function p(_,a){_||v(a)}function v(_){throw _}var u=r(5);r.d(n,"b",function(){return d}),r.d(n,"a",function(){return l});var f=function(){function _(a,s){for(var c=0;c<s.length;c++){var m=s[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(a,m.key,m)}}return function(a,s,c){return s&&_(a.prototype,s),c&&_(a,c),a}}(),d=(function(){function _(a,s){o(this,_),this.w=a,this.h=s}f(_,[{key:"toString",value:function(){return"("+this.w+", "+this.h+")"}},{key:"getHalfSize",value:function(){return new _(this.w>>>1,this.h>>>1)}},{key:"length",value:function(){return this.w*this.h}}])}(),function(){function _(a,s,c){o(this,_),this.bytes=new Uint8Array(a),this.start=s||0,this.pos=this.start,this.end=s+c||this.bytes.length}return f(_,[{key:"readU8Array",value:function(a){if(this.pos>this.end-a)return null;var s=this.bytes.subarray(this.pos,this.pos+a);return this.pos+=a,s}},{key:"readU32Array",value:function(a,s,c){if(s=s||1,this.pos>this.end-a*s*4)return null;if(s===1){for(var m=new Uint32Array(a),h=0;h<a;h++)m[h]=this.readU32();return m}for(var g=new Array(a),y=0;y<a;y++){var x=null;if(c){x={};for(var T=0;T<s;T++)x[c[T]]=this.readU32()}else{x=new Uint32Array(s);for(var w=0;w<s;w++)x[w]=this.readU32()}g[y]=x}return g}},{key:"read8",value:function(){return this.readU8()<<24>>24}},{key:"readU8",value:function(){return this.pos>=this.end?null:this.bytes[this.pos++]}},{key:"read16",value:function(){return this.readU16()<<16>>16}},{key:"readU16",value:function(){if(this.pos>=this.end-1)return null;var a=this.bytes[this.pos+0]<<8|this.bytes[this.pos+1];return this.pos+=2,a}},{key:"read24",value:function(){return this.readU24()<<8>>8}},{key:"readU24",value:function(){var a=this.pos,s=this.bytes;if(a>this.end-3)return null;var c=s[a+0]<<16|s[a+1]<<8|s[a+2];return this.pos+=3,c}},{key:"peek32",value:function(a){var s=this.pos,c=this.bytes;if(s>this.end-4)return null;var m=c[s+0]<<24|c[s+1]<<16|c[s+2]<<8|c[s+3];return a&&(this.pos+=4),m}},{key:"read32",value:function(){return this.peek32(!0)}},{key:"readU32",value:function(){return this.peek32(!0)>>>0}},{key:"read4CC",value:function(){var a=this.pos;if(a>this.end-4)return null;for(var s="",c=0;c<4;c++)s+=String.fromCharCode(this.bytes[a+c]);return this.pos+=4,s}},{key:"readFP16",value:function(){return this.read32()/65536}},{key:"readFP8",value:function(){return this.read16()/256}},{key:"readISO639",value:function(){for(var a=this.readU16(),s="",c=0;c<3;c++){var m=a>>>5*(2-c)&31;s+=String.fromCharCode(m+96)}return s}},{key:"readUTF8",value:function(a){for(var s="",c=0;c<a;c++)s+=String.fromCharCode(this.readU8());return s}},{key:"readPString",value:function(a){var s=this.readU8();p(s<=a);var c=this.readUTF8(s);return this.reserved(a-s-1,0),c}},{key:"skip",value:function(a){this.seek(this.pos+a)}},{key:"reserved",value:function(a,s){for(var c=0;c<a;c++)p(this.readU8()===s)}},{key:"seek",value:function(a){(a<0||a>this.end)&&v("Index out of bounds (bounds: [0, "+this.end+"], index: "+a+")."),this.pos=a}},{key:"subStream",value:function(a,s){return new _(this.bytes.buffer,a,s)}},{key:"uint",value:function(a){for(var s=this.position,c=s+a,m=0,h=s;h<c;h++)m<<=8,m|=255&this.readU8();return m}},{key:"length",get:function(){return this.end-this.start}},{key:"position",get:function(){return this.pos}},{key:"remaining",get:function(){return this.end-this.pos}}]),_}()),l=function(){function _(a){o(this,_),this.stream=a,this.tracks={},this.metaData={}}return f(_,[{key:"getPath",value:function(a){for(var s=a.split("."),c=this,m=0,h=s.length;m<h;m++)c=c?c[s[m]]:void 0;return c}},{key:"readBoxes",value:function(a,s){for(;a.peek32();){var c=this.readBox(a);if(c.type in s){var m=s[c.type];Array.isArray(m)||(s[c.type]=[m]),s[c.type].push(c)}else s[c.type]=c}}},{key:"readBox",value:function(a){function s(){g.version=a.readU8(),g.flags=a.readU24()}function c(){return g.size-(a.position-g.offset)}function m(){a.skip(c())}function h(){var de=a.subStream(a.position,c());y.readBoxes(de,g),a.skip(de.length)}var g={offset:a.position},y=this;(function(){g.size=a.readU32(),g.type=a.read4CC()})();var x=void 0,T=void 0,w=void 0;switch(g.type){case"ftyp":var D=g;D.name="File Type Box",D.majorBrand=a.read4CC(),D.minorVersion=a.readU32(),D.compatibleBrands=new Array((D.size-16)/4);for(var j=0;j<D.compatibleBrands.length;j++)D.compatibleBrands[j]=a.read4CC();break;case"moov":g.name="Movie Box",h();break;case"mvhd":var F=g;F.name="Movie Header Box",s(),p(F.version==0),F.creationTime=a.readU32(),F.modificationTime=a.readU32(),F.timeScale=a.readU32(),F.duration=a.readU32(),F.rate=a.readFP16(),F.volume=a.readFP8(),a.skip(10),F.matrix=a.readU32Array(9),a.skip(24),F.nextTrackId=a.readU32();break;case"trak":var I=g;I.name="Track Box",h();var Y=new P(this,I),J=I.mdia&&I.mdia.hdlr&&I.mdia.hdlr.handlerType||"unknownHandlerType",re=this.tracks;(re[J]||(re[J]=[])).push(Y),re[I.tkhd.trackId]=Y;break;case"tkhd":var O=g;O.name="Track Header Box",s(),p(O.version==0),O.creationTime=a.readU32(),O.modificationTime=a.readU32(),O.trackId=a.readU32(),a.skip(4),O.duration=a.readU32(),a.skip(8),O.layer=a.readU16(),O.alternateGroup=a.readU16(),O.volume=a.readFP8(),a.skip(2),O.matrix=a.readU32Array(9),O.width=a.readFP16(),O.height=a.readFP16();break;case"edts":g.name="Edit Atom",h();break;case"elst":var b=g;b.name="Edit List Atom",s(),b.editList=[],w=a.readU32();for(var S=0;S<w;S++)b.editList.push({trackDuration:a.read32(),mediaTime:a.read32(),mediaRate:a.readU32()});p(!c()),m();break;case"mdia":g.name="Media Box",h();break;case"mdhd":var k=g;k.name="Media Header Box",s(),p(k.version==0),k.creationTime=a.readU32(),k.modificationTime=a.readU32(),k.timeScale=a.readU32(),k.duration=a.readU32(),k.language=a.readISO639(),a.skip(2);break;case"hdlr":var E=g;E.name="Handler Reference Box",s(),a.skip(4),E.handlerType=a.read4CC(),a.skip(12),T=E.size-32,T>0&&(E.name=a.readUTF8(T));break;case"minf":g.name="Media Information Box",h();break;case"stbl":g.name="Sample Table Box",h();break;case"stsd":var B=g;B.name="Sample Description Box",s(),B.sd=[],a.readU32(),h();break;case"avc1":var z=g;a.reserved(6,0),z.dataReferenceIndex=a.readU16(),p(a.readU16()==0),p(a.readU16()==0),a.readU32(),a.readU32(),a.readU32(),z.width=a.readU16(),z.height=a.readU16(),z.horizontalResolution=a.readFP16(),z.verticalResolution=a.readFP16(),p(a.readU32()==0),z.frameCount=a.readU16(),z.compressorName=a.readPString(32),z.depth=a.readU16(),p(a.readU16()==65535),h();break;case"mp4a":var H=g;if(a.reserved(6,0),H.dataReferenceIndex=a.readU16(),H.version=a.readU16(),H.version!==0){m();break}a.skip(2),a.skip(4),H.channelCount=a.readU16(),H.sampleSize=a.readU16(),H.compressionId=a.readU16(),H.packetSize=a.readU16(),H.sampleRate=a.readU32()>>>16,h();break;case"esds":g.name="Elementary Stream Descriptor",s(),m();break;case"avcC":var U=g;U.name="AVC Configuration Box",U.configurationVersion=a.readU8(),U.avcProfileIndicaation=a.readU8(),U.profileCompatibility=a.readU8(),U.avcLevelIndication=a.readU8(),U.lengthSizeMinusOne=3&a.readU8(),p(U.lengthSizeMinusOne==3,"TODO"),x=31&a.readU8(),U.sps=[];for(var ie=0;ie<x;ie++)U.sps.push(a.readU8Array(a.readU16()));x=31&a.readU8(),U.pps=[];for(var te=0;te<x;te++)U.pps.push(a.readU8Array(a.readU16()));m();break;case"btrt":var ne=g;ne.name="Bit Rate Box",ne.bufferSizeDb=a.readU32(),ne.maxBitrate=a.readU32(),ne.avgBitrate=a.readU32();break;case"stts":var L=g;L.name="Decoding Time to Sample Box",s(),L.table=a.readU32Array(a.readU32(),2,["count","delta"]);break;case"stss":var G=g;G.name="Sync Sample Box",s(),G.samples=a.readU32Array(a.readU32());break;case"stsc":var W=g;W.name="Sample to Chunk Box",s(),W.table=a.readU32Array(a.readU32(),3,["firstChunk","samplesPerChunk","sampleDescriptionId"]);break;case"stsz":var Q=g;Q.name="Sample Size Box",s(),Q.sampleSize=a.readU32(),x=a.readU32(),Q.sampleSize==0&&(Q.table=a.readU32Array(x));break;case"stco":var le=g;le.name="Chunk Offset Box",s(),le.table=a.readU32Array(a.readU32());break;case"smhd":var C=g;C.name="Sound Media Header Box",s(),C.balance=a.readFP8(),a.reserved(2,0);break;case"mdat":var R=g;R.name="Media Data Box",p(R.size>=8,"Cannot parse large media data yet."),R.data=a.readU8Array(c());break;case"mebx":g.name="Mebx",h();break;case"meta":g.name="Metadata",h();break;case"keys":var A=g;A.name="Metadata Item Keys",s();var K=A.keyCount=a.read32(),V=A.offset-A.size;A.keyList=new Map;for(var M=1;M<=K;M++){var N=a.read32()-8;N<1||N>V||(a.skip(4),A.keyList.set(a.readUTF8(N),M))}this.metaData.keys=A;break;case"ilst":var q=g;q.name="Metadata Item List",q.items=[];for(var X=q.offset+q.size;a.position<X;){var $=(a.position,a.readU32(),a.readU32()),oe=a.readU32()-16,Z=(a.read4CC(),a.readU8()),ae=a.readU24(),se=(a.readU16(),a.readU16(),void 0);se=Z===0&&ae!==1?a.uint(oe):a.readUTF8(oe),q.items[$]=se}this.metaData.values=q;break;default:m()}return g}},{key:"read",value:function(){var a=new Date().getTime();this.file={},this.readBoxes(this.stream,this.file),u.a.info("Parsed stream in "+(new Date().getTime()-a)+" ms")}},{key:"traceSamples",value:function(){var a=this.tracks[1],s=this.tracks[2];u.a.info("Video Samples: "+a.getSampleCount()),u.a.info("Audio Samples: "+s.getSampleCount());for(var c=0,m=0,h=0;h<100;h++){var g=a.sampleToOffset(c),y=s.sampleToOffset(m),x=a.sampleToSize(c,1),T=s.sampleToSize(m,1);g<y?(u.a.info("V Sample "+c+" Offset : "+g+", Size : "+x),c++):(u.a.info("A Sample "+m+" Offset : "+y+", Size : "+T),m++)}}}]),_}(),P=function(){function _(a,s){o(this,_),this.file=a,this.trak=s}return f(_,[{key:"getSampleSizeTable",value:function(){return this.trak.mdia.minf.stbl.stsz.table}},{key:"getSampleCount",value:function(){return this.getSampleSizeTable().length}},{key:"sampleToSize",value:function(a,s){for(var c=this.getSampleSizeTable(),m=0,h=a;h<a+s;h++)m+=c[h];return m}},{key:"sampleToChunk",value:function(a){var s=this.trak.mdia.minf.stbl.stsc.table;if(s.length===1){var c=s[0];return p(c.firstChunk===1),{index:a/c.samplesPerChunk,offset:a%c.samplesPerChunk}}for(var m=0,h=0;h<s.length;h++){var g=s[h];if(h>0){var y=s[h-1],x=g.firstChunk-y.firstChunk,T=y.samplesPerChunk*x;if(!(a>=T))return{index:m+Math.floor(a/y.samplesPerChunk),offset:a%y.samplesPerChunk};if(a-=T,h===s.length-1)return{index:m+x+Math.floor(a/g.samplesPerChunk),offset:a%g.samplesPerChunk};m+=x}}p(!1)}},{key:"chunkToOffset",value:function(a){return this.trak.mdia.minf.stbl.stco.table[a]}},{key:"sampleToOffset",value:function(a){var s=this.sampleToChunk(a);return this.chunkToOffset(s.index)+this.sampleToSize(a-s.offset,s.offset)}},{key:"timeToSample",value:function(a){for(var s=this.trak.mdia.minf.stbl.stts.table,c=0,m=0;m<s.length;m++){var h=s[m].count*s[m].delta;if(!(a>=h))return c+Math.floor(a/s[m].delta);a-=h,c+=s[m].count}}},{key:"sampleToTime",value:function(a){for(var s=this.trak.mdia.minf.stbl.stts.table,c=0,m=0,h=0;h<s.length&&c<a;h++){var g=s[h],y=Math.min(a-c,g.count);c+=y,m+=y*g.delta}return m}},{key:"getTotalTime",value:function(){for(var a=this.trak.mdia.minf.stbl.stts.table,s=0,c=0;c<a.length;c++)s+=a[c].count*a[c].delta;return p(this.trak.mdia.mdhd.duration===s),this.trak.mdia.mdhd.duration}},{key:"getTotalTimeInSeconds",value:function(){return this.timeToSeconds(this.getTotalTime())}},{key:"getTimeScale",value:function(){return this.trak.mdia.mdhd.timeScale}},{key:"timeToSeconds",value:function(a){return a/this.getTimeScale()}},{key:"secondsToTime",value:function(a){return a*this.getTimeScale()}},{key:"secondsToSample",value:function(a){return this.timeToSample(this.secondsToTime(a))}},{key:"sampleToSeconds",value:function(a){return this.timeToSeconds(this.sampleToTime(a))}},{key:"getAllSampleTimes",value:function(){for(var a=[],s=this.getSampleCount(),c=0;c<s;c++)a.push(this.sampleToTime(c));return a}},{key:"getAllSampleSeconds",value:function(){for(var a=[],s=this.getSampleCount(),c=0;c<s;c++)a.push(this.sampleToSeconds(c));return a}},{key:"getSampleNALUnits",value:function(a){for(var s=this.file.stream.bytes,c=this.sampleToOffset(a),m=c+this.sampleToSize(a,1),h=[];m-c>0;){var g=new d(s.buffer,c).readU32();h.push(s.subarray(c+4,c+g+4)),c=c+g+4}return h}}]),_}()},function(i,n,r){var o={staticMembers:{_pool:null,_cache:null,init:function(){this._pool=[],this._cache={},this._super()},getPoolingCacheKey:function(){throw"Must implement `getPoolingCacheKey` to use PoolCaching."},getCached:function(){var p=this.getPoolingCacheKey.apply(this,arguments),v=this._cache[p];return v||(v=this._cache[p]=this._pool.pop()||this.create(),v._poolingCacheKey=p,v.initFromPool.apply(v,arguments)),v},peekCached:function(){var p=this.getPoolingCacheKey.apply(this,arguments);return this._cache[p]||null},_disposeInstance:function(p){delete this._cache[p._poolingCacheKey],p._poolingCacheKey=void 0,p._poolingLifecycleCount=1+(0|p._poolingLifecycleCount),this._pool.push(p)}},dispose:function(){},_poolingCacheKey:null,initFromPool:function(){},_retainCount:0,retain:function(){return this._retainCount++,this},release:function(){return this._retainCount--,this._retainCount||this.dispose(),this}};n.a=o},function(i,n,r){function o(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?g:y}function p(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}function v(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}var u=r(19);r.d(n,"a",function(){return P}),r.d(n,"b",function(){return a}),r.d(n,"c",function(){return c}),r.d(n,"d",function(){return h});var f=function(){function g(y,x){for(var T=0;T<x.length;T++){var w=x[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,x,T){return x&&g(y.prototype,x),T&&g(y,T),y}}(),d=function(){function g(){v(this,g),this._a=[]}return f(g,[{key:"get",value:function(){return this._a.pop()||this.create()}},{key:"ret",value:function(y){this.prepare(y),this._a.push(y)}}]),g}(),l=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return[]}},{key:"prepare",value:function(x){x.length=0}}]),y}(d),P=new l,_=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return new u.a}},{key:"prepare",value:function(x){x.clear()}}]),y}(d),a=new _,s=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return Object.create(null)}},{key:"prepare",value:function(x){var T=x;for(var w in T)delete T[w]}}]),y}(d),c=new s,m=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return document.createElement("canvas")}},{key:"prepare",value:function(x){var T=x.parentNode;T&&T.removeChild(x),x.width=x.height=0}}]),y}(d),h=new m},function(i,n,r){function o(v,u){return v.apply(void 0,u)}var p={_readiness:"pending",_resolutionArgs:null,_fulfillmentCallbacks:null,_rejectionCallbacks:null,onReadyOrFail:function(v,u){this._resolveIfAlreadyResolved(v,u,!1)||this._pendCallbacks(v,u)},onReadyOrFailSync:function(v,u){this._resolveIfAlreadyResolved(v,u,!0)||this._pendCallbacks(v,u)},_resolveIfAlreadyResolved:function(v,u,f){var d=this._resolutionArgs;return this._readiness==="success"&&v?(f?o(v,d):setTimeout(o,0,v,d),!0):!(this._readiness!=="failure"||!u)&&(f?o(u,d):setTimeout(o,0,u,d),!0)},_pendCallbacks:function(v,u){v&&(this._fulfillmentCallbacks||(this._fulfillmentCallbacks=[])).push(v),u&&(this._rejectionCallbacks||(this._rejectionCallbacks=[])).push(u)},clearReadinessCallbacks:function(){this._fulfillmentCallbacks&&(this._fulfillmentCallbacks.length=0),this._rejectionCallbacks&&(this._rejectionCallbacks.length=0)},resetReadiness:function(){this._readiness="pending",this._resolutionArgs&&(this._resolutionArgs.length=0),this.clearReadinessCallbacks()},resolveReadiness:function(){this._readiness==="pending"&&(this._readiness="success",(this._resolutionArgs=this._resolutionArgs||[]).push.apply(this._resolutionArgs,arguments),this._invokeCallbacks(this._fulfillmentCallbacks),this.clearReadinessCallbacks())},rejectReadiness:function(){this._readiness==="pending"&&(this._readiness="failure",(this._resolutionArgs=this._resolutionArgs||[]).push.apply(this._resolutionArgs,arguments),this._invokeCallbacks(this._rejectionCallbacks),this.clearReadinessCallbacks())},_invokeCallbacks:function(v){if(v){for(var u,f=0;u=v[f];f++)u.apply(void 0,this._resolutionArgs);v.length=0}}};n.a=p},function(i,n,r){function o(){for(var s=1;s<arguments.length;s++)this[s-1]=arguments[s];return this}function p(s){return s&&s.tagName==="IMG"&&/^data:image\/svg|\.svg\?|\.svg$/.test(s.src)}var v=document.createElement("canvas"),u=v.getContext("2d"),f=document.createElement("canvas"),d=f.getContext("2d");v.width=f.width=v.height=f.height=0;var l=!1,P=!1,_=function(s,c){for(var m=arguments.length,h=Array(m>2?m-2:0),g=2;g<m;g++)h[g-2]=arguments[g];if(p(c))return s.drawImage.apply(s,o.apply(a,arguments)),!0;var y=l,x=P;l=P=!1;var T=c instanceof HTMLImageElement?c.naturalWidth:c.width,w=c instanceof HTMLImageElement?c.naturalHeight:c.height;if(!T||!w)throw"Source image provided to drawImageSmooth was not loaded, or otherwise had no dimensions.";var D=void 0,j=void 0,F=void 0,I=void 0,Y=void 0,J=void 0,re=void 0,O=void 0;switch(arguments.length-1){case 3:D=0,j=0,F=T,I=w,Y=arguments[2],J=arguments[3],re=T,O=w;break;case 5:D=0,j=0,F=T,I=w,Y=arguments[2],J=arguments[3],re=arguments[4],O=arguments[5];break;case 9:D=arguments[2],j=arguments[3],F=arguments[4],I=arguments[5],Y=arguments[6],J=arguments[7],re=arguments[8],O=arguments[9]}var b=re/F,S=O/I;if(b&&S){var k=Math.max(b,S),E=Math.pow(2,Math.ceil(Math.log(1.1*k)/Math.log(2)));if(E>=1)return s.drawImage.apply(s,o.apply(a,arguments)),!0;var B=void 0;if(y){B="_cachedSmoothDownsample_from"+D+","+j+","+F+","+I+"@"+E+"x";var z=c[B];if(z)return s.drawImage(z,0,0,z.width,z.height,Y,J,re,O),!0}if(x)return s.drawImage.apply(s,o.apply(a,arguments)),!1;var H=1,U=F,ie=I,te=Math.max(Math.pow(2,Math.ceil(Math.log(U)/Math.log(2))),v.width),ne=Math.max(Math.pow(2,Math.ceil(Math.log(ie)/Math.log(2))),v.height);for(v.width===te&&v.height===ne||(v.width=f.width=te,v.height=f.height=ne),u.drawImage(c,D,j,F,I,0,0,F,I);H>E;){d.drawImage(v,0,0,U,ie,0,0,U=Math.ceil(U/2),ie=Math.ceil(ie/2)),u.clearRect(0,0,U,ie);var L=v;v=f,f=L;var G=u;u=d,d=G,H/=2}if(y){var W=document.createElement("canvas");W.width=U,W.height=ie,W.getContext("2d").drawImage(v,0,0),c[B]=W}return s.drawImage(v,0,0,U,ie,Y,J,re,O),u.clearRect(0,0,F,I),d.clearRect(0,0,F,I),!0}};_.usingCache=function(){return l=!0,this},_.avoidingWorkIf=function(s){return P=s,this};var a=[];n.a=_},function(i,n,r){function o(){var v="_callbacksForEventHandler"+ ++p;return function(u){var f=this[v]||(this[v]=[]);if(typeof u=="function")return f.push(u);if(f)for(var d=0,l=f.length;d<l;++d)f[d](u)}}n.a=o;var p=1},function(i,n,r){function o(a){var s=a&&new DataView(a),c={};return s&&p(s)&&v(s,c),c}function p(a){return a.getUint16(0)===65496}function v(a,s){for(var c=a.byteLength,m=2;m<c;){var h=a.getUint16(m);h===65505&&u(a,m+4,s),h!==65472&&h!==65474||f(a,m+5,s),m+=2+a.getUint16(m+2)}return s}function u(a,s,c){if(a.getUint32(s)!==1165519206)return c;var m=s+6,h=void 0,g=a.getUint16(m);if(g===18761)h=!0;else{if(g!==19789)return c;h=!1}for(var y=m+a.getUint32(m+4,h),x=a.getUint16(y,h),T=0;T<x;T++){var w=y+12*T+2,D=a.getUint16(w,h);D===274&&(c.orientation=a.getUint16(w+8,h)),D===34665&&d(a,m,_(a,w,h),h,c)}return c}function f(a,s,c){return c.height=a.getUint16(s),c.width=a.getUint16(s+2),c}function d(a,s,c,m,h){var g=P(a,s+c,m),y=void 0;return 37500 in g&&(y=g[37500],l(a,s+a.getUint32(y+8),h)),h}function l(a,s,c){for(var m="",h=0;h<9;h++)m+=String.fromCharCode(a.getUint8(s+h));if(m!=="Apple iOS")return c;var g=a.getUint16(s+9+3)===18761,y=P(a,s+9+3+2,g);return 27 in y&&(c.photosRenderEffect=_(a,y[27],g)),c}function P(a,s,c){for(var m=a.getUint16(s,c),h=s+2,g={},y=0;y<m;y++){var x=h+12*y;g[a.getUint16(x,c)]=x}return g}function _(a,s,c){var m=a.getUint16(s+2,c),h=a.getUint32(s+4,c),g=a.getUint32(s+8,c),y=[];switch(m){case 3:if(h===1)return a.getUint16(s+8,c);if(h===2)return[a.getUint16(s+8,c),a.getUint16(s+10,c)];for(var x=0;x<h;x++)y[x]=a.getUint16(g+4*x,c);return y;case 4:if(h===1)return g;for(var T=0;T<h;T++)y[T]=a.getUint32(g+4*T,c);return y;case 9:if(h===1)return a.getInt32(s+8,c);for(var w=0;w<h;w++)y[w]=a.getInt32(g+4*w,c);return y;default:return null}}n.a=o},function(i,n,r){function o(){for(var v=p()+p();v.length<16;)v+=p();return v.slice(0,16)}function p(){return Math.random().toString(16).substring(2)}n.a=o},function(i,n,r){function o(u,f){var d=u,l=d._computedStyle;l||(l=d._computedStyle=document.defaultView.getComputedStyle(u,null));var P=l.getPropertyValue(f);return!P&&p.get(f)&&(P=p.get(f)(l)||P),P}n.a=o;var p=function(){var u=new Map;return u.set("font",function(f){for(var d="",l=0,P=v.length;l<P;l++){var _=v[l],a=f.getPropertyValue("font-"+_);if(a&&(d&&(d+=" "),d+=a,_==="size")){var s=f.getPropertyValue("line-height");s&&(d+="/"+s)}}return d}),u}(),v=["style","variant","weight","size","family"]},function(i,n,r){function o(v,u,f,d,l,P,_){var a=void 0;a=!1;var s=arguments.length;s!==6&&(_=s-1);var c=void 0,m=void 0,h=void 0,g=void 0,y=void 0;if(_===2||_===3){var x=u,T=f;m=x.height,c=x.width,g=T.height,h=T.width,y=d}else c=u,m=f,h=d,g=l,y=P;var w=c/m,D=h/g,j=a?w<D:w>D;return y=y||{},y.width=j?h:g*w,y.height=j?h/w:g,y}function p(v,u,f,d,l){return o(!1,v,u,f,d,l,arguments.length)}n.a=p},function(i,n,r){n.a="current"},function(i,n,r){n.a="Mcurrent"},function(i,n,r){n.a="1.5.6"}])})}(xr)),xr.exports}var Bu=ju();const Hu=["src"],zu=["src","muted","loop"],Ku=Ot({__name:"LivePhoto",props:{photoSrc:{default:""},videoSrc:{default:""},muted:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},useApple:{type:Boolean,default:!1}},setup(e){const t=e,i=me(!1),n=me(!1),r=me(!1),o=me(!1),p=me(""),v=me(""),u=me(!1),f=me(!1),d=me(!1),l=me(null),P=me(null),_=async()=>{if(d.value&&P.value&&p.value&&v.value){await Vr();const T=Bu.Player(P.value);T.photoSrc=p.value,T.videoSrc=v.value}},a=T=>{T.stopPropagation(),l.value&&(r.value?l.value.pause():(n.value=!0,l.value.play()))},s=T=>{var w;(w=window.top)==null||w.postMessage(T,window.location.origin)},c=T=>{const w=T.target;!/trigger/.test(w.className)&&!n.value&&s(p.value)},m=()=>{i.value=!0,/iphone/i.test(navigator.userAgent)&&/micromessenger/i.test(navigator.userAgent)&&setTimeout(()=>{h(!0)},500)},h=T=>{o.value=T},g=T=>{r.value=T},y=T=>{n.value=T},x=()=>{const T=new URLSearchParams(window.location.search),w=T.get("picUrl")||T.get("photoSrc"),D=T.get("videoUrl")||T.get("videoSrc"),j=T.get("muted"),F=T.get("loop"),I=T.get("useApple");w&&(p.value=w),D&&(v.value=D),j&&(u.value=!!j),F&&(f.value=!!F),I&&(d.value=!!I),!w&&t.photoSrc&&(p.value=t.photoSrc),!D&&t.videoSrc&&(v.value=t.videoSrc),j||(u.value=t.muted),F||(f.value=t.loop),I||(d.value=t.useApple)};return Dt([d,p,v,P],()=>{d.value&&_()},{immediate:!0}),Li(()=>{x()}),(T,w)=>(We(),qe("div",{class:"live-photo",onClick:c},[d.value?(We(),qe("div",{key:0,ref_key:"applePlayerRef",ref:P,class:"live-img"},null,512)):(We(),qe(je,{key:1},[ee("div",{class:"live-trigger",onClick:a,style:He({opacity:Number(o.value)})},[ee("div",{class:"trigger-icon",style:He({animationPlayState:r.value?"running":"paused"})},null,4),w[5]||(w[5]=ee("span",{class:"trigger-text"},"LIVE",-1))],4),ee("img",{class:"live-img",src:p.value,onLoad:m,style:He({opacity:Number(i.value)})},null,44,Hu),ee("video",{ref_key:"videoRef",ref:l,class:"live-video",src:v.value,style:He({opacity:Number(n.value)}),muted:u.value,loop:f.value,playsinline:"","webkit-playsinline":"",onCanplay:w[0]||(w[0]=()=>h(!0)),onLoadedmetadata:w[1]||(w[1]=()=>h(!0)),onPlaying:w[2]||(w[2]=()=>g(!0)),onPause:w[3]||(w[3]=()=>g(!1)),onEnded:w[4]||(w[4]=()=>y(!1))},null,44,zu)],64))]))}}),fr=(e,t)=>{const i=e.__vccOpts||e;for(const[n,r]of t)i[n]=r;return i},Wu=fr(Ku,[["__scopeId","data-v-e62e7b46"]]),oo="/assets/live-CByEC6AI.jpg",so="/assets/live-DRtNgnS1.mp4",qu={class:"home"},$u={class:"hero"},Gu={class:"hero-container"},Xu={class:"hero-content"},Yu={class:"hero-actions"},Zu={class:"hero-demo"},Qu=Ot({__name:"Home",setup(e){return(t,i)=>{const n=li("router-link");return We(),qe("div",qu,[ee("section",$u,[ee("div",Gu,[ee("div",Xu,[i[2]||(i[2]=ee("h1",{class:"hero-title"},"LivePhoto Vue",-1)),i[3]||(i[3]=ee("p",{class:"hero-subtitle"}," Vue 3 Live PhotoApple ",-1)),ee("div",Yu,[Pe(n,{to:"/demo",class:"btn btn-primary"},{default:St(()=>i[0]||(i[0]=[Se("")])),_:1,__:[0]}),Pe(n,{to:"/docs",class:"btn btn-secondary"},{default:St(()=>i[1]||(i[1]=[Se("")])),_:1,__:[1]})])]),ee("div",Zu,[Pe(Wu,{"photo-src":lt(oo),"video-src":lt(so),"use-apple":!1,muted:!0},null,8,["photo-src","video-src"])])])]),i[4]||(i[4]=Di('<section class="features" data-v-8d8397d2><div class="container" data-v-8d8397d2><h2 class="section-title" data-v-8d8397d2></h2><div class="features-grid" data-v-8d8397d2><div class="feature-card" data-v-8d8397d2><div class="feature-icon" data-v-8d8397d2></div><h3 data-v-8d8397d2></h3><p data-v-8d8397d2>AppleLivePhotosKit</p></div><div class="feature-card" data-v-8d8397d2><div class="feature-icon" data-v-8d8397d2></div><h3 data-v-8d8397d2></h3><p data-v-8d8397d2></p></div><div class="feature-card" data-v-8d8397d2><div class="feature-icon" data-v-8d8397d2></div><h3 data-v-8d8397d2></h3><p data-v-8d8397d2>TypeScriptVue</p></div><div class="feature-card" data-v-8d8397d2><div class="feature-icon" data-v-8d8397d2></div><h3 data-v-8d8397d2></h3><p data-v-8d8397d2></p></div></div></div></section><section class="installation" data-v-8d8397d2><div class="container" data-v-8d8397d2><h2 class="section-title" data-v-8d8397d2></h2><div class="install-steps" data-v-8d8397d2><div class="step" data-v-8d8397d2><h3 data-v-8d8397d2>1. </h3><div class="code-block" data-v-8d8397d2><code data-v-8d8397d2>npm install livephoto-vue</code></div></div><div class="step" data-v-8d8397d2><h3 data-v-8d8397d2>2. </h3><div class="code-block" data-v-8d8397d2><code data-v-8d8397d2>import { LivePhoto } from &#39;livephoto-vue&#39;</code></div></div><div class="step" data-v-8d8397d2><h3 data-v-8d8397d2>3. </h3><div class="code-block" data-v-8d8397d2><code data-v-8d8397d2>&lt;LivePhoto photo-src=&quot;...&quot; video-src=&quot;...&quot; /&gt;</code></div></div></div></div></section>',2))])}}}),Ju=fr(Qu,[["__scopeId","data-v-8d8397d2"]]);var Sr={exports:{}};/*!
 * Copyright (c) 2017 Apple Inc. All rights reserved.
 * 
 * # LivePhotosKit JS License
 * 
 * **IMPORTANT:** This Apple LivePhotosKit software is supplied to you by Apple
 * Inc. ("Apple") in consideration of your agreement to the following terms, and
 * your use, reproduction, or installation of this Apple software constitutes
 * acceptance of these terms. If you do not agree with these terms, please do not
 * use, reproduce or install this Apple software.
 * 
 * This Apple LivePhotosKit software is supplied to you by Apple Inc. ("Apple") in
 * consideration of your agreement to the following terms, and your use,
 * reproduction, or installation of this Apple software constitutes acceptance of
 * these terms. If you do not agree with these terms, please do not use, reproduce
 * or install this Apple software.
 * 
 * This software is licensed to you only for use with LivePhotos that you are
 * authorized or legally permitted to embed or display on your website. 
 * 
 * The LivePhotosKit Software is only licensed and intended for the purposes set
 * forth above and may not be used for other purposes or in other contexts without
 * Apple's prior written permission. For the sake of clarity, you may not and
 * agree not to or enable others to, modify or create derivative works of the
 * LivePhotosKit Software.
 * 
 * Neither the name, trademarks, service marks or logos of Apple Inc. may be used
 * to endorse or promote products, services without specific prior written
 * permission from Apple. Except as expressly stated in this notice, no other
 * rights or licenses, express or implied, are granted by Apple herein.
 * 
 * The LivePhotosKit Software is provided by Apple on an "AS IS" basis. APPLE
 * MAKES NO WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE
 * IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE, REGARDING THE LIVEPHOTOSKIT SOFTWARE OR ITS USE AND
 * OPERATION ALONE OR IN COMBINATION WITH YOUR PRODUCTS, SYSTEMS, OR SERVICES.
 * APPLE DOES NOT WARRANT THAT THE LIVEPHOTOSKIT SOFTWARE WILL MEET YOUR
 * REQUIREMENTS, THAT THE OPERATION OF THE LIVEPHOTOSKIT SOFTWARE WILL BE
 * UNINTERRUPTED OR ERROR-FREE, THAT DEFECTS IN THE LIVEPHOTOSKIT SOFTWARE WILL BE
 * CORRECTED, OR THAT THE LIVEPHOTOSKIT SOFTWARE WILL BE COMPATIBLE WITH FUTURE
 * APPLE PRODUCTS, SOFTWARE OR SERVICES. NO ORAL OR WRITTEN INFORMATION OR ADVICE
 * GIVEN BY APPLE OR AN APPLE AUTHORIZED REPRESENTATIVE WILL CREATE A WARRANTY. 
 * 
 * IN NO EVENT SHALL APPLE BE LIABLE FOR ANY DIRECT, SPECIAL, INDIRECT, INCIDENTAL
 * OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) RELATING TO OR ARISING IN ANY WAY OUT OF THE USE, REPRODUCTION,
 * OR INSTALLATION, OF THE LIVEPHOTOSKIT SOFTWARE BY YOU OR OTHERS, HOWEVER CAUSED
 * AND WHETHER UNDER THEORY OF CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT
 * LIABILITY OR OTHERWISE, EVEN IF APPLE HAS BEEN ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE. SOME JURISDICTIONS DO NOT ALLOW THE LIMITATION OF LIABILITY FOR
 * PERSONAL INJURY, OR OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THIS LIMITATION
 * MAY NOT APPLY TO YOU. In no event shall Apple's total liability to you for all
 * damages (other than as may be required by applicable law in cases involving
 * personal injury) exceed the amount of fifty dollars ($50.00). The foregoing
 * limitations will apply even if the above stated remedy fails of its essential
 * purpose. 
 * 
 * 
 * **ACKNOWLEDGEMENTS:**
 * https://cdn.apple-livephotoskit.com/lpk/1/acknowledgements.txt
 * 
 * v1.5.6
 */var ec=Sr.exports,Bn;function tc(){return Bn||(Bn=1,function(e,t){(function(i,n){e.exports=n()})(ec,function(){return function(i){function n(o){if(r[o])return r[o].exports;var p=r[o]={i:o,l:!1,exports:{}};return i[o].call(p.exports,p,p.exports,n),p.l=!0,p.exports}var r={};return n.m=i,n.c=r,n.i=function(o){return o},n.d=function(o,p,v){n.o(o,p)||Object.defineProperty(o,p,{configurable:!1,enumerable:!0,get:v})},n.n=function(o){var p=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(p,"a",p),p},n.o=function(o,p){return Object.prototype.hasOwnProperty.call(o,p)},n.p="",n(n.s=25)}([function(i,n,r){function o(b){if(b){var S=b.staticMembers;S&&p.call(this,S),p.call(this.prototype,b)}}function p(b){for(var S in b)if(b.hasOwnProperty(S)&&S!=="staticMembers"){var k=Object.getOwnPropertyDescriptor(b,S);k.get||k.set?Object.defineProperty(this,S,k):v.call(this,S,b[S])}}function v(b,S){var k=this[b];return k instanceof Function&&S instanceof Function?u.call(this,b,S,k):O.instanceOrKindOf(S,O.Metadata)?f.call(this,b,S):void(this[b]=S)}function u(b,S,k){this[b]=function(){var E=this._super;this._super=k;var B=S.apply(this,arguments);return this._super=E,B}}function f(b,S){this.hasOwnProperty("_metadatas")||(this._metadatas=Object.create(this._metadatas)),(S.isLPKClass?S.sharedInstance:S).registerOnDefinition(this,b)}function d(b){var S=this["_callbacksFor_"+b];if(S){var k=void 0;if(arguments.length>1){k=O.arrayPool.get();for(var E=1,B=arguments.length;E<B;E++)k[E-1]=arguments[E]}var z=void 0;if(z=this._triggerPauseStack){var H=z[z.length-1];if(H[H.length-1]!=="IS_FLUSHING")return void H.push(this,b,k)}for(var U=0,ie=S.length;U<ie;U++){var te=S[U];te&&te.apply(this,k)}k&&O.arrayPool.ret(k)}}function l(b,S){if(b.indexOf(".")!==-1)return _.call(this,b,S);var k="_callbackToIndexMapFor_"+b,E=this.hasOwnProperty(k)?this[k]:this[k]=this[k]?new Y.a(this[k]):new Y.a;if(E.get(S)===void 0){var B="_callbacksFor_"+b,z=this.hasOwnProperty(B)?this[B]:this[B]=this[B]?this[B].slice():[];E.set(S,z.length),z.push(S)}}function P(b,S){if(b.indexOf(".")!==-1)return a.call(this,b,S);var k="_callbackToIndexMapFor_"+b,E=this[k];if(E&&E.get(S)!==void 0){var B=this.hasOwnProperty(k)?this[k]:this[k]=this[k]?new Y.a(this[k]):new Y.a,z="_callbacksFor_"+b;(this.hasOwnProperty(z)?this[z]:this[z]=this[z]?this[z].slice():[])[B.get(S)]=null,B.delete(S)}}function _(b,S,k){var E="_"+b+"_"+O.guidFor(S)+"_"+O.guidFor(k),B="_chainListenerMaintenanceCallback_for"+E;if(!this[B]){var z=b.indexOf("."),H=z!==-1,U=b.substring(z+1),ie=U.substring(0,(U.indexOf(".")+1||U.length+1)-1),te=b.substring(0,z===-1?b.length:z),ne="_chainListenerPreviousStoredValue_for"+E,L=function(G){var W=k||this;if(ie&&H){var Q=this[te],le=this[ne];Q!==le&&(this[ne]=Q,le&&le.isLPKObservable&&a.call(le,U,S,W),Q&&Q.isLPKObservable&&_.call(Q,U,S,W))}G||S.call(W)};l.call(this,te,L),this.isInitialized&&L.call(this,!0),this[B]=L}}function a(b,S,k){var E="_"+b+"_"+O.guidFor(S)+"_"+O.guidFor(k),B="_chainListenerMaintenanceCallback_for"+E,z=this[B];if(z){var H=b.indexOf("."),U=b.substring(0,H===-1?b.length:H);P.call(this,U,z);var ie="_chainListenerPreviousStoredValue_for"+E,te=this[ie];if(te&&te.isLPKObservable){this[ie]=void 0;var ne=b.substring(H+1),L=k||this;a.call(te,ne,S,L)}this[B]=void 0}}function s(b,S){l.apply(this,arguments),this.isInitialized&&S.call(this)}function c(b,S){P.apply(this,arguments)}function m(){var b=this._nextObserverId=(this._nextObserverId||0)+1,S="_runtimeObserver"+b,k=O.observer.apply(O.observer,arguments);return k.registerOnDefinition(this,S),k}function h(b){var S=this._metadatas[b];S&&S.invalidateForObject&&S.invalidateForObject(this)}function g(b){return O.resolvePropertyPathFromObject(this,b)}function y(b,S){var k=b.lastIndexOf(".");if(k===-1)return void(this[b]=S);var E=O.resolvePropertyPathFromObject(this,b.slice(0,k));E&&(E[b.slice(k+1)]=S)}function x(){for(var b=O.objectPool.get(),S=0,k=arguments.length;S<k;S++){var E=arguments[S];b[E]=this.getPath(E)}return b}function T(){var b=arguments.length,S=arguments[b-1],k=O.arrayPool.get();if(b>1)for(var E=0;E<b-1;E++)k[E]=arguments[E];else for(var B in S)Object.prototype.hasOwnProperty.call(S,B)&&k.push(B);O.Object.prototype.pauseNotifications();for(var z=0,H=k.length;z<H;z++){var U=k[z];this.setPath(U,S[U])}O.Object.prototype.resumeNotifications(),O.arrayPool.ret(k)}function w(){(this.hasOwnProperty("_triggerPauseStack")?this._triggerPauseStack:this._triggerPauseStack=O.arrayPool.get()).push(O.arrayPool.get())}function D(){var b=this.hasOwnProperty("_triggerPauseStack")&&this._triggerPauseStack;if(!b)throw"Unmatched `resumeNotifications` call. Cannot over-resume notifications.";var S=b[b.length-1];j(S),b.pop(),O.arrayPool.ret(S),b.length||(delete this._triggerPauseStack,O.arrayPool.ret(b))}function j(b){b.push("IS_FLUSHING");for(var S=O.objectPool.get(),k=0,E=b.length-1;k<E;k+=3){var B=b[k],z=b[k+1],H=b[k+2],U=O.guidFor(B)+":"+z,ie=S[U];ie!==void 0&&(b[ie]=null),S[U]=H?void 0:k}O.objectPool.ret(S);for(var te=0,ne=b.length-1;te<ne;te+=3){var L=b[te];if(L){var G=b[te+1],W=b[te+2];W?(W.unshift(G),L.trigger.apply(L,W),O.arrayPool.ret(W)):L.trigger(G)}}}var F=r(47),I=r(20),Y=r(19),J=r(44),re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},O={mixin:function(b){for(var S=arguments.length,k=Array(S>1?S-1:0),E=1;E<S;E++)k[E-1]=arguments[E];for(var B=1,z=arguments.length;B<z;B++){var H=arguments[B];if(H)for(var U in H)H.hasOwnProperty(U)&&(b[U]=H[U])}},instanceOf:function(b,S){return!!b&&(b.constructor===S||O.kindOf(b.constructor,S))},kindOf:function(b,S){if(!(b&&b.isLPKClass&&S&&S.isLPKClass))return!1;do if(b===S)return!0;while(b=b.superclass);return!1},instanceOrKindOf:function(b,S){return O.instanceOf(b,S)||O.kindOf(b,S)},isHash:function(b){var S=void 0;return!((b===void 0?"undefined":re(b))!=="object"||b===null||(S=b.constructor)&&S!==Object||b.isLPKObject||b.isLPKClass)},arrayPool:F.a,mapPool:F.b,objectPool:F.c,canvasPool:F.d,String:J.a,Array:{mapIntoArray:function(b,S,k){var E=b.length;k.length!==E&&(k.length=E);for(var B=0;B<E;B++)k[B]=S(b[B],B);return k}},resolvePropertyPathFromObject:function(b,S){for(var k=S.indexOf("."),E=0,B=b;k!==-1;){if(!(B=B[S.substring(E,k)]))return;E=k+1,k=S.indexOf(".",E)}return B[S.substring(E)]},InequalityTests:{DEFAULT:function(b,S,k){return b!==S||Array.isArray(b)||O.isHash(b)},STRICT:function(b,S,k){return b!==S},NAN_AWARE:function(b,S,k){return!Object.is(b,S)}},guidFor:I.a,reusableObject:{},emptyArray:[],Object:null,Metadata:null,observer:null,MetadataExtension:null,metadataExtension:null,AccumulatorMetadata:null,accumulator:null,ObserverMetadata:null,Property:null,property:null,ObservableProperty:null,observableProperty:null,ProxyProperty:null,proxyProperty:null,boundFunction:null};O.Object={staticMembers:{isLPKClass:!0,isLPKObservable:!0,isInitialized:!0,create:function(){for(var b=arguments.length,S=Array(b),k=0;k<b;k++)S[k]=arguments[k];var E=Object.create(this.prototype);return E.constructor=this,E.init.apply(E,arguments),E},extend:function(){for(var b=arguments.length,S=Array(b),k=0;k<b;k++)S[k]=arguments[k];var E=Object.create(this);return E.prototype=Object.create(E.prototype),Array.prototype.forEach.call(arguments,o,E),E.superclass=this,E.init(),E},init:function(){},isClassFor:function(b){var S=b&&b.constructor;return!(!S||!this.isSuperclassOf(S))},isSuperclassOf:function(b){var S=this;if(!(b&&b.isLPKClass&&S&&S.isLPKClass))return!1;do if(b===S)return!0;while(b=b.superclass);return!1},_super:null,_metadatas:{},trigger:d,_listen:l,_observe:s,_unlisten:P,_unobserve:c,observe:m,propertyChanged:h,pauseNotifications:w,resumeNotifications:D,getPath:g,setPath:y,getMultiple:x,setMultiple:T},isLPKObject:!0,isLPKObservable:!0,isInitialized:!1,_metadatas:{},init:function(b){O.mixin(this,b),this._awakenPropertiesWithAccessors()},_awakenPropertiesWithAccessors:function(){var b=O.arrayPool.get(),S=this._metadatas;do b.push(S);while(S=Object.getPrototypeOf(S));for(var k,E=O.arrayPool.get(),B=O.arrayPool.get(),z=O.arrayPool.get(),H=O.mapPool.get(),U=b.length-1;k=b[U];U--){for(var ie in k)if(k.hasOwnProperty(ie)){var te=k[ie];if(te.hasAccessors){var ne=this[ie];if(ne!==void 0){var L=H.get(te);L!==void 0&&(E[L]=B[L]=void 0),H.set(te,E.length),E.push(te),B.push(ne)}}}z.push(E.length)}this.isInitialized=!0,O.Object.prototype.pauseNotifications();for(var G=0,W=B.length;G<W;G++){var Q=B[G];Q!==void 0&&E[G].awakenForObjectWithValue(this,Q)}O.Object.prototype.resumeNotifications(),O.arrayPool.ret(b),O.arrayPool.ret(E),O.arrayPool.ret(B),O.arrayPool.ret(z),O.mapPool.ret(H)},_super:null,trigger:d,_listen:l,_observe:s,_unlisten:P,_unobserve:c,observe:m,propertyChanged:h,pauseNotifications:w,resumeNotifications:D,getPath:g,setPath:y,getMultiple:x,setMultiple:T},O.Object.staticMembers.prototype=O.Object,O.Object=O.Object.staticMembers,delete O.Object.prototype.staticMembers,Object.defineProperty(O.Object,"sharedInstance",{get:function(){return this.hasOwnProperty("_internalValue_for_sharedInstance")||(this._internalValue_for_sharedInstance=this.create()),this._internalValue_for_sharedInstance},set:function(){throw"Cannot write to a read-only property."}}),O.Metadata=O.Object.extend({registerOnDefinition:function(b,S){b._metadatas[S]=this},unregisterFromDefinition:function(b,S){b._metadatas[S]=void 0}}),O.MetadataExtension=O.Metadata.extend({init:function(b){this._super(),this._extensionParams=b},registerOnDefinition:function(b,S){b._metadatas[S].constructor.extend(this._extensionParams).sharedInstance.registerOnDefinition(b,S)}}),O.metadataExtension=O.MetadataExtension.create.bind(O.MetadataExtension),O.AccumulatorMetadata=O.Metadata.extend({init:function(b){this._super(),this.value=b},registerOnDefinition:function(b,S){var k=b[S];b[S]=this.accumulateValues(b,k,this.value)},accumulateValues:function(b,S,k){if(Array.isArray(S)&&Array.isArray(k))return S.concat(k);if(S&&S.isLPKClass&&O.isHash(k))return S.extend(k);if(k instanceof Function)return k.call(b,S);throw"Cannot use accumulators this way yet."}}),O.accumulator=O.AccumulatorMetadata.create.bind(O.AccumulatorMetadata),O.ObserverMetadata=O.Metadata.extend({staticMembers:{_collector:[]},dependencies:[],observerCallback:function(){throw"Must specify `observerCallback` on observers."},decideRequiresUpdate:O.InequalityTests.DEFAULT,init:function(){if(O.isHash(arguments[0]))this._super.apply(this,arguments);else{var b=Array.prototype.slice.call(arguments),S=b.pop();this._super({dependencies:b,observerCallback:S})}},registerOnDefinition:function(b,S){this._super.apply(this,arguments),this.keyOnObject=S;var k=this;this._invokeObserverCallbackIfNeeded=this._invokeObserverCallbackIfNeeded||(this._invokeObserverCallbackIfNeeded=function(){var z=k.dependencies,H=k.observerCallback,U=k.constructor._collector;U.length=z.length;var ie=!1;k._shouldForceNextInvocationOfObserverCallback&&(k._shouldForceNextInvocationOfObserverCallback=!1,ie=!0);for(var te=0;te<z.length;te++){var ne=z[te],L=this.getPath(ne),G="_lastValueSeenByObserver_"+S+"_forDependency_"+ne,W=this[G];this[G]=L,!ie&&k.decideRequiresUpdate(L,W,ne)&&(ie=!0),U[te]=L}ie&&H.apply(this,U),U.length=0}),b[this.keyOnObject]=b[this.keyOnObject]||(b[this.keyOnObject]=function(){k._shouldForceNextInvocationOfObserverCallback=!0,k._invokeObserverCallbackIfNeeded.call(this)});for(var E=this.dependencies,B=0;B<E.length;B++)b.isInitialized?b._observe(E[B],this._invokeObserverCallbackIfNeeded):b._listen(E[B],this._invokeObserverCallbackIfNeeded)},unregisterFromDefinition:function(b,S){this._super.apply(this,arguments);for(var k=this.dependencies,E=0;E<k.length;E++)b._unlisten(k[E],this._invokeObserverCallbackIfNeeded)}}),O.observer=O.ObserverMetadata.create.bind(O.ObserverMetadata),O.Property=O.Metadata.extend({staticMembers:{extend:function(b){return arguments.length!==1||O.isHash(b)?this._super.apply(this,arguments):this._super({defaultValue:b})}},hasAccessors:!0,readOnly:!1,defaultValue:void 0,get:null,set:null,keyOnObject:null,storageKeyOnObject:null,_defaultGetter:function(b){return b},_defaultSetter:function(b){return b},_internalGetterForObject:function(b){return this.get.call(b,b[this.storageKeyOnObject])},_internalSetterForObject:function(b,S){b[this.storageKeyOnObject]=this.set.call(b,S)},init:function(b){var S=this;if(arguments.length!==1||O.isHash(b)?this._super.apply(this,arguments):this._super({defaultValue:b}),this.get||(this.get=this._defaultGetter),this.readOnly){if(this.set)throw"Cannot include both `readOnly` and `set`.";this.set=function(k){if(S._isAwakeningInReadOnlyMode)return S._isAwakeningInReadOnlyMode=!1,k;throw"Cannot write to a read-only property"}}else this.set||(this.set=this._defaultSetter)},registerOnDefinition:function(b,S){this._super.apply(this,arguments),this.keyOnObject=S;var k=this.storageKeyOnObject="_internalValue_for_"+S;this._internalGetterForObject=this._internalGetterForObject.bind(this),this._internalSetterForObject=this._internalSetterForObject.bind(this);var E=this;Object.defineProperty(b,S,{get:function(){return this.isInitialized?E._internalGetterForObject(this):this[k]},set:function(B){if(!this.isInitialized)return void(this[k]=B);E._internalSetterForObject(this,B)}}),b[S]=this.defaultValue},unregisterFromDefinition:function(b,S){O.reusableObject[S]=void 0;var k=Object.getOwnPropertyDescriptor(O.reusableObject,S);delete O.reusableObject[S],Object.defineProperty(b,S,k),delete b["_internalValue_for_"+S],this._super.apply(this,arguments)},awakenForObjectWithValue:function(b,S){this.readOnly&&(this._isAwakeningInReadOnlyMode=!0),S instanceof Function&&(S=S.call(b)),b[this.keyOnObject]=S}}),O.property=O.Property.extend.bind(O.Property),O.ObservableProperty=O.Property.extend({isCacheable:!1,dependencies:[],writeDependencies:[],decideRequiresUpdate:O.InequalityTests.DEFAULT,_internalSetterForObject:function(b){this._super.apply(this,arguments),this.invalidateForObject(b)},_internalGetterForObject:function(b){if(!this.isCacheable)return this._super.apply(this,arguments);var S=this.cacheExistenceKeyOnObject;if(b[S])return b[this.cacheStorageKeyOnObject];var k=this._super.apply(this,arguments);return b[S]=!0,b[this.cacheStorageKeyOnObject]=k,k},invalidateForObject:function(b){b[this.cacheExistenceKeyOnObject]=!1,b[this.cacheStorageKeyOnObject]=void 0,b.trigger(this.keyOnObject)},registerOnDefinition:function(b,S){this._super.apply(this,arguments);var k=this;this.cacheStorageKeyOnObject="_cacheStorageForProperty_"+S,this.cacheExistenceKeyOnObject="_cacheExistenceForProperty_"+S,O.observer({dependencies:this.dependencies,observerCallback:function(){k.invalidateForObject(this)},decideRequiresUpdate:this.decideRequiresUpdate}).registerOnDefinition(b,"_dependencyObserverForProperty_"+S),this.didChange&&O.observer({dependencies:[S],observerCallback:this.didChange,decideRequiresUpdate:this.decideRequiresUpdate}).registerOnDefinition(b,"_didChangeObserverForProperty_"+S)}}),O.observableProperty=O.ObservableProperty.extend.bind(O.ObservableProperty),O.ProxyProperty=O.ObservableProperty.extend({proxyPath:null,decode:function(b){return b},encode:function(b){return b},init:function(b){var S=typeof b=="string"?b:b.proxyPath;if(!S)throw"A proxyPath must be configured on a ProxyProperty.";this.dependencies=[S];var k=this;this.get=function(){return k.decode(this.getPath(k.proxyPath))},b&&b.readOnly||(this.set=function(E){this.setPath(k.proxyPath,k.encode(E))}),typeof b=="string"?this._super({proxyPath:b}):this._super.apply(this,arguments)}}),O.proxyProperty=O.ProxyProperty.create.bind(O.ProxyProperty),O.boundFunction=function(b){return O.property(function(){return b.bind(this)})},n.a=O},function(i,n,r){r.d(n,"a",function(){return o});var o={default:"full",FULL:"full",HINT:"hint",LOOP:"loop"}},function(i,n,r){function o(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")}var p=function(){function d(l,P){for(var _=0;_<P.length;_++){var a=P[_];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(l,a.key,a)}}return function(l,P,_){return P&&d(l.prototype,P),_&&d(l,_),l}}(),v=navigator.userAgent.toLowerCase(),u=/\sedge\//.test(v),f=function(){function d(){o(this,d)}return p(d,null,[{key:"isEdge",get:function(){return u}},{key:"isChrome",get:function(){return d._isChrome}},{key:"isSafari",get:function(){return d._isSafari}},{key:"isFirefox",get:function(){return d._isFirefox}},{key:"isIE",get:function(){return d._isIE}},{key:"isIOS",get:function(){if(d._isIOS)return!0;var l=window.top,P=l.document;return!(!d._macLike||!("ontouchstart"in l||"createTouch"in P))}}]),d}();n.a=f,f._isChrome=!f.isEdge&&/chrome/.test(v),f._isSafari=!f.isEdge&&!f.isChrome&&/safari/.test(v),f._isFirefox=!f.isEdge&&!f.isChrome&&!f.isSafari&&/firefox/.test(v),f._isIE=!f.isEdge&&!f.isChrome&&!f.isSafari&&!f.isFirefox&&/trident|msie/.test(v),f._isIOS=!!navigator.userAgent.match(/\b(iPad|iPhone|iPod)\b.*\bOS \d+_\d+/i),f._macLike=/mac/i.test(navigator.userAgent)&&!/like mac/i.test(navigator.userAgent)},function(i,n,r){var o=r(10),p=r(1);r.d(n,"a",function(){return v});var v={_mappingToLocalizedStrings:{live:"Live",get bounce(){return o.a.getString("VideoEffects.Badge.Title.Bounce")},get exposure(){return o.a.getString("VideoEffects.Badge.Title.LongExposure")},get loop(){return o.a.getString("VideoEffects.Badge.Title.Loop")}},_mappingToPlaybackStyle:{bounce:p.a.LOOP,exposure:p.a.FULL,live:p.a.FULL,loop:p.a.LOOP},default:"live",BOUNCE:"bounce",EXPOSURE:"exposure",LIVE:"live",LOOP:"loop",toBadgeText:function(u){return this.toLocalizedString(u).toLocaleUpperCase()},toLocalizedString:function(u){return this._mappingToLocalizedStrings[u||v.default]},toPlaybackStyle:function(u){return this._mappingToPlaybackStyle[u||p.a.default]}}},function(i,n,r){function o(h,g,y){return g in h?Object.defineProperty(h,g,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[g]=y,h}var p=r(0),v=r(7),u=r(39),f=r(38),d=r(40),l=r(9),P=Object.assign||function(h){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(h[x]=y[x])}return h},_=p.a.Object.extend({layerName:null,renderLayerClass_dom:null,renderLayerMixin:{},init:function(h){this._super(),this.renderLayerMixin=h},getRenderLayer:function(h,g){return this["renderLayerClass_"+h.approach].extend(this.renderLayerMixin,{layerName:this.layerName}).create(h,g)}}),a=_.extend({renderLayerClass_dom:u.a}),s=_.extend({renderLayerClass_dom:f.a}),c=_.extend({renderLayerClass_dom:d.a}),m=p.a.Object.extend({staticMembers:{PhotoIngredient:a,InterpolatedVideoIngredient:s,VideoIngredient:c,computedStyle:v.a.computedStyle,getRecipeFromPlaybackStyle:function(h){return this._recipesByPlaybackStyle[h]},registerRecipeWithPlaybackStyle:function(h,g){this._recipesByPlaybackStyle=P({},this._recipesByPlaybackStyle,o({},g,h))}},correspondingPlaybackStyle:null,get name(){return"recipe_for_playbackStyle_"+this.correspondingPlaybackStyle},minimumShortenedDuration:0,spontaneousFinishDuration:0,ingredients:null,requiresInterpolation:!1,init:function(h){this.ingredients=[],this._super();for(var g in h)if(h.hasOwnProperty(g)){var y=h[g];this[g]=y,_.isClassFor(y)&&(y.layerName=g,this.ingredients.push(y))}this.correspondingPlaybackStyle&&m.registerRecipeWithPlaybackStyle(this,this.correspondingPlaybackStyle)},getRenderLayers:function(h){for(var g,y=[],x=0;g=this.ingredients[x];x++)g.isDisabled||y.push(g.getRenderLayer(h,this));return y},beginFinishingPlaybackEarly:function(h){if(!h.isPlaying)return void(h.wantsToPlay=!1);h.duration=Math.min(h.duration,Math.max(this.minimumShortenedDuration,h.currentTime+this.spontaneousFinishDuration))},calculateAnimationDuration:function(h,g,y){return g||0},continuePlayback:function(h){h.currentTime<h.duration?h._rafID=requestAnimationFrame(h._nextFrame.bind(h)):(h.stop(),h.dispatchEvent(r.i(l.f)()))},register:function(){},requestMoreCompatibleRecipe:function(){return this}});n.a=m},function(i,n,r){var o=r(12),p={debug:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];o.a&&console.debug.apply(console,arguments)},log:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];o.a&&console.log.apply(console,arguments)},info:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];o.a&&console.info.apply(console,arguments)},warn:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];console.warn.apply(console,arguments)},error:function(v){for(var u=arguments.length,f=Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];console.error.apply(console,arguments)}};n.a=p},function(i,n,r){r.d(n,"a",function(){return o});var o;(function(p){p[p.FAILED_TO_DOWNLOAD_RESOURCE=0]="FAILED_TO_DOWNLOAD_RESOURCE",p[p.PHOTO_FAILED_TO_LOAD=1]="PHOTO_FAILED_TO_LOAD",p[p.VIDEO_FAILED_TO_LOAD=2]="VIDEO_FAILED_TO_LOAD"})(o||(o={}))},function(i,n,r){var o=r(8),p=r(0),v=o.a.extend({_hasBeenDisposed:!1,staticMembers:{computedStyle:function(u){return u._lpk_isComputedStyle=!0,u}},recipe:p.a.observableProperty(),renderer:p.a.observableProperty(),duration:p.a.proxyProperty("renderer.duration"),canRender:p.a.observableProperty(!1),computedStyles:p.a.property(function(){return[]}),displayWidth:0,displayHeight:0,shouldLoop:!1,init:function(u,f){this.renderer=u,this.recipe=f,this._super();for(var d in this){var l=this[d];l&&l._lpk_isComputedStyle&&this.computedStyles.push({styleKey:d,getter:l})}},updateSize:function(u,f){if(!arguments.length)return this.updateSize(this.displayWidth,this.displayHeight);this.displayWidth=u,this.displayHeight=f},setUpForRender:function(){},tearDownFromRender:function(){this.reduceMemoryFootprint()},reduceMemoryFootprint:function(){},_canRenderDidChange:p.a.observer("canRender","renderer._lastRecipe",function(u,f){var d=this.recipe,l=this.renderer;this._hasBeenDisposed||(!u||!f||f!==d&&l._hasInitialized?this.tearDownFromRender():(l._hasInitialized=!0,this.setUpForRender(),this.updateSize()))}),prepareToRenderAtTime:function(){return!0},canRenderAtTime:function(){return!0},renderAtTime:function(u){if(!arguments.length)return this.renderAtTime(this._lastRenderedTime);this._lastRenderedTime=u;for(var f,d=0;f=this.computedStyles[d];d++)f.value=f.getter.call(this,u);this.renderStyles(this.computedStyles)},renderStyles:function(u){},dispose:function(){this.detach(),this._hasBeenDisposed=!0}});n.a=v},function(i,n,r){var o=r(0),p=o.a.Object.extend({element:null,_lpk_isView:!0,tagName:"div",eventDispatchingElement:null,init:function(v){v?this.element=v:this.tagName&&(this.element=document.createElement(this.tagName)),this._super()},attachInto:function(v,u,f){if(!this.element)return void(this.parentView=v);u||(u=v.element),f&&f._lpk_isView&&(f=f.element),f?u.insertBefore(this.element,f):u.appendChild(this.element),this.parentView=v},detach:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.parentView=null},dispatchEvent:function(v){var u=this.eventDispatchingElement||this.element;if(!u)throw"Cannot dispatch an event from a view with no DOM element.";u.dispatchEvent.call(u,v)},parentView:o.a.observableProperty(null)});n.a=p},function(i,n,r){function o(_){return function(a){return new CustomEvent(_,{detail:a})}}var p=r(14);r.d(n,"a",function(){return v}),r.d(n,"b",function(){return u}),r.d(n,"f",function(){return f}),r.d(n,"e",function(){return d}),r.d(n,"c",function(){return l}),r.d(n,"d",function(){return P}),function(){function _(a,s){s=s||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,s.bubbles,s.cancelable,s.detail),c}if(typeof window.CustomEvent=="function")return!1;_.prototype=window.Event.prototype,window.CustomEvent=_}();var v=o(p.a.LIVEPHOTOSKIT_LOADED),u=o("canplay"),f=o("ended"),d=o("error"),l=o("photoload"),P=o("videoload")},function(i,n,r){var o=r(0),p=["ar-sa","ca-cs","cs-cz","da-dk","nl-nl","pt-br","pt-pt","no-no","el-gr","en-us","fi-fi","fr-fr","de-de","he-il","hr-hr","hu-hu","id-id","it-it","ja-jp","ko-kr","ms-my","pl-pl","ro-ro","ru-ru","zh-cn","zh-tw","sk-sk","es-es","sv-se","th-th","tr-tr","uk-ua","vi-vi"],v={"es-419":"es-es",pt:"pt-pt",no:"no-no",nb:"no-no",nn:"no-no",zh:"zh-cn","zh-Hans":"zh-cn","zh-Hant":"zh-tw","zh-HK":"zh-tw","zh-MO":"zh-tw","zh-SG":"zh-cn"},u={};for(var f in v){var d=v[f],l=u[d]||[];u[d]=[].concat(function(x){if(Array.isArray(x)){for(var T=0,w=Array(x.length);T<x.length;T++)w[T]=x[T];return w}return Array.from(x)}(l),[f])}for(var P={},_=0;_<p.length;_++){var a=p[_];try{var s=r(21)("./"+a+".lproj/strings.json"),c=a.split("-")[0],m=u[a];if(P[a]=s,P[c]||(P[c]=s),m)for(var h in m)P[h]=s}catch{}}var g=function(x){var T=y.locale,w=y.strings;return(w[T]||w["en-us"])[x]||""},y=o.a.Object.extend({locale:o.a.observableProperty({get:function(x){return x||window.navigator.language},set:function(x){return x}}),getString:g,strings:P}).create();n.a=y},function(i,n,r){function o(F,I){if(!(F instanceof I))throw new TypeError("Cannot call a class as a function")}function p(F){var I=parseFloat(F);if(+I===I)return I;var Y=F==="true"||F!=="false"&&void 0;return!!Y===Y?Y:F}var v=r(27),u=r(0),f=r(5),d=r(1),l=r(3),P=r(12);r.d(n,"a",function(){return T}),r.d(n,"b",function(){return w}),r.d(n,"c",function(){return D});var _=Object.assign||function(F){for(var I=1;I<arguments.length;I++){var Y=arguments[I];for(var J in Y)Object.prototype.hasOwnProperty.call(Y,J)&&(F[J]=Y[J])}return F},a="property",s={play:"method",pause:"method",stop:"method",toggle:"method",beginFinishingPlaybackEarly:"method",isPlaying:"read_only_property",wantsToPlay:"read_only_property",currentTime:"read_only_property",renderedTime:"read_only_property",duration:"read_only_property",autoplay:a,caption:a,playbackStyle:a,preloadedEffectType:a,updateSize:"method",photoWidth:"read_only_property",photoHeight:"read_only_property",videoWidth:"read_only_property",videoHeight:"read_only_property",effectType:a,proactivelyLoadsVideo:a,photoSrc:a,photoMimeType:a,videoSrc:a,videoMimeType:a,metadataVideoSrc:a,photo:a,video:a,photoTime:a,frameTimes:a,videoRotation:a,canPlay:"read_only_property",loadProgress:"read_only_property",errors:"read_only_property",showsNativeControls:a,observe:"method"};delete s.observe;var c=function(){var F=[];for(var I in s)s.hasOwnProperty(I)&&F.push(I);return F}(),m={},h=c.map(function(F){var I="data-"+u.a.String.hyphenate(F);return m[I]=F,I}),g=c.map(function(F){return s[F]}),y={enumerable:!1,configurable:!1,writable:!1},x={enumerable:!1,configurable:!1},T=function(F,I){if(!F)return f.a.warn("LivePhotosKit.augmentElementAsPlayer requires a target element to augment."),null;if(F.tagName==="IMG"){var Y=document.createElement("div"),J=F.parentNode,re=F.getAttribute("src"),O=F.getAttribute("photo-src")||re;F.removeAttribute("src"),F.setAttribute("data-photo-src",O);for(var b=F.attributes,S=0;S<b.length;S++){var k=b[S],E=k.nodeName,B=k.value;Y.setAttribute(E,B)}J.insertBefore(Y,F),J.removeChild(F),F=Y}var z=void 0,H=void 0,U=F;if(U.__isLPKPlayer__)return U;y.value=!0,Object.defineProperty(U,"__isLPKPlayer__",y);var ie=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};P.a&&!V.videoSrc&&V.photoSrc?f.a.warn("Changing a `photoSrc` independent of its `videoSrc` can result in unexpected behavior"):P.a&&V.videoSrc&&!V.photoSrc&&f.a.warn("Changing a `videoSrc` independent of its `photoSrc` can result in unexpected behavior");var M=H?{photoSrc:H.photo,videoSrc:H.videoSrc,effectType:H.effectType,autoplay:H.autoplay,proactivelyLoadsVideo:H.proactivelyLoadsVideo}:{},N=_({},M,V),q=(N.photoSrc,N.videoSrc,N.effectType),X=N.autoplay,$=N.proactivelyLoadsVideo;z=u.a.objectPool.get(),N.preloadedEffectType=q,N.autoplay=X!==!1;var oe=q||l.a.default;l.a.toPlaybackStyle(oe)===d.a.LOOP&&N.autoplay&&(P.a&&!$&&f.a.warn("When using a looping asset you should set `proactivelyLoadsVideo` to `true` unless `autoplay` is also set to `false`"),N.proactivelyLoadsVideo=!0);for(var Z in N)Object.prototype.hasOwnProperty.call(N,Z)&&(s[Z]===a?z[Z]=N[Z]:f.a.warn("LivePhotosKit.Player: Initial configuration for `"+Z+"` was ignored, because the property is not a writable property."));if(H)for(var ae in z){var se=z[ae];H[ae]=se}else H=v.a.create(U,z);u.a.objectPool.ret(z),z=null};U.setProperties=ie,U.setProperties(I);for(var te,ne,L=0;(te=c[L])&&(ne=g[L]);L++)(function(V,M,N){N==="method"?(y.value=H[M].bind(H),Object.defineProperty(U,M,y)):(x.set=N===a?function(q){H[M]=q}:function(){},x.get=function(){return H[M]},Object.defineProperty(U,M,x))})(0,te,ne);y.value=function(){var V=arguments.length,M=arguments[V-1];if(V<1||!(M instanceof Function))throw new Error("Invalid arguments passed to `observe`. Form: key, [key, ], callback.");for(var N=u.a.arrayPool.get(),q=0,X=V;q<X;q++)N[q]=arguments[q];for(var $=0,oe=V-1;$<oe;$++){var Z=s[N[$]];if(Z!==a&&Z!=="read_only_property")throw new Error("Can't observe non-observable property '"+N[$]+"'.")}N[V-1]=M.bind(this);var ae=H.observe.apply(H,N);return u.a.arrayPool.ret(N),new j(ae,H)},Object.defineProperty(U,"observe",y);for(var te,ne,G,L=0;(te=c[L])&&(ne=g[L])&&(G=h[L]);L++)if(ne===a){var W=U.getAttribute(G);W&&(te==="effectType"?H.preloadedEffectType=p(W):H[te]=p(W))}var Q=U.setAttribute;y.value=function(V,M){var N=m[V];if(!N)return void Q.apply(this,arguments);this[N]=p(M)},Object.defineProperty(U,"setAttribute",y);var le=U.removeAttribute;y.value=function(V){var M=m[V];if(!M)return le.apply(this,arguments);this[M]=null},Object.defineProperty(U,"removeAttribute",y);for(var C,R,A,K=0;(C=c[K])&&(R=g[K])&&(A=h[K]);K++)(function(V,M,N,q){if(N!==a&&N!=="read_only_property")return"continue";U.observe(M,function(X){X==null||typeof X!="string"&&+X!==X&&typeof X!="boolean"?le.call(this,q):Q.call(this,q,String(X))})})(0,C,R,A);return U.getAttribute("data-live-photo")!==""&&U.setAttribute("data-live-photo",""),y.value=H,Object.defineProperty(U,"__internalLPKPlayer__",y),y.value=void 0,x.set=x.get=void 0,U},w=function(F){var I=document.createElement("div");return T(I,F)},D=function(F,I){if(arguments.length>=3||typeof arguments[0]=="string"&&typeof arguments[1]=="string")throw new Error("LivePhotosKit.Player: Creating a new Player using arguments of the form 'photoSrc, videoSrc, [targetElement, [options]]' is no longer supported. Instead, use the new signature, '[targetElement, [options]]");return f.a.warn("The `LivePhotosKit.Player` method will be deprecated in an upcoming release. Please use the `LivePhotosKit.augementElementAsPlayer` or `LivePhotosKit.createPlayer` methods, instead."),F?T(F,I):w(I)},j=function F(I,Y){o(this,F),this.fire=function(){Y[I.keyOnObject]()},this.disconnect=function(){I.unregisterFromDefinition(Y)},this.connect=function(){I.registerOnDefinition(Y)}}},function(i,n,r){var o=/_lpk_debug=true/i;n.a=o.test(window.location.search)||o.test(window.location.hash)},function(i,n,r){var o={setUpForRender:function(){this.attachInto(this.renderer)},tearDownFromRender:function(){this.detach(),this._super()},renderStyles:function(p){for(var v,u=this.element,f=u.style,d=0;v=p[d];d++){var l=v,P=l.styleKey,_=l.value;f[P]!==_&&(f[P]=_)}}};n.a=o},function(i,n,r){var o=r(55),p=r(56),v=r(57);n.a={APP_NAME:"LivePhotosKit",BUILD_NUMBER:o.a,MASTERING_NUMBER:p.a,FEEDBACK_URL_PREFIX:"https://feedbackws.icloud.com",LIVEPHOTOSKIT_LOADED:"livephotoskitloaded",URL_PREFIX:"https://cdn.apple-livephotoskit.com",VERSION:v.a}},function(i,n,r){function o(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}var p=r(3),v=r(50),u=r(18),f=r(10),d=r(1);r.d(n,"a",function(){return _});var l=function(){function a(s,c){for(var m=0;m<c.length;m++){var h=c[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}return function(s,c,m){return c&&a(s.prototype,c),m&&a(s,m),s}}(),P={element:null,label:"",labelPadding:6,leftPadding:5,height:25,backgroundColor:"rgba(255, 255, 255, 0.7)",itemColor:"rgb(0, 0, 0)",fontSize:9,borderRadius:5,dottedRadius:8.5,innerRadius:5.25,zIndex:4,shouldAnimateProgressRing:!0,progressRingAnimationSpeed:300,shouldAddEventListeners:!0,effectType:null,playbackStyle:null,configurePlayAction:r.i(v.a)(),configureStopAction:r.i(v.a)()},_=function(){function a(){var s=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};o(this,a),this._setInstanceProps(c),this._createCanvas(),this.redraw(),this._addEventListeners(),f.a.observe("locale",function(){return s.updateBadgeText()})}return l(a,[{key:"attachPlayerInstance",value:function(s){s.attachBadgeView(this),this.updateBadgeText(s.effectType)}},{key:"redraw",value:function(){var s=this.progress;s>0&&this.shouldAnimateProgressRing?this._animateProgressRing():this._redraw(s)}},{key:"reset",value:function(){var s=this._requestedFrame;s&&cancelAnimationFrame(s),this._progress=0,this._previousProgress=0,this.redraw()}},{key:"appendTo",value:function(s){s.appendChild(this.element)}},{key:"updateAriaLabel",value:function(){var s=p.a.toLocalizedString(this.effectType),c=f.a.getString("VideoEffects.Badge");this.element.setAttribute("aria-label",c+": "+s)}},{key:"updateBadgeText",value:function(s){s?this.effectType=s:s=this.effectType,this.label=s?p.a.toBadgeText(s):"",this.playbackStyle=p.a.toPlaybackStyle(s),this.updateAriaLabel(),this._redraw()}},{key:"_createCanvas",value:function(){var s=this.element;if(s){if(s.tagName.toLowerCase()!=="canvas")throw new Error("Backing element for LivePhotoBadge needs to be an HTMLCanvasElement.")}else s=this.element=document.createElement("canvas");s.setAttribute("role","button"),this.updateAriaLabel(),s.classList.add("lpk-badge"),this._context=s.getContext("2d")}},{key:"_setCanvasSize",value:function(){var s=this.element,c=u.a(),m=this.height,h=this.width;s.height=m*c,s.width=h*c,s.style.height=m+"px",s.style.width=h+"px"}},{key:"_setInstanceProps",value:function(s){var c={};for(var m in P)c.hasOwnProperty.call(P,m)&&(this[m]=s.hasOwnProperty(m)?s[m]:P[m]);this.defaultProps=P}},{key:"_redraw",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=(this.element,this.label),m=c.toLowerCase()||p.a.default;this._setCanvasSize(),this._context.clearRect(0,0,this.width,this.height),this._drawBackground(),this._drawLabel(),this.shouldShowError||(this._drawInnerCircle(),p.a.toPlaybackStyle(m)!==d.a.LOOP?this._drawPlayArrow():this._drawLoopCircle()),this.shouldShowError?(this._drawProgressRing(1),this._drawErrorSlash()):this.progress>0?this._drawProgressRing(s):this._drawDottedCircle()}},{key:"_drawBackground",value:function(){var s=u.a(),c=this._context,m=this.borderRadius*s,h=this.width*s,g=this.height*s;c.beginPath(),c.moveTo(m,0),c.lineTo(h-m,0),c.quadraticCurveTo(h,0,h,m),c.lineTo(h,g-m),c.quadraticCurveTo(h,g,h-m,g),c.lineTo(m,g),c.quadraticCurveTo(0,g,0,g-m),c.lineTo(0,m),c.quadraticCurveTo(0,0,m,0),c.closePath(),c.fillStyle=this.backgroundColor,c.fill()}},{key:"_drawDottedCircle",value:function(){for(var s=a.numberOfDots,c=this.dottedRadius*u.a(),m=0;m<s;m++){var h=this.x0+c*Math.cos(2*Math.PI*m/s),g=this.y0+c*Math.sin(2*Math.PI*m/s);this._drawDot(h,g)}}},{key:"_drawDot",value:function(s,c){var m=this._context,h=u.a()===1?1:1.25;m.beginPath(),m.arc(s,c,h,0,2*Math.PI),m.fillStyle=this.itemColor,m.fill()}},{key:"_drawInnerCircle",value:function(){var s=u.a(),c=this._context,m=this.innerRadius*s;c.beginPath(),c.arc(this.x0,this.y0,m,0,2*Math.PI),c.lineWidth=s===1?1.25:1.5,c.strokeStyle=this.itemColor,c.stroke()}},{key:"_drawPlayArrow",value:function(){var s=u.a(),c=this._context,m=5*s,h=4*s,g=this.x0+.5*s,y=this.y0;c.beginPath(),c.moveTo(g-h/2,y-m/2),c.lineTo(g+h/2,y),c.lineTo(g-h/2,y+m/2),c.fillStyle=this.itemColor,c.fill()}},{key:"_drawLoopCircle",value:function(){var s=u.a(),c=this._context,m=2*s;c.beginPath(),c.arc(this.x0,this.y0,m,0,2*Math.PI),c.fillStyle=this.itemColor,c.fill()}},{key:"_drawLabel",value:function(){var s=u.a(),c=this._context,m=(this.leftPadding+2*this.dottedRadius+this.labelPadding)*s,h=(this.height/2+4.5)*s;c.fillStyle=this.itemColor,c.font=this.fontStyle,c.fillText(this.label,m,h)}},{key:"_drawProgressRing",value:function(s){var c=u.a(),m=this._context,h=this.dottedRadius*c,g=2*Math.PI*.75,y=(.75+s)*(2*Math.PI);m.beginPath(),m.arc(this.x0,this.y0,h,g,y,!1),m.lineWidth=1.5*c,m.strokeStyle=this.itemColor,m.stroke()}},{key:"_drawErrorSlash",value:function(){var s=u.a(),c=this._context,m=this.dottedRadius*s,h=m*Math.sqrt(2)/2;c.beginPath(),c.moveTo(this.x0+h,this.y0+h),c.lineTo(this.x0-h,this.y0-h),c.lineWidth=1.5*s,c.strokeStyle=this.itemColor,c.stroke()}},{key:"_animateProgressRing",value:function(){var s=this,c=this.progress,m=this._previousProgress||0,h=Math.abs(c-m),g=c<m;g&&(c=m,m=this.progress);for(var y=h*this.progressRingAnimationSpeed,x=y/(1e3/60),T=h/x,w=[],D=0,j=x;D<j;D++)w.push(m+D*T);w[w.length-1]=c,g&&w.reverse(),function F(){var I=w.shift();s._redraw(I),w.length&&(s._requestedFrame=window.requestAnimationFrame(F)),I===1&&window.setTimeout(function(){s.progress=0},.25*s.progressRingAnimationSpeed)}()}},{key:"_addEventListeners",value:function(){var s=this,c=this.element,m=void 0;c.addEventListener("mouseup",function(){m=window.setTimeout(function(){s.configurePlayAction()},0)}),c.addEventListener("mouseenter",function(){m=window.setTimeout(function(){s.configurePlayAction()},0)}),c.addEventListener("mouseleave",function(){m&&window.clearTimeout(m),s.configureStopAction()})}},{key:"width",get:function(){var s=this._context;if(!s)return 0;var c=this.dottedRadius,m=this.fontStyle,h=this.label,g=this.labelPadding,y=this.leftPadding;s.font=m;var x=s.measureText(h);this._textMetrics=x;var T=h.length>0?x.width:0;return this._width=(T>2?y:-2)+2*c+2*g+Math.ceil(T/u.a())}},{key:"fontStyle",get:function(){return this.fontSize*u.a()+'pt/1 system, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica'}},{key:"x0",get:function(){return(this.dottedRadius+this.leftPadding)*u.a()}},{key:"y0",get:function(){return this.height/2*u.a()}},{key:"progress",set:function(s){typeof s=="number"&&(this._previousProgress=this._progress,this._progress=s,this.redraw())},get:function(){return this._progress}},{key:"shouldShowError",set:function(s){this._shouldShowError=!!s,this._redraw(this.progress)},get:function(){return this._shouldShowError}}],[{key:"numberOfDots",get:function(){return u.a()===1?17:26}}]),a}()},function(i,n,r){var o=r(30),p=r(0),v=r(6),u=o.a.extend({mimeType:p.a.observableProperty({dependencies:["_mimeTypeFromXHR"],get:function(f){return this._mimeTypeFromXHR||f||null}}),_mimeTypeFromXHR:p.a.observableProperty(),requiresMimeTypeForRawArrayBufferSrc:!0,exposedMimeTypeKeyForErrorStrings:"mimeType",exposedSrcKeyForErrorStrings:"src",abortCurrentLoad:function(){this.__xhr&&(this._detachXHR(),this._xhr.abort()),this._mimeTypeFromXHR=null,this.abortCurrentSecondaryLoad()},loadSrc:function(f){if(typeof f=="string"){this._mimeTypeFromXHR=null,this._attachXHR();var d=this._xhr;d.open("GET",f),d.responseType="arraybuffer",d.send(null)}else if(f instanceof ArrayBuffer){if(!this.mimeType&&this.requiresMimeTypeForRawArrayBufferSrc)throw new Error("MIME Type must be assigned to `"+this.exposedMimeTypeKeyForErrorStrings+"` prior to assigning a raw ArrayBuffer to `"+this.exposedSrcKeyForErrorStrings+"`.");this.beginSecondaryLoad(f,this.mimeType)}},get _xhr(){var f=this.__xhr;return f||(f=this.__xhr=new XMLHttpRequest),f},_detachXHR:function(){var f=this._xhr;f.removeEventListener("progress",this._xhrProgress),f.removeEventListener("readystatechange",this._xhrReadyStateChanged)},_attachXHR:function(){var f=this._xhr;f.addEventListener("progress",this._xhrProgress),f.addEventListener("readystatechange",this._xhrReadyStateChanged)},_xhrReadyStateChanged:function(){if(this.state==="loading"){if(this._xhr.readyState>=2&&this._xhr.status!==200){var f=new Error("Failed to download resource from URL assigned to '"+this.exposedSrcKeyForErrorStrings+"'.");return f.errCode=v.a.FAILED_TO_DOWNLOAD_RESOURCE,this.loadDidFail(f)}return this._xhr.readyState===4&&this._xhr.status===200?this._xhrLoadDidFinish():void 0}},_xhrProgress:function(f){if(f&&f.total){var d=(+f.loaded||0)/f.total;+d===d&&(this.progress=Math.max(0,Math.min(1,d)))}},_xhrLoadDidFinish:function(){this._mimeTypeFromXHR=this._xhr.getResponseHeader("Content-Type"),this.beginSecondaryLoad(this._xhr.response,this.mimeType)},beginSecondaryLoad:function(f,d){this._defaultSecondaryLoadTimeout=setTimeout(this.loadDidSucceed.bind(this,f),0)},abortCurrentSecondaryLoad:function(){this._defaultSecondaryLoadTimeout&&(clearTimeout(this._defaultSecondaryLoadTimeout),this._defaultSecondaryLoadTimeout=null)},init:function(){this._xhrReadyStateChanged=this._xhrReadyStateChanged.bind(this),this._xhrProgress=this._xhrProgress.bind(this),this._super()}});n.a=u},function(i,n,r){var o=r(2);n.a=o.a.isEdge||o.a.isIE},function(i,n,r){function o(){d.forEach(function(l){return l()})}function p(l){d.push(l)}function v(){return window.devicePixelRatio}function u(){return Math.ceil(v())}n.b=p,n.a=u;var f=void 0,d=[];(function(){window.matchMedia&&(f=window.matchMedia("only screen and (-webkit-min-device-pixel-ratio:1.3),only screen and (-o-min-device-pixel-ratio:13/10),only screen and (min-resolution:120dpi)"),f.addListener(o))})()},function(i,n,r){function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var p=function(){function u(f,d){for(var l=0;l<d.length;l++){var P=d[l];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(f,P.key,P)}}return function(f,d,l){return d&&u(f.prototype,d),l&&u(f,l),f}}(),v=function(){function u(f){var d=this;o(this,u),this._k=[],this._v=[],f&&f._k.forEach(function(l){d.set(l,f.get(l))})}return p(u,[{key:"_indexOfKey",value:function(f){return this._k.indexOf(f)}},{key:"get",value:function(f){var d=this._indexOfKey(f);return d===-1?void 0:this._v[d]}},{key:"set",value:function(f,d){var l=this._indexOfKey(f);return l===-1&&(l=this._k.push(f)-1),this._v[l]=d,this}},{key:"delete",value:function(f){var d=this._indexOfKey(f);return d!==-1&&(this._k.splice(d,1),this._v.splice(d,1),!0)}},{key:"clear",value:function(){this._k.length>0&&(this._k.length=0,this._v.length=0)}}]),u}();n.a=v},function(i,n,r){function o(f){if(f===null)return"_null";if(f===void 0)return"_undefined";if(f.hasOwnProperty("_LPKGUID"))return f._LPKGUID;var d=f===void 0?"undefined":p(f);switch(d){case"number":Object.is(f,-0)&&(f="-0");case"string":case"boolean":return d+f;case"object":case"function":u++;var l=d+u;return v.value=l,Object.defineProperty(f,"_LPKGUID",v),l;default:throw"unrecognized object type"}}n.a=o;var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},v={value:"",enumerable:!1,writable:!1,configurable:!1},u=0},function(i,n,r){function o(u){return r(p(u))}function p(u){var f=v[u];if(!(f+1))throw new Error("Cannot find module '"+u+"'.");return f}var v={"./en-us.lproj/strings.json":22};o.keys=function(){return Object.keys(v)},o.resolve=p,i.exports=o,o.id=21},function(i,n){i.exports={"VideoEffects.Badge":"Badge","VideoEffects.Badge.Title.Loop":"Loop","VideoEffects.Badge.Title.Bounce":"Bounce","VideoEffects.Badge.Title.LongExposure":"Long Exposure"}},function(i,n,r){var o=r(28),p=r(32),v=r(34),u=r(37),f=r(35),d=r(4),l=r(0),P=r(8),_=r(5),a=r(1);v.a.register(),u.a.register(),f.a.register();var s=P.a.extend({approach:"",autoplay:!0,caption:"",_hasInitialized:!1,_lastRecipe:null,recipe:l.a.observableProperty({get:function(){var c=d.a.getRecipeFromPlaybackStyle(this.playbackStyle);return this._setRecipe(c),c},set:function(c){this._setRecipe(c)}}),_setRecipe:function(c){c&&c!==this._lastRecipe&&(this._lastRecipe=c,this.setUpRenderLayers())},requestMoreCompatibleRecipe:function(){this.recipe=this.recipe.requestMoreCompatibleRecipe()},duration:l.a.observableProperty({dependencies:["recipe","provider.videoDuration","provider.photoTime"],get:function(c){var m=this.recipe,h=this.provider,g=h.photoTime,y=h.videoDuration;return m?m.calculateAnimationDuration(c,y,g):0}}),displayWidth:0,displayHeight:0,get backingWidth(){return Math.round(this.displayWidth*devicePixelRatio)},get backingHeight(){return Math.round(this.displayHeight*devicePixelRatio)},get renderLayerWidth(){return this.displayWidth},get renderLayerHeight(){return this.displayHeight},get videoWidth(){return this.videoDecoder.videoWidth},get videoHeight(){return this.videoDecoder.videoHeight},photoWidth:l.a.proxyProperty("photo.width"),photoHeight:l.a.proxyProperty("photo.height"),photo:l.a.proxyProperty("provider.photo"),video:l.a.proxyProperty("provider.video"),photoTime:l.a.proxyProperty("provider.photoTime"),frameTimes:l.a.proxyProperty("provider.frameTimes"),effectType:l.a.proxyProperty("provider.effectType"),preloadedEffectType:l.a.proxyProperty("provider.preloadedEffectType"),playbackStyle:l.a.proxyProperty("provider.playbackStyle"),currentTime:l.a.observableProperty({defaultValue:0,dependencies:["duration"],get:function(c){return Math.min(this.duration||0,Math.max(0,c||0))},didChange:function(c){this.prepareToRenderAtTime(c)}}),canRenderCurrentTime:l.a.observableProperty({readOnly:!0,dependencies:["currentTime"],get:function(){return this.canRenderAtTime(this.currentTime)}}),_currentTimeRenderObserver:l.a.observer("currentTime","canRenderCurrentTime",function(c,m){m&&(this.renderedTime=c)}),renderedTime:l.a.observableProperty({defaultValue:0,didChange:function(c){this.renderAtTime(c),this.currentTime=c}}),areAllRenderLayersPrepared:l.a.observableProperty({defaultValue:!1}),isFullyPreparedForPlayback:l.a.observableProperty({readOnly:!0,dependencies:["video","areAllRenderLayersPrepared","photoTime","frameTimes","playbackStyle"],get:function(){return!!(this.video&&this.areAllRenderLayersPrepared&&(this.photoTime||this.playbackStyle!==a.a.HINT)&&Array.isArray(this.frameTimes))}}),cannotRenderDueToMissingPhotoTimeOrFrameTimes:l.a.observableProperty({readOnly:!0,dependencies:["video","areAllRenderLayersPrepared","photoTime","frameTimes","playbackStyle"],get:function(){return!!(this.video&&this.areAllRenderLayersPrepared&&(!this.photoTime&&this.playbackStyle===a.a.HINT||!Array.isArray(this.frameTimes)))}}),renderLayers:l.a.property(function(){return[]}),videoDecoder:l.a.observableProperty(function(){return this._videoDecoderClass.create({owner:this})}),_videoDecoderClass:o.a.extend({owner:l.a.observableProperty(),provider:l.a.proxyProperty("owner.provider")}),provider:l.a.observableProperty(function(){return p.a.create()}),init:function(){this._super(),this.element.className=((this.element.className||"")+" lpk-live-photo-renderer").trim(),this.element.style.position="absolute",this.element.style.overflow="hidden",this.element.style.textAlign="left"},updateSize:function(c,m){if(!arguments.length)return void(this.displayWidth&&this.displayHeight&&this.updateSize(this.displayWidth,this.displayHeight));this.displayWidth=c=Math.round(c),this.displayHeight=m=Math.round(m),this.element.style.width=c+"px",this.element.style.height=m+"px";for(var h,g=0;h=this.renderLayers[g];g++)h.updateSize(this.renderLayerWidth,this.renderLayerHeight)},_imageOrVideoDidEnterOrLeave:l.a.observer("videoDecoder.canProvideFrames","photo",function(){this.prepareToRenderAtTime(this.currentTime)}),prepareToRenderAtTime:l.a.boundFunction(function(c){this.propertyChanged("canRenderCurrentTime");for(var m,h=!0,g=0;m=this.renderLayers[g];g++)h=m.prepareToRenderAtTime(c)&&h;this.areAllRenderLayersPrepared=h}),canRenderAtTime:function(c){if(c===0)return!0;if(!this.duration&&c)return!1;for(var m,h=!0,g="",y=0;m=this.renderLayers[y];y++)m.canRenderAtTime(c)||(h=!1,g+=(g?", ":"Cannot render; waiting for ")+m.layerName);return g&&_.a.log(g+"."),h},renderAtTime:function(c){if(this.duration)for(var m,h=0;m=this.renderLayers[h];h++)m.renderAtTime(c)},getNewRenderLayers:function(){return this.recipe.getRenderLayers(this)},setUpRenderLayers:function(){var c=this.renderLayers;c&&this._cleanUpRenderLayers(c),this.renderLayers=this.getNewRenderLayers(),this.updateSize(),this.currentTime=0,this.prepareToRenderAtTime(0)},_cleanUpRenderLayers:function(c){for(var m,h=0;m=c[h];h++)m.dispose(),m.tearDownFromRender()},reduceMemoryFootprint:function(){for(var c,m=0;c=this.renderLayers[m];m++)c.reduceMemoryFootprint()},_clearRetainedFramesWhenNecessary:l.a.observer("provider.videoRotation","provider.frameTimes",function(){this.reduceMemoryFootprint(),this.prepareToRenderAtTime(this.currentTime)})});n.a=s},function(i,n,r){var o=r(23),p=o.a.extend({approach:"dom"});n.a=p},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(14),p=r(9),v=r(10),u=r(11);r.d(n,"augmentElementAsPlayer",function(){return u.a}),r.d(n,"createPlayer",function(){return u.b}),r.d(n,"Player",function(){return u.c});var f=r(6);r.d(n,"Errors",function(){return f.a});var d=r(15);r.d(n,"LivePhotoBadge",function(){return d.a});var l=r(1);r.d(n,"PlaybackStyle",function(){return l.a}),r.d(n,"Localization",function(){return P}),r.d(n,"BUILD_NUMBER",function(){return _}),r.d(n,"MASTERING_NUMBER",function(){return a}),r.d(n,"VERSION",function(){return s}),r.d(n,"LIVEPHOTOSKIT_LOADED",function(){return c});var P={get locale(){return v.a.locale},set locale(b){v.a.locale=b}},_=o.a.BUILD_NUMBER,a=o.a.MASTERING_NUMBER,s=o.a.VERSION,c=o.a.LIVEPHOTOSKIT_LOADED,m=typeof window<"u"&&typeof document<"u";if(m){var h=window.document;if(setTimeout(function(){return h.dispatchEvent(r.i(p.a)())}),h.styleSheets&&document.head){for(var g=null,y=null,x=0;x<h.styleSheets.length;++x)try{var T=h.styleSheets[x];if(T.cssRules)for(var w=0;w<T.cssRules.length;++w){var D=T.cssRules[w];if(D.cssText.indexOf(".lpk-live-photo-player")!==-1){g=D;break}}if(g){y=T;break}}catch(b){if(b.name!=="SecurityError"&&b.message.substring(0,17)!=="Access is denied."&&b.message.substring(0,17)!=="Member not found.")throw b}if(!y){var j=document.createElement("style");j.type="text/css",document.head.appendChild(j),y=j.sheet}var F="user-select: none;-khtml-user-select: none; -moz-user-select: none;-ms-user-select: none;-webkit-touch-callout: none; -webkit-user-select: none;";y.addRule?y.addRule(".lpk-live-photo-player",F):y.insertRule&&y.insertRule(".lpk-live-photo-player {"+F+"}",0)}}if(m&&document.querySelectorAll instanceof Function){var I=function(){O=!0,Array.prototype.forEach.call(document.querySelectorAll("[data-live-photo]"),function(b){return r.i(u.a)(b)})},Y=function(){!O&&J&&re&&I()},J=/interactive|complete|loaded/.test(document.readyState),re=!!window.LivePhotosKit,O=!1;J||document.addEventListener("DOMContentLoaded",function(){J=!0,Y()}),re||document.addEventListener("livephotoskitloaded",function(){re=!0,Y()}),Y()}},function(i,n,r){var o=r(8),p=r(18),v=r(15);r.d(n,"a",function(){return u});var u=o.a.extend({badgeView:null,init:function(){var f=this;this._super(),this._createBadgeView(),p.b(function(){return f.badgeView.redraw()})},_createBadgeView:function(){this.badgeView=new v.a,this.element.appendChild(this.badgeView.element);var f=this.badgeView.element.style;f.top="10px",f.left="10px",f.position="absolute",f.zIndex=4},updateToRendererLayout:function(f,d,l,P){var _=this.badgeView,a=_.element.style;a.left=f+10+"px",a.top=d+10+"px",a.right=""},redraw:function(){this.badgeView.redraw()}})},function(i,n,r){function o(m){if(Array.isArray(m)){for(var h=0,g=Array(m.length);h<m.length;h++)g[h]=m[h];return g}return Array.from(m)}function p(m){if(!m)return!1;try{m.appendChild(c),m.removeChild(c)}catch{return!1}return!0}var v=r(8),u=r(24),f=r(26),d=r(54),l=r(0),P=r(9),_=r(53),a=r(1),s=v.a.extend({staticMembers:{activeInstance:l.a.observableProperty(null)},renderer:l.a.observableProperty(function(){return u.a.create()}),showsNativeControls:l.a.observableProperty(!0),isPlaying:l.a.observableProperty(!1),wantsToPlay:l.a.observableProperty({defaultValue:!1,didChange:function(m){m&&(this.constructor.activeInstance=this)}}),canPlay:l.a.observableProperty({readOnly:!0,dependencies:["isPlaying","renderer.isFullyPreparedForPlayback"],get:function(){return this.isPlaying||this.renderer.isFullyPreparedForPlayback},didChange:function(m){m&&(this._hasHadCanPlay=!0,this.dispatchEvent(r.i(P.b)()),this.wantsToPlay&&this.play())}}),_generateErrorIfPlayedWithoutNecessaryMetadata:l.a.observer("renderer.cannotRenderDueToMissingPhotoTimeOrFrameTimes","wantsToPlay",function(m){m&&this.wantsToPlay&&(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=new Error("The `photoTime` and/or `frameTimes` values are missing. Provide them directly (or via `metadataVideoSrc`) if they cannot be parsed from the video.")),m||(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=null)}),_cannotRenderDueToMissingPhotoTimeOrFrameTimesError:l.a.observableProperty(),_playerErrors:l.a.observableProperty({readOnly:!0,dependencies:["_cannotRenderDueToMissingPhotoTimeOrFrameTimesError"],get:function(){var m=this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError;return m?[m]:null}}),_captionChanged:l.a.observer("caption",function(m){var h="";m&&(h=": "+m),this.element.setAttribute("aria-label","Live Photo"+h)}),_effectTypeChanged:l.a.observer("effectType",function(m){this.badgeView&&m&&this.updateBadgeText()}),errors:l.a.observableProperty({readOnly:!0,dependencies:["provider.errors","_playerErrors"],get:function(){var m=this.provider.errors,h=this._playerErrors,g=[];return m&&m.length&&g.push.apply(g,o(m)),h&&h.length&&g.push.apply(g,o(h)),g}}),lastError:l.a.observableProperty({dependencies:["provider.lastError"],get:function(m){return m||this.provider.lastError||null},didChange:function(m){m&&(this.throwError(m),this.stop())}}),playbackRate:l.a.proxyProperty("renderer.videoDecoder.playbackRate"),currentTime:l.a.proxyProperty("renderer.currentTime"),renderedTime:l.a.proxyProperty("renderer.renderedTime"),duration:l.a.proxyProperty("renderer.duration"),videoWidth:l.a.proxyProperty("renderer.videoWidth"),videoHeight:l.a.proxyProperty("renderer.videoHeight"),photoWidth:l.a.proxyProperty("renderer.photoWidth"),photoHeight:l.a.proxyProperty("renderer.photoHeight"),recipe:l.a.proxyProperty("renderer.recipe"),requiresInterpolation:l.a.proxyProperty("renderer.recipe.requiresInterpolation"),effectType:l.a.proxyProperty("provider.effectType"),preloadedEffectType:l.a.proxyProperty("renderer.preloadedEffectType"),playbackStyle:l.a.proxyProperty("renderer.playbackStyle"),provider:l.a.proxyProperty("renderer.provider"),proactivelyLoadsVideo:l.a.proxyProperty("provider.proactivelyLoadsVideo"),metadataVideoSrc:l.a.proxyProperty("provider.metadataVideoSrc"),photoMimeType:l.a.proxyProperty("provider.photoMimeType"),photoSrc:l.a.proxyProperty("provider.photoSrc"),photo:l.a.proxyProperty("provider.photo"),videoMimeType:l.a.proxyProperty("provider.videoMimeType"),videoSrc:l.a.proxyProperty("provider.videoSrc"),video:l.a.proxyProperty("provider.video"),photoTime:l.a.proxyProperty("provider.photoTime"),frameTimes:l.a.proxyProperty("provider.frameTimes"),videoRotation:l.a.proxyProperty("provider.videoRotation"),loadProgress:l.a.proxyProperty("provider.progress"),autoplay:l.a.proxyProperty("renderer.autoplay"),caption:l.a.proxyProperty("renderer.caption"),_isZeroSizeWarningLogged:l.a.observableProperty(!1),_renderWhenPossible:l.a.observer("renderer.video","renderer.photo",function(){if(this._cannotRenderDueToMissingPhotoTimeOrFrameTimesError=null,this.updateSize(!0),!this._isZeroSizeWarningLogged){var m=this.element.getBoundingClientRect();m.width!==0&&m.height!==0||(console.warn("The LivePhotosKit Player located at position ("+m.left+", "+m.top+") in the viewport has either a zero width or zero height (or both) and will not render. To fix this, ensure that the Player has a style that will yield a non-zero width and height."),this._isZeroSizeWarningLogged=!0)}}),attachBadgeView:function(m){var h=this;this.badgeView=m,this.updateBadgeText(),m.configurePlayAction(function(){return h.play()}),m.configureStopAction(function(){return h.beginFinishingPlaybackEarly()})},updateBadgeText:function(){this.badgeView.updateBadgeText(this.effectType)},nativeControls:l.a.observableProperty({readOnly:!0,dependencies:["showsNativeControls"],get:function(){var m=this;return this.showsNativeControls?this._nativeControls_cachedValue||(this._nativeControls_cachedValue=f.a.extend({owner:l.a.observableProperty(this),_slurpProgress:l.a.observer("owner.provider.progress",function(h){this.badgeView&&(this.badgeView.progress=h)}),_slurpError:l.a.observer("owner.errors",function(h){this.badgeView&&(this.badgeView.shouldShowError=!!h&&h.length>0)}),init:function(){this._super.apply(this,arguments),m.attachBadgeView(this.badgeView)}}).create()):null},didChange:function(m){this._nativeControls_previousValue&&this._nativeControls_previousValue.detach(),this._nativeControls_previousValue=m,m&&m.attachInto(this)}}),init:function(m,h){var g=this;if(m&&!p(m))throw"Any pre-existing element provided for use as a LivePhotosKit.Player must be able to append child DOM nodes.";m&&m.childNodes.length&&(m.innerHTML="");for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(this[y]=h[y]);switch(this._super(m),this.element.className.indexOf("lpk-live-photo-player")<0&&(this.element.className=this.element.className+" lpk-live-photo-player"),this.element.setAttribute("role","image"),r.i(_.a)(this.element,"position")||this.element.style.position){case"absolute":case"fixed":case"relative":break;default:this.element.style.position="relative"}switch(r.i(_.a)(this.element,"display")||this.element.style.display){case"block":case"inline-block":case"table":case"table-caption":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row-group":case"table-cell":case"table-column":case"table-row":break;default:this.element.style.display="inline-block"}this.renderer.attachInto(this),this.renderer.eventDispatchingElement=this.element,window.addEventListener("resize",this.updateSize),"ontouchstart"in document.documentElement&&(this.addEventListener("touchstart",function(){return g.play()},!1),this.addEventListener("touchend",function(){return g.beginFinishingPlaybackEarly()},!1))},play:function(){if(!this.isPlaying){var m=this.provider;m.video||(m.needsLoadedVideoForPlayback=!0),this.wantsToPlay=!0,this.canPlay&&(this.isPlaying=!0,this._lastFrameNow=Date.now(),this._nextFrame())}return this.isPlaying},pause:function(){this.isPlaying=!1,this.wantsToPlay=!1,this._cancelNextFrame()},stop:function(){this.pause(),this.currentTime=0,this.renderer.duration=NaN},toggle:function(){this.wantsToPlay?this.pause():this.play()},beginFinishingPlaybackEarly:function(){this.recipe.beginFinishingPlaybackEarly(this)},_stopWhenAnotherPlayerStarts:l.a.observer("_constructor.activeInstance",function(m){m&&m!==this&&(this.stop(),this.renderer.reduceMemoryFootprint())}),_constructor:l.a.observableProperty(function(){return s}),_stopPlaybackWhenItemsLoadOrUnload:l.a.observer("video","photo",function(){!this.isPlaying||this.playbackStyle===a.a.LOOP&&this.autoplay||this.stop()}),addEventListener:function(m,h,g){var y=this.element;y.addEventListener.call(y,m,h,g)},removeEventListener:function(m,h,g){var y=this.element;y.removeEventListener.call(y,m,h,g)},_nextFrame:function(){var m=Date.now(),h=(m-this._lastFrameNow)*this.playbackRate;this._lastFrameNow=m,this.currentTime===this.renderedTime&&(this.currentTime+=h/1e3),this.recipe&&this.recipe.continuePlayback(this)},_cancelNextFrame:function(){cancelAnimationFrame(this._rafID)},updateSize:l.a.boundFunction(function(m,h){if(this.photoWidth&&this.photoHeight){var g=m===!0?void 0:m,y=m===!0?m:void 0;if(isNaN(g)||isNaN(h)?(g=this.element.offsetWidth,h=this.element.offsetHeight):(g=Math.round(g),h=Math.round(h),this.element.style.width=g+"px",this.element.style.height=h+"px"),g&&h){if(this._lastUpdateChangeToken===(this._lastUpdateChangeToken=g+":"+h)&&!y)return!1;var x=r.i(d.a)(this.photoWidth,this.photoHeight,g,h),T=Math.ceil(x.height),w=Math.ceil(x.width),D=Math.floor(g/2-w/2),j=Math.round(h/2-T/2),F=this.renderer;F.element.style.top=j+"px",F.element.style.left=D+"px",F.updateSize(w,T),this.displayWidth=g,this.displayHeight=h,this.nativeControls&&this.nativeControls.updateToRendererLayout(D,j,w,T)}}}),_dispatchPhotoLoadEventOnNewPhoto:l.a.observer("photo",function(m){m&&this.dispatchEvent(r.i(P.c)())}),_dispatchVideoLoadEventOnNewVideo:l.a.observer("video",function(m){m&&this.dispatchEvent(r.i(P.d)())}),throwError:function(m){this.dispatchEvent(r.i(P.e)({error:m,errorCode:m.errCode}))}}),c=document.createElement("div");n.a=s},function(i,n,r){function o(){c=!1}function p(){}function v(h,g){return-(h.importance-g.importance)||h.number-g.number}function u(h,g){for(var y=0,x=h.length,T=0;T<x-y;T++)if(h[T]===g&&(y++,T--),y){var w=T+1;h[w]=h[w+y]}return h.length-=y,h}var f=r(52),d=r(29),l=r(0),P=r(17),_=r(2),a=location.href.indexOf("_lpk_play_to_decode=true")!==-1||location.href.indexOf("_lpk_play_to_decode=false")===-1&&!_.a.isSafari&&!_.a.isIOS,s=location.href.indexOf("_lpk_persistent_frames=true")!==-1||(location.href.indexOf("_lpk_persistent_frames=false"),!1),c=!0,m=l.a.Object.extend({id:l.a.property(function(){return r.i(f.a)()}),provider:l.a.observableProperty(),video:l.a.proxyProperty("provider.video"),duration:l.a.proxyProperty("provider.videoDuration"),videoRotation:l.a.proxyProperty("provider.videoRotation"),frameTimes:l.a.proxyProperty("provider.frameTimes"),requiresInterpolation:l.a.proxyProperty("renderer.recipe.requiresInterpolation"),get frameCount(){var h=this.frameTimes;return h?h.length:0},shouldPrepareToSeek:!1,canProvideFrames:l.a.observableProperty({readOnly:!0,dependencies:["video"],get:function(){return!!this.video}}),videoWidth:l.a.observableProperty({readOnly:!0,dependencies:["video","videoRotation"],get:function(){var h=this.video;if(h)return this.videoRotation%180==0?h.videoWidth:h.videoHeight}}),videoHeight:l.a.observableProperty({readOnly:!0,dependencies:["video","videoRotation"],get:function(){var h=this.video;if(h)return this.videoRotation%180==0?h.videoHeight:h.videoWidth}}),playbackRate:l.a.observableProperty(1),_sendPlaybackRateToVideo:l.a.observer("playbackRate","video",function(h,g){g&&(g.playbackRate=h)}),_pendingFrames:l.a.property(function(){return[]}),init:function(){this._largeCanvas=document.createElement("canvas"),this._largeContext=this._largeCanvas.getContext("2d"),this._super.apply(this,arguments)},_handleVideoChange:l.a.observer("video",function(){var h=this.video,g=this._lastVideo;if(this._lastVideo=h,h!==g&&(g&&this.cleanUpOldVideo(g),h&&this.setUpNewVideo(h),h&&s))for(var y=P.a?1:0;this.frameTimes&&y<this.frameTimes.length;y++)this.getFrame(y).retain()}),setUpNewVideo:function(h){h.addEventListener("seeked",this._seeked),h.muted=!0},cleanUpOldVideo:function(h){h.removeEventListener("seeked",this._seeked),h.playbackRate=1,h.muted=!1,h.pause(),this._stopSeekingEntirely()},fractionalIndexForTime:function(h){if(h=Math.min(this.duration,Math.max(0,h)),isNaN(h))return h;var g=this.frameTimes,y=g.length,x=void 0;for(x=0;x<y&&g[x]<h;x++);x&&x--;var T=g[x],w=g[x+1];return w?x+Math.min(1,(h-T)/(w-T)):x},timeForFractionalIndex:function(h){if(h<=0)return 0;if(h>=this.frameTimes.length)return this.duration;var g=0|h,y=Math.ceil(h);if(g===y)return this.frameTimes[g];var x=this.frameTimes[g],T=y<this.frameTimes.length?this.frameTimes[y]:this.duration;return T?x+(h-g)*(T-x):x},getFrame:function(h,g){if(!this.frameTimes)throw"Attempted to get frame before ready.";if(isNaN(this.frameTimes[h]))throw"Frame number "+h+" is is not a frame in the video.";var y=d.a.getCached(this,h);return isNaN(g)||(y.importance=Math.max(y.importance,g)),y.readyState||(this._pendingFrames.push(y),this._pendingFrames.sort(v),y.didPend(),this._isSeeking||this._scheduleArtificialSeek()),y},peekFrame:function(h){var g=d.a.peekCached(this,h);return g&&g.readyState===2&&!g.lacksOwnPixelData?g:null},getNearestDecodedFrame:function(h){for(var g=Math.max(h,this.frameTimes.length-1-h),y=-1;++y<=g;){var x=this.peekFrame(h+y)||this.peekFrame(h-y);if(x)return x}return null},_scheduleArtificialSeek:function(){this._artificialSeekTimeout||(this._artificialSeekTimeout=setTimeout(this._seeked),this._artificialSeekRAFId=requestAnimationFrame(this._seeked))},_unscheduleArtificialSeek:function(){this._artificialSeekTimeout&&(clearTimeout(this._artificialSeekTimeout),this._artificialSeekTimeout=null,cancelAnimationFrame(this._artificialSeekRAFId),this._artificialSeekRAFId=null)},_stopSeekingEntirely:function(){this._unscheduleArtificialSeek(),this._isPlaying=!1,this._isSeeking=!1,this._expectedNextSeenFrameNumber=NaN,this.video&&this.video.pause()},_seeked:l.a.boundFunction(function(h){var g=this._pendingFrames;if((g.length!==0||this.requiresInterpolation)&&!(h instanceof Event&&h.target!==this.video)&&(h instanceof Event||this.video)){this._unscheduleArtificialSeek(),this._isSeeking=!1;var y=this.fractionalIndexForTime(this.video.currentTime);y|=0;for(var x,T=NaN,w=0;x=g[w];w++)if(x.number===y){T=y,x.didDecode(),this._removePendingFrame(x);break}var D=this._expectedNextSeenFrameNumber;if(this._expectedNextSeenFrameNumber=NaN,D<T)for(var j,F=0;j=g[F];F++)j.number>=D&&j.number<T&&(j.didGetSkipped(),this._removePendingFrame(j),F--);var I=g[0];if(!I)return this._isPlaying&&this.requiresInterpolation&&(this._isPlaying=!1,this.video.pause()),void(this._expectedNextSeenFrameNumber=NaN);var Y=I.number>y&&I.number<=y+2&&c;if(a||(Y=!1),Y){if(!this._isPlaying){this._isPlaying=!0;try{var J=this.video.play();J&&J.then instanceof Function&&J.then(p,o)}catch{c=!1}}this._expectedNextSeenFrameNumber=I.number,this._scheduleArtificialSeek()}else this._isPlaying&&(this._isPlaying=!1,this.video.pause()),this._expectedNextSeenFrameNumber=NaN,this.video.currentTime=I.time+1e-4,this._isSeeking=!0}}),_frameWillDispose:function(h){this._removePendingFrame(h)},_removePendingFrame:function(h){u(this._pendingFrames,h),this._pendingFrames.length||this._unscheduleArtificialSeek()}});n.a=m},function(i,n,r){function o(s){s.container=document.createElement("div"),s.container.frame=s,s.container.innerHTML='<div style="position:absolute; left:0; right:0; top:0; bottom:0; text-align:center; line-height:30px; color:white; text-shadow: black 0px 0px 4px,black 0px 0px 4px,black 0px 0px 4px,black 0px 0px 4px; font-family:HelveticaNeue-Light;"></div>',s.textBox=s.container.lastChild,s.container.insertBefore(s.image,s.textBox),s.image.style.position="absolute",s.container.style.cssText="position:relative; display:inline-block; border: 1px solid black;";var c=s._debug_aspect||(s._debug_aspect=s.videoDecoder&&(s.videoDecoder.videoWidth>s.videoDecoder.videoHeight?"landscape":"portrait"));s.container.style.width=s.image.style.width=c==="landscape"?"40px":"30px",s.container.style.height=s.image.style.height=c==="landscape"?"30px":"40px",document.body.appendChild(s.container)}var p=r(12),v=r(48),u=r(5),f=r(0),d=r(46),l=r(2);r.d(n,"a",function(){return P});var P=f.a.Object.extend(d.a,v.a,{staticMembers:{getPoolingCacheKey:function(s,c){return"f"+c+"_in_"+s.id}},container:null,image:null,_context:null,number:-1,time:-1,importance:0,videoDecoder:null,readyState:0,_poolingCacheKey:null,_debugShowInDOM:p.a,lacksOwnPixelData:!1,_postDispose:function(){this.image.width=this.image.height=0},get backingFrame(){return this.lacksOwnPixelData?this.videoDecoder.getNearestDecodedFrame(this.number)||this:this},init:function(){this._postDispose=this._postDispose.bind(this);var s=this.image=document.createElement("canvas");this._context=this.image.getContext("2d"),this._super(),this._debugShowInDOM?o(this):a&&(a.appendChild(s),s.style.cssText="position: absolute; top: 0px; width:1px; height: 1px; display: inline-block;",s.style.left=_+++"px")},initFromPool:function(s,c){clearTimeout(this._postDisposalTimeout),this.videoDecoder=s,this.number=c,this.time=s.frameTimes[c],this._debugShowInDOM&&(this.textBox.innerHTML=this.number)},dispose:function(){this.resetReadiness(),this.videoDecoder._frameWillDispose(this),this.number=this.time=-1,this.importance=0,this.videoDecoder=null,this.readyState=0,this.lacksOwnPixelData=!1,this._postDisposalTimeout=setTimeout(this._postDispose,3e3),this.constructor._disposeInstance(this),this._debugShowInDOM&&(this.textBox.innerHTML="x",this.textBox.style.color="#FF0000",this._context.clearRect(0,0,this.image.width,this.image.height))},didPend:function(){this.readyState=1,this._debugShowInDOM&&(this.textBox.style.color="#FF8800")},didDecode:function(){this.obtainPixelData(),this.readyState=2,this.resolveReadiness(this),this._debugShowInDOM&&(this.textBox.style.color="#00FF00")},obtainPixelData:function(){var s=this.image,c=this._context,m=this.videoDecoder,h=m.videoRotation,g=m.videoWidth,y=m.videoHeight,x=h%180==0?g:y,T=h%180==0?y:g;s.width===g&&s.height===y||(s.width=g,s.height=y),l.a.isFirefox&&c.getImageData(0,0,1,1);for(var w=0;w<h;w+=90)c.translate(w%180?y:g,0),c.rotate(Math.PI/2);c.drawImage(m.video,0,0,x,T),c.setTransform(1,0,0,1,0,0)},didGetSkipped:function(){u.a.log("    Skipped decoding frame "+this.number+". Using nearest frame instead."),this.lacksOwnPixelData=!0,this.readyState=2,this.resolveReadiness(this),this._debugShowInDOM&&(this._context.fillStyle="red",this._context.fillRect(0,0,this.image.width,this.image.height),this.textBox.style.color="#00FF00")}}),_=0,a=function(){if(!l.a.isIE&&!l.a.isEdge)return null;var s=document.createElement("div");return s.style.cssText="top: 0px; left: 0px; width: 50px; height: 1px; overflow: hidden; position: absolute; z-index: 100000; opacity: 0.001; pointer-events: none;",document.body?document.body.appendChild(s):setTimeout(function(){return document.body.appendChild(s)},0),s}()},function(i,n,r){var o=r(0),p=o.a.Object.extend({state:o.a.observableProperty("unloaded"),validateResult:function(v){return!!v},loadSrc:function(v){},abortCurrentLoad:function(){},isSrcLoadAllowed:o.a.observableProperty(!0),_loadSrcOnceAllowed:o.a.observer("isSrcLoadAllowed",function(v){if(v&&this.state==="unloaded"){var u=this.src;u&&(this.state="loading",this.loadSrc(u))}}),src:o.a.observableProperty({didChange:function(v){this._isWritingSrcDueToWritingOfResult||(this._isWritingResultDueToWritingOfSrc=!0,this.result=null,this._isWritingResultDueToWritingOfSrc=!1,this.abortCurrentLoad(),v&&this.isSrcLoadAllowed?(this.state="loading",this.loadSrc(v)):this.state="unloaded")}}),result:o.a.observableProperty({decideRequiresUpdate:function(){return!0},didChange:function(v){if(!this._isWritingResultDueToWritingOfSrc){var u=this.validateResult(v)?"loaded":v||this._isWritingResultDueToError?"errored":"unloaded";this._isWritingResultDueToLoadOfSrc||this._isWritingResultDueToError||(this._isWritingSrcDueToWritingOfResult=!0,this.src=null,this._isWritingSrcDueToWritingOfResult=!1,this.abortCurrentLoad(),this.state="unloaded"),this.state=u}}}),error:o.a.observableProperty(null),_clearErrorOnceNoLongerErrored:o.a.observer("state",function(v){v!=="errored"&&(this.error=null)}),progress:o.a.observableProperty({defaultValue:0,dependencies:["state"],get:function(v){return this.state==="loading"?Math.min(1,Math.max(0,+v||0)):this.state==="loaded"?1:0}}),_clearProgressOnceUnloaded:o.a.observer("state",function(v){v==="unloaded"&&(this.progress=0)}),loadDidFail:function(v){this.state==="loading"&&(this._isWritingResultDueToError=!0,this.result=null,this._isWritingResultDueToError=!1,this.error=v)},loadDidSucceed:function(v){this.state==="loading"&&(this._isWritingResultDueToLoadOfSrc=!0,this.result=v,this._isWritingResultDueToLoadOfSrc=!1,this.error=null)}});n.a=p},function(i,n,r){function o(_,a,s){var c=_.getContext("2d"),m=s===7||s===8?270:s===3||s===4?180:s===5||s===6?90:0,h=a.naturalWidth,g=a.naturalHeight,y=m%180==0?h:g,x=m%180==0?g:h,T=s===2||s===4?-1:1,w=s===5||s===7?-1:1;_.width===y&&_.height===x||(_.width=y,_.height=x);for(var D=0;D<m;D+=90)c.translate(D%180?x:y,0),c.rotate(Math.PI/2);c.scale(T,w),c.translate((T-1)/2*h,(w-1)/2*g),c.drawImage(a,0,0),c.setTransform(1,0,0,1,0,0)}var p=r(16),v=r(51),u=r(6),f=r(3),d=[],l={},P=p.a.extend({mimeType:"image/jpeg",beginSecondaryLoad:function(_,a){var s=r.i(v.a)(_);this._exifOrientationInLastLoadedBuffer=s.orientation||NaN,s.photosRenderEffect===3&&(this.effectType=f.a.EXPOSURE),d[0]=_,l.type=a,this._internalImage.src=this._internalImageSrc=URL.createObjectURL(new Blob(d,l)),(window.photoBuffers||(window.photoBuffers=[])).push(_)},abortCurrentSecondaryLoad:function(){this.__internalImage&&this._internalImage.removeAttribute("src"),this._internalImageSrc&&(URL.revokeObjectURL(this._internalImageSrc),this._internalImageSrc=null),this._exifOrientationInLastLoadedBuffer=null,this.effectType=null},get _internalImage(){var _=this.__internalImage;return _||(_=this.__internalImage=new Image,_.addEventListener("load",this._internalImageLoadDidSucceed.bind(this)),_.addEventListener("error",(function(a){this.loadDidFail(a)}).bind(this))),_},get _internalCanvas(){return this.__internalCanvas||(this.__internalCanvas=document.createElement("canvas"))},loadDidFail:function(_){if(_)return _.errCode=u.a.PHOTO_FAILED_TO_LOAD,this._super(_)},_internalImageLoadDidSucceed:function(){var _=this._internalImage;this._exifOrientationInLastLoadedBuffer!==1&&(o(this._internalCanvas,this._internalImage,this._exifOrientationInLastLoadedBuffer),_=this._internalCanvas),this.loadDidSucceed(_)}});n.a=P},function(i,n,r){var o=r(0),p=r(33),v=r(31),u=r(3),f=r(1),d=o.a.Object.extend({videoSrc:o.a.proxyProperty("_videoProvider.src"),videoMimeType:o.a.proxyProperty("_videoProvider.mimeType"),video:o.a.proxyProperty("_videoProvider.result"),effectType:o.a.observableProperty({dependencies:["_photoProvider.effectType","_videoProvider.effectType","preloadedEffectType"],get:function(){return this._photoProvider.effectType||this._videoProvider.effectType||this.preloadedEffectType||u.a.default},didChange:function(l){this.setPlaybackStyle(l)}}),preloadedEffectType:o.a.observableProperty({get:function(l){return l},set:function(l){return this._photoProvider.effectType=null,this._videoProvider.effectType=null,l}}),setPlaybackStyle:function(l){this.effectType=l,this.playbackStyle=u.a.toPlaybackStyle(l)},photoSrc:o.a.proxyProperty("_photoProvider.src"),photoMimeType:o.a.proxyProperty("_photoProvider.mimeType"),photo:o.a.proxyProperty("_photoProvider.result"),playbackStyle:o.a.observableProperty(f.a.default),metadataVideoSrc:o.a.proxyProperty("_metadataVideoProvider.src"),progress:o.a.observableProperty({readOnly:!0,dependencies:["_photoProvider.progress","_videoProvider.state","_videoProvider.progress","_metadataVideoProvider.state","_metadataVideoProvider.progress"],get:function(){var l=this._videoProvider,P=this._metadataVideoProvider,_=l.state,a=P.state,s=_!=="unloaded"||a!=="unloaded"?.75:0,c=s?a==="unloaded"?l.progress:(l.progress+P.progress)/2:0;return this._photoProvider.progress*(1-s)+c*s}}),photoTime:o.a.observableProperty({dependencies:["_metadataVideoProvider.photoTime","_videoProvider.photoTime"],get:function(l){return+l===l?l:this._metadataVideoProvider.photoTime||this._videoProvider.photoTime||null}}),videoRotation:o.a.observableProperty({dependencies:["_videoProvider.videoRotation"],get:function(l){if(+l===l)return l;var P=this._videoProvider.videoRotation;return+P===P?P:null},set:function(l){return 90*Math.round(l/90)%360|0}}),frameTimes:o.a.observableProperty({dependencies:["_metadataVideoProvider.frameTimes","_videoProvider.frameTimes"],get:function(l){return l||this._metadataVideoProvider.frameTimes||this._videoProvider.frameTimes},set:function(l){if(!l)return null;if(typeof l=="string"){var P=o.a.arrayPool.get();o.a.String.splitIntoArray(l,",",P),o.a.Array.mapIntoArray(P,function(h){return Number(h.trim())},P),l=P}for(var _=Array.isArray(l),a=_&&l.length>=2,s=0,c=l.length;s<c&&a;s++){var m=l[s];+m!==m&&(a=!1)}if(!a)throw new Error("If frameTimes is provided, it must be provided as an Array or comma-delimited string containing numbers.");return l}}),videoDuration:o.a.observableProperty({readOnly:!0,dependencies:["frameTimes"],get:function(){return this.frameTimes?this.frameTimes[this.frameTimes.length-1]:void 0}}),proactivelyLoadsVideo:o.a.observableProperty(!1),needsLoadedVideoForPlayback:o.a.observableProperty(!1),_reset_needsLoadedVideoForPlayback_whenAppropriate:o.a.observer("video",function(){this.needsLoadedVideoForPlayback=!1}),isVideoLoadAllowed:o.a.observableProperty({readOnly:!0,dependencies:["proactivelyLoadsVideo","needsLoadedVideoForPlayback"],get:function(){return this.proactivelyLoadsVideo||this.needsLoadedVideoForPlayback}}),errors:o.a.observableProperty({readOnly:!0,dependencies:["_videoProvider.error","_photoProvider.error"],get:function(){return[this._photoProvider.error,this._videoProvider.error].filter(function(l){return!!l})}}),lastError:o.a.observableProperty(),_lastPhotoError:o.a.observableProperty({readOnly:!0,dependencies:["_photoProvider.error"],get:function(){return this._photoProvider.error},didChange:function(l){this.lastError=l}}),_lastVideoError:o.a.observableProperty({readOnly:!0,dependencies:["_videoProvider.error"],get:function(){return this._videoProvider.error},didChange:function(l){this.lastError=l}}),_metadataVideoProvider:o.a.observableProperty(function(){return p.a.extend({requiresMimeTypeForRawArrayBufferSrc:!1,actuallyProvidesResultingVideoFromSecondaryLoad:!1}).create()}),_videoProvider:o.a.observableProperty(function(){return p.a.extend({owner:o.a.observableProperty(this),isSrcLoadAllowed:o.a.proxyProperty("owner.isVideoLoadAllowed"),exposedSrcKeyForErrorStrings:"videoSrc",exposedMimeTypeKeyForErrorStrings:"videoMimeType"}).create()}),_photoProvider:o.a.observableProperty(function(){return v.a.extend({exposedSrcKeyForErrorStrings:"photoSrc",exposedMimeTypeKeyForErrorStrings:"photoMimeType"}).create()})});n.a=d},function(i,n,r){function o(y){var x=[0,0,0,0,0,0,0,0,1];x[0]=p(y.slice(0,4),16,16),x[1]=p(y.slice(4,8),16,16),x[3]=p(y.slice(12,16),16,16),x[4]=p(y.slice(16,20),16,16);for(var T=0;T<g.length;T++)if(v(g[T],x))return 90*T;return 0}function p(y,x,T){var w=y[0]<<24|y[1]<<16|y[2]<<8|y[3];return Math.abs(w>>T)*((w&1<<x+T-1)!=0?-1:1)}function v(y,x){if(y===x)return!0;if(!y||!x)return!1;var T=y.length;if(T!==x.length)return!1;for(var w=0;w<T;w++)if(y[w]!==x[w])return!1;return!0}var u=r(16),f=r(45),d=r(0),l=r(5),P=r(6),_=r(2),a=r(3),s=[],c={},m=u.a.extend({__internalVideo:null,_internalVideoSRC:null,photoTime:d.a.observableProperty(),playbackStyle:d.a.observableProperty(null),effectType:d.a.observableProperty(null),frameTimes:d.a.observableProperty(),videoRotation:d.a.observableProperty(),actuallyProvidesResultingVideoFromSecondaryLoad:!0,_clearMetadataPropertiesOnUnload:d.a.observer("state",function(y){y!=="loaded"&&(this.photoTime=this.frameTimes=this.videoRotation=void 0)}),beginSecondaryLoad:function(y,x){this.preprocessAndAttemptToReadMetadataFromBuffer(y),this.actuallyProvidesResultingVideoFromSecondaryLoad&&(s[0]=y,c.type=x==="video/quicktime"?"video/mp4":x,x==="application/octet-stream"&&(l.a.warn('Encountered a Content-Type of "application/octet-stream" for the file obtained for `videoSrc`.Some browsers may be unable to use the video with this MIME type. If the video portion of the Player is not functioning, make sure the proper MIME type is being provided with the response,or provide the proper MIME type manually by assigning it to the `videoMimeType` property on the Player instance. For now, an attempt will be made to treat the videos bytes as "video/mp4", but playback is not guaranteed unless either of these corrective steps are taken.'),x="video/mp4"),this._internalVideo.src=this._internalVideoSRC=URL.createObjectURL(new Blob(s,c)),_.a.isIOS&&this._internalVideo.load())},abortCurrentSecondaryLoad:function(){this.__internalVideo&&(this.__internalVideo.pause(),this.__internalVideo.removeAttribute("src"),this.__internalVideo.load(),_.a.isIOS&&(this.__internalVideo=null),this._internalVideoSRC&&(URL.revokeObjectURL(this._internalVideoSRC),this._internalVideoSRC=null),this.effectType=null)},get _internalVideo(){var y=this.__internalVideo;return y||(y=this.__internalVideo=document.createElement("video"),y.addEventListener("canplay",this.loadDidSucceed.bind(this)),y.addEventListener("error",this.loadDidFail.bind(this)),y.volume=0),y},loadDidFail:function(y){if(y)return y.errCode=P.a.VIDEO_FAILED_TO_LOAD,this._super(y);var x=this.__internalVideo;return x.error.errCode=P.a.VIDEO_FAILED_TO_LOAD,x&&this._super(x.error)},loadDidSucceed:function(){var y=this.__internalVideo;return y&&this._super(y)},preprocessAndAttemptToReadMetadataFromBuffer:function(y){var x=void 0,T=void 0;try{x=new f.a(new f.b(y)),x.read()}catch{x=null}if(!x)return this.photoTime=null,this.frameTimes=null,void(this.videoRotation=0);var w=(T=x.tracks)&&(T=T.vide)&&(T=T[0])&&T.getAllSampleSeconds&&T.getAllSampleSeconds();w&&(this.frameTimes=w);var D=void 0;try{D=x.tracks.meta[0].timeToSeconds(x.tracks.meta[0].trak.edts.elst.editList[0].trackDuration)}catch{}D&&(this.photoTime=D);var j=new Uint8Array(y),F=(T=x.tracks)&&(T=T.soun)&&(T=T[0])&&(T=T.trak)&&T.offset;if(F){var I="free";j[F+4]=I.charCodeAt(0),j[F+5]=I.charCodeAt(1),j[F+6]=I.charCodeAt(2),j[F+7]=I.charCodeAt(3)}var Y=(T=x.tracks)&&(T=T.vide)&&(T=T[0])&&(T=T.trak)&&(T=T.tkhd)&&(T=T.offset)&&T+48,J=0;if(Y){for(var re=[],O=0;O<h.length;O++)re[O]=j[Y+O];if(J=o(re))for(var b=0;b<h.length;b++)j[Y+b]=h[b]}this.videoRotation=J;var S=x.metaData.keys&&x.metaData.keys.keyList.get("com.apple.photos.variation-identifier"),k=void 0;if(S>0)switch(x.metaData.values.items[S]){case 1:k=a.a.LOOP;break;case 2:k=a.a.BOUNCE;break;case 3:k=a.a.EXPOSURE}this.effectType=k}}),h=[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],g=[[1,0,0,0,1,0,0,0,1],[0,1,0,-1,0,0,0,0,1],[-1,0,0,0,-1,0,0,0,1],[0,-1,0,1,0,0,0,0,1]];n.a=m},function(i,n,r){var o=r(4),p=r(1),v=r(2),u=v.a.isSafari,f=o.a.create({correspondingPlaybackStyle:p.a.FULL,get minimumShortenedDuration(){return this.enterDuration+this.exitDuration+.01},get spontaneousFinishDuration(){return this.exitDuration},enterDuration:1/3,exitDuration:.5,videoBeginTime:.15,zoomScaleFactor:1.075,blurRadius:5,blurRadiusStep:.2,requiresInterpolation:!0,quantizeRadius:function(d){return this.blurRadiusStep?Math.round(d/this.blurRadiusStep)*this.blurRadiusStep:d},easeInOut:function(d){return d<0?0:d>1?1:.5-.5*Math.cos(d*Math.PI)},calculateAnimationDuration:function(d,l,P){var _=l?l+this.videoBeginTime+this.exitDuration:0;return Math.max(0,Math.min(d||1/0,_))},getEntranceExitParameter:function(d,l){return Math.min(Math.max(0,Math.min(1,1-this.easeInOut((d-(l-this.exitDuration))/this.exitDuration))),1-Math.max(0,Math.min(1,1-this.easeInOut(d/this.enterDuration))))||0},getTransform:function(d,l,P,_){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,m=1+(this.zoomScaleFactor-1)*this.getEntranceExitParameter(d,l),h=-(m-1)/2*P,g=-(m-1)/2*_,y=Math.round(h*devicePixelRatio)/devicePixelRatio,x=Math.round(g*devicePixelRatio)/devicePixelRatio;return Math.abs(m-a)<1e-5?"translate3d("+y+"px, "+x+"px, 0) scale3d("+s+", "+c+", 1)":h||g||m?"translate3d("+h+"px, "+g+"px, 0) scale3d("+m+", "+m+", 1)":"translate3d(0, 0, 0)"},photo:o.a.PhotoIngredient.create({opacity:o.a.computedStyle(function(d){if(d<this.recipe.enterDuration)return(1-this.recipe.easeInOut(d/this.recipe.enterDuration)).toString();if(d<this.renderer.duration-this.recipe.exitDuration)return"0";var l=this.recipe.easeInOut((d-(this.renderer.duration-this.recipe.exitDuration))/this.recipe.exitDuration);return l!==1?l:"1"}),display:o.a.computedStyle(function(d){return d>this.recipe.enterDuration&&d<this.renderer.duration-this.recipe.exitDuration?"none":""}),filter:o.a.computedStyle(function(d){if(!u)return"";var l=this.recipe,P=l.blurRadius*l.getEntranceExitParameter(d,this.renderer.duration);return P?"blur("+l.quantizeRadius(P)+"px)":""}),transform:o.a.computedStyle(function(d){return this.recipe.getTransform(d,this.renderer.duration,this.displayWidth,this.displayHeight)}),zIndex:o.a.computedStyle(function(){return 3})}),video:o.a.InterpolatedVideoIngredient.create({get backingScaleFactor(){return this.recipe.zoomScaleFactor},lookaheadTime:.01+7/15,videoTimeAtTime:function(d){var l=Math.max(0,Math.min(this.videoDuration,d-this.recipe.videoBeginTime));return Math.min(l,this.renderer.duration-this.recipe.exitDuration-this.recipe.videoBeginTime)},prepareVideoFramesFromTime:function(d){this.retainFramesForTime(d,d+this.lookaheadTime)},display:o.a.computedStyle(function(d){return d===0||d===this.renderer.duration?"none":""}),transform:o.a.computedStyle(function(d){return this.recipe.getTransform(d,this.renderer.duration,this.displayWidth,this.displayHeight,this.backingScaleFactor,this.backingScaleX,this.backingScaleY)}),zIndex:o.a.computedStyle(function(){return 1})})});n.a=f},function(i,n,r){var o=r(4),p=r(1),v=o.a.create({correspondingPlaybackStyle:p.a.HINT,minimumShortenedDuration:.9,get spontaneousFinishDuration(){return this.exitBlurDuration},exitBlurDuration:.75,bottomVideoRevealBeginTime:.1,zoomScaleFactor:1.075,blurRadius:7.5,blurRadiusStep:1,requiresInterpolation:!0,quantizeRadius:function(u){return Math.round(u/this.blurRadiusStep)*this.blurRadiusStep},tween:function(u){return u<0?0:u>1?1:.5-.5*Math.cos(u*Math.PI)},calculateAnimationDuration:function(u,f,d){var l=f?f-d+this.exitBlurDuration:0;return Math.max(0,Math.min(u||1/0,l))},photo:o.a.PhotoIngredient.create({hideDuration:.06,get returnDuration(){return this.recipe.exitBlurDuration},opacity:o.a.computedStyle(function(u){if(u<this.hideDuration)return(1-this.recipe.tween(u/this.hideDuration)).toString();if(u<this.renderer.duration-this.returnDuration)return"0";var f=this.recipe.tween((u-(this.renderer.duration-this.returnDuration))/this.returnDuration);return f!==1?f.toString():""}),display:o.a.computedStyle(function(u){return u>this.hideDuration&&u<this.renderer.duration-this.returnDuration?"none":""}),webkitFilter:o.a.computedStyle(function(u){if(u<this.renderer.duration-this.returnDuration)return"";var f=this.recipe.blurRadius*(1-this.recipe.tween((u-(this.renderer.duration-this.returnDuration))/this.returnDuration));return f?"blur("+this.recipe.quantizeRadius(f)+"px)":""}),transform:o.a.computedStyle(function(u){if(u<this.renderer.duration-this.returnDuration)return"translateZ(0)";var f=1+(this.recipe.zoomScaleFactor-1)*(1-this.recipe.tween((u-(this.renderer.duration-this.returnDuration))/this.returnDuration));return"translate3d("+-(f-1)/2*this.displayWidth+"px, "+-(f-1)/2*this.displayHeight+"px, 0) scale3d("+f+", "+f+", 1)"}),zIndex:o.a.computedStyle(function(){return 3})}),video:o.a.InterpolatedVideoIngredient.create({get backingScaleFactor(){return this.recipe.zoomScaleFactor},scaleInDuration:.15,get blurOutDuration(){return this.recipe.exitBlurDuration},lookaheadTime:.01+7/15,videoTimeAtTime:function(u){return Math.min(this.videoDuration,u+this.renderer.photoTime)},prepareVideoFramesFromTime:function(u){this.retainFramesForTime(u,u+this.lookaheadTime)},display:o.a.computedStyle(function(u){return u&&u!==this.renderer.duration?"":"none"}),transform:o.a.computedStyle(function(u){var f=1+(this.recipe.zoomScaleFactor-1)*Math.max(0,Math.min(1,1-this.recipe.tween((u-(this.renderer.duration-this.blurOutDuration))/this.blurOutDuration)-(1-this.recipe.tween(u/this.scaleInDuration)))),d=-(f-1)/2*this.displayWidth,l=-(f-1)/2*this.displayHeight,P=Math.round(d*devicePixelRatio)/devicePixelRatio,_=Math.round(l*devicePixelRatio)/devicePixelRatio;return Math.abs(f-this.backingScaleFactor)<1e-5?"translate3d("+P+"px, "+_+"px, 0) scale3d("+this.backingScaleX+", "+this.backingScaleY+", 1)":"translate3d("+d+"px, "+l+"px, 0) scale3d("+f+", "+f+", 1)"}),webkitFilter:o.a.computedStyle(function(u){var f=this.recipe.blurRadius*this.recipe.tween((u-(this.renderer.duration-this.blurOutDuration))/this.blurOutDuration);return f?"blur("+this.recipe.quantizeRadius(f)+"px)":""}),zIndex:o.a.computedStyle(function(){return 1})})});n.a=v},function(i,n,r){var o=r(4),p=r(2),v=(p.a.isSafari,o.a.create({requiresInterpolation:!0,photo:o.a.PhotoIngredient.create({display:o.a.computedStyle(function(u){return this.isPlaying||u>0?"none":""})}),video:o.a.InterpolatedVideoIngredient.create({lookaheadTime:.01+7/15,videoTimeAtTime:function(u){return u%this.renderer.duration},prepareVideoFramesFromTime:function(u){this.retainFramesForTime(u,u+this.lookaheadTime)},display:o.a.computedStyle(function(u){return""})}),beginFinishingPlaybackEarly:function(u){u.autoplay||(u.isPlaying?u.pause():u.wantsToPlay=!1)},continuePlayback:function(u){var f=u.currentTime,d=u.duration;f>=d&&(u.currentTime=f%d),u._rafID=requestAnimationFrame(u._nextFrame.bind(u))}}));n.a=v},function(i,n,r){var o=r(4),p=r(36),v=r(1);p.a.register();var u=o.a.create({correspondingPlaybackStyle:v.a.LOOP,photo:o.a.PhotoIngredient.create({display:o.a.computedStyle(function(f){return this.isPlaying||f>0?"none":""})}),video:o.a.VideoIngredient.create({display:o.a.computedStyle(function(f){return""})}),beginFinishingPlaybackEarly:function(f){f.autoplay||(f.isPlaying?f.pause():f.wantsToPlay=!1)},continuePlayback:function(f){var d=f.currentTime,l=f.duration;d>=l&&(f.currentTime=d%l),f._rafID=requestAnimationFrame(f._nextFrame.bind(f))},requestMoreCompatibleRecipe:function(f){return o.a.registerRecipeWithPlaybackStyle(p.a,this.correspondingPlaybackStyle),p.a}});n.a=u},function(i,n,r){var o=r(0),p=r(41),v=r(1),u=r(13),f=p.a.extend(u.a,{_loCanvas:null,_hiCanvas:null,backingScaleFactor:1,setUpForRender:function(){var d=this.element,l=(this.isPlaying,this.renderer),P=l.autoplay,_=l.parentView,a=l.playbackStyle,s=l.video;if(!this._loCanvas||!this._hiCanvas){d.innerHTML&&(d.innerHTML="");var c=this._loCanvas=o.a.canvasPool.get(),m=this._hiCanvas=o.a.canvasPool.get();c._context=c.getContext("2d"),m._context=m.getContext("2d"),c.style.cssText=m.style.cssText="position: absolute; left: 0; top: 0; width: 100%; height: 100%; transform: translateZ(0);",d.appendChild(c),d.appendChild(m),this._swapCanvases()}d.className="lpk-render-layer lpk-video",d.style.position="absolute",d.style.transformOrigin="0 0",d.style.zIndex=1,this._super(),a===v.a.LOOP&&(this.shouldLoop=!0),this.shouldLoop&&requestAnimationFrame(function(){s.currentTime=-1,P&&_.play()}),window.test=this},updateSize:function(d,l){if(!arguments.length)return this._super();this._super(d,l);var P=Math.ceil(d*this.backingScaleFactor),_=Math.ceil(l*this.backingScaleFactor);this.backingScaleX=P/d,this.backingScaleY=_/l,this.element.style.width=P+"px",this.element.style.height=_+"px",this._loCanvas&&this._hiCanvas&&(this._loCanvas.width=this._hiCanvas.width=P*devicePixelRatio,this._loCanvas.height=this._hiCanvas.height=_*devicePixelRatio,this._loCanvas._drawnFrameNumber=this._hiCanvas._drawnFrameNumber=-1,this.renderAtTime())},renderAtTime:function(d){if(!arguments.length)return this._super();this._super(d);var l=this.backingScaleX,P=this.backingScaleY;l===1&&P===1||(this.element.style.transform+=" scale3d("+1/l+", "+1/P+", 1)")},renderFramePair:function(d,l,P){(d&&this._hiCanvas._drawnFrameNumber===d.number||l&&this._loCanvas._drawnFrameNumber===l.number)&&this._swapCanvases(),this._putFrameInCanvasIfNeeded(d,this._loCanvas),this._putFrameInCanvasIfNeeded(l,this._hiCanvas),l&&(this._hiCanvas.style.opacity=P)},_swapCanvases:function(){var d=this._hiCanvas;this._hiCanvas=this._loCanvas,this._loCanvas=d,this._loCanvas.style.opacity="",this._loCanvas.style.zIndex=1,this._hiCanvas.style.zIndex=2},_putFrameInCanvasIfNeeded:function(d,l){l._drawnFrameNumber!==(l._drawnFrameNumber=d?d.number:-1)&&(l.setAttribute("data-frame-number",l._drawnFrameNumber.toString()),d?l._context.drawImage(d.image,0,0,l.width,l.height):l._context.clearRect(0,0,l.width,l.height))},dispose:function(){this._super(),this._loCanvas&&o.a.canvasPool.ret(this._loCanvas),this._hiCanvas&&o.a.canvasPool.ret(this._hiCanvas)},tearDownFromRender:function(){var d=this.renderer,l=d.parentView;this.shouldLoop=!1,l&&l.stop(),this._clearAllRetainedFrames(),this._super()}});n.a=f},function(i,n,r){var o=r(42),p=r(13),v=r(49),u=o.a.extend(p.a,{tagName:"canvas",get _canvas(){return this.element},get _context(){return this.__context||(this.__context=this._canvas.getContext("2d"))},init:function(){this._super.apply(this,arguments),this.element.className="lpk-render-layer lpk-photo",this.element.style.position="absolute",this.element.style.width=this.element.style.height="100%",this.element.style.transformOrigin="0 0",this.element.style.zIndex=2},tearDownFromRender:function(){this._super(),this._canvas.width=this._canvas.height=0},updateSize:function(f,d){if(!arguments.length)return this._super();this._super(f,d);var l=Math.ceil(f*devicePixelRatio),P=Math.ceil(d*devicePixelRatio),_=this.photo,a=this._canvas;this._lastPhoto===(this._lastPhoto=_)&&a.width===l&&a.height===P||(a.width=l,a.height=P,_&&r.i(v.a)(this._context,_,0,0,l,P))}});n.a=u},function(i,n,r){var o=r(0),p=r(2),v=r(13),u=r(43),f=u.a.extend(v.a,{_isPlayingChanged:o.a.observer("isPlaying",function(d){this._video&&(d?(this.duration=1/0,this.play()):this.pause())}),_isVisible:!1,applyStyles:function(){var d=this.element,l=this.video,P=this.videoRotation,_=l.videoHeight,a=l.videoWidth,s=1;[90,270].indexOf(P)>=0&&(s=a/_);var c=`
                height: 100%;
                position: absolute;
                width: 100%;
                -moz-transform: scale(`+s+") rotate("+P+`deg);
                -webkit-transform: scale(`+s+") rotate("+P+`deg);
                -o-transform: scale(`+s+") rotate("+P+`deg);
                -ms-transform: scale(`+s+") rotate("+P+`deg);
                transform: scale(`+s+") rotate("+P+`deg);
                z-index: 1;
            `;d.setAttribute("style",c),d.className="lpk-render-layer lpk-video",l.style.height="100%",l.style.width="100%"},cleanupElement:function(){var d=this.element,l=this.renderer,P=this._video,_=l.parentView;d.innerHtml&&(d.innerHtml=""),P&&(P.loop=!1,P.muted=!1,P.removeEventListener("pause",this.playIfPlaying)),_&&_.stop(),delete this._video},pause:function(){var d=this._isVisible,l=this._video;d&&l.pause()},play:function(){if(this._isVisible){var d=this._video,l=d.play();l?l.catch(this._handlePlayFailure):p.a.isIE||p.a.isEdge||(d.pause(),setTimeout(this._handlePlayFailure))}},_handlePlayFailure:o.a.boundFunction(function(){this.renderer.requestMoreCompatibleRecipe()}),playIfPlaying:o.a.boundFunction(function(){var d=this.isPlaying,l=this._video;if(d&&l.paused){var P=l.play();P&&P.catch(function(){})}}),setUpForRender:function(){var d=this.element,l=(this.isPlaying,this.renderer),P=l.autoplay,_=l.parentView,a=l.video;this.cleanupElement(),d.appendChild(a),this.applyStyles(),a.loop=!0,a.muted=!0,this._video=a,this._isVisible=!0,this._super(),P&&(a.addEventListener("pause",this.playIfPlaying),_.play())},tearDownFromRender:function(){this.cleanupElement(),this._isVisible=!1,this._super()}});n.a=f},function(i,n,r){function o(_){_.retain()}function p(_){_.release()}var v=r(0),u=r(7),f=r(17),d=u.a.extend({videoDecoder:v.a.proxyProperty("renderer.videoDecoder"),videoDuration:v.a.proxyProperty("videoDecoder.duration"),canRender:v.a.proxyProperty({readOnly:!0,proxyPath:"videoDecoder.canProvideFrames"}),init:function(){this._super.apply(this,arguments);var _=this.layerName,a=this.recipe;this._framePrepIDKey=a.name+"_"+_+"_framePrepID"},videoTimeAtTime:function(_){return _},_videoTimeAtTime:function(_){return isNaN(_)?_:this.videoTimeAtTime(_)},prepareToRenderAtTime:function(_){var a=this._currentPrepID=++l;if(!this.canRender)return!1;this.prepareVideoFramesFromTime(_);for(var s,c=this._retainedFrames,m=0,h=0;s=c[h];h++)s.readyState!==2&&(s[this._framePrepIDKey]=a,s.onReadyOrFail(this._frameDidPrepare),m++);return this._preppingFrameCount=m,!m},reduceMemoryFootprint:function(){this._super(),this._clearAllRetainedFrames()},_clearAllRetainedFrames:function(){this._clearExtraRetainedFrames(),this._clearRetainedInstantaneousFrames()},_clearExtraRetainedFrames:function(){var _=this._retainedFrames;_&&(_.forEach(p),_.length=0)},_clearRetainedInstantaneousFrames:function(){this._retainedLoFrame&&this._retainedLoFrame.release(),this._retainedHiFrame&&this._retainedHiFrame.release(),this._retainedLoFrame=this._retainedHiFrame=null},_frameDidPrepare:v.a.boundFunction(function(_){_[this._framePrepIDKey]===this._currentPrepID&&(_[this._framePrepIDKey]=void 0,--this._preppingFrameCount||this.renderer.prepareToRenderAtTime(this.renderer.currentTime))}),prepareVideoFramesFromTime:function(_){this.retainFramesForTime(_)},canRenderAtTime:function(_){if(this.display(_)==="none")return!0;if(!this.canRender)return!1;for(var a,s=!0,c=this.requiredFramesForTime(_),m=0;a=c[m];m++)s=s&&a.readyState===2,a.retain().release();return s},renderAtTime:function(_){if(!arguments.length)return this._super();if(this.display(_)==="none")return this._clearRetainedInstantaneousFrames(),this._super(_);var a=this._videoTimeAtTime(_),s=this.requiredFramesForVideoTime(a),c=s[0]||null,m=s[1]||null;if(c&&c.retain(),m&&m.retain(),this._clearRetainedInstantaneousFrames(),this._retainedLoFrame=c,this._retainedHiFrame=m,c&&(c=c.backingFrame),m&&(m=m.backingFrame),c&&m&&c.number>m.number){var h=c;m=c,c=h}c===m&&(m=null);var g=!c||m?this.videoDecoder.fractionalIndexForTime(a):c.frameNumber,y=g-(0|g);this.renderFramePair(c,m,y),this._super(_)},renderFramePair:function(){},requiredFramesForVideoTime:function(_,a,s){isNaN(a)&&(a=_);var c=this.videoDecoder,m=this.videoDuration,h=c.frameCount,g=P;if(g.length=0,a<0||_>m||isNaN(_)||isNaN(a))return g;var y=Math.max(0,Math.floor(c.fractionalIndexForTime(_))),x=Math.min(c.frameCount,Math.ceil(c.fractionalIndexForTime(a))),T=x<y,w=T?h-1:x;if(y===w-1){var D=c.frameTimes;D[w]-D[y]<1/30+.001&&(w=y)}for(var j=y;j<=w;j++)f.a&&j===0||(g.push(c.getFrame(j,s)),j+1===h&&T&&(j=-1,w=x));return g},requiredFramesForTime:function(_,a,s){return this.requiredFramesForVideoTime(this._videoTimeAtTime(_),this._videoTimeAtTime(a),s)},retainFramesForVideoTime:function(_,a,s){a===void 0&&(a=_);var c=this.lookaheadTime,m=this.shouldLoop,h=this.requiredFramesForVideoTime(_,a,s),g=this._retainedFrames||(this._retainedFrames=[]);h.forEach(o);for(var y=g.length-1;y>=0;y--){var x=g[y],T=x.time;(!m||T>c/2)&&(p(x),g.splice(y,1))}g.push.apply(g,h)},retainFramesForTime:function(_,a,s){return this.retainFramesForVideoTime(this._videoTimeAtTime(_),this._videoTimeAtTime(a),s)},dispose:function(){this.retainFramesForVideoTime(NaN),this._super()}}),l=1,P=[];n.a=d},function(i,n,r){var o=r(7),p=r(0),v=o.a.extend({isPlaying:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.parentView.isPlaying"}),photo:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.photo"}),canRender:p.a.proxyProperty("photo"),canRenderAtTime:function(u){var f=this.photo;return!(this.display(u)!=="none"&&(!f||f instanceof Image&&!f.complete))}});n.a=v},function(i,n,r){var o=r(7),p=r(0),v=o.a.extend({canRender:p.a.proxyProperty({readOnly:!0,proxyPath:"video"}),isPlaying:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.parentView.isPlaying"}),video:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.video"}),videoRotation:p.a.proxyProperty({readOnly:!0,proxyPath:"renderer.provider.videoRotation"})});n.a=v},function(i,n,r){function o(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function p(g){var y=r.i(u.a)(g),x=l.get(y);if(x)return x;var T=g.map(function(w){if(w[0]==="i"&&a(w[1]))return"I"+w.substring(1)});return g=g.concat(T.filter(function(w){return!!w})),x=new RegExp(g.join("|"),"g"),l.set(y,x),x}function v(g,y){var x=g.charCodeAt(0),T=y.charCodeAt(0),w=new Map;return function(D){var j=w.get(D);if(j!==void 0)return j;var F=D.charCodeAt(0);return j=F>=x&&F<=T,w.set(D,j),j}}var u=r(20),f=function(){function g(y,x){for(var T=0;T<x.length;T++){var w=x[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,x,T){return x&&g(y.prototype,x),T&&g(y,T),y}}(),d=["iOS","iPhone","iPad","iPod","WebKit"],l=new Map,P=v("0","9"),_=v("a","z"),a=v("A","Z"),s=function(g){return _(g)||a(g)},c=function(g){return s(g)||P(g)},m=new Map,h=function(){function g(){o(this,g)}return f(g,null,[{key:"splitIntoArray",value:function(y,x,T){for(var w=y.indexOf(x),D=0,j=x.length;w!==-1;)T.push(y.substring(D,w)),D=w+j,w=y.indexOf(x,D);T.push(y.substring(D))}},{key:"hyphenate",value:function(y,x,T){if(!y)return"";x||x===null||x===!1||(x=d);var w=x||T?r.i(u.a)(x)+"#"+y+"#"+!!T:y,D=m.get(w);if(D)return D;if(Array.isArray(x)){var j=g.hyphenateCarefully(y,x,T);return m.set(w,j),j}var F=y.length,I="",Y=void 0,J=void 0,re=void 0,O=void 0,b=void 0;for(Y=0;Y<F;Y++)J=y[Y-1],re=y[Y],O=re.toLowerCase(),b=y[Y+1],J&&c(re)&&c(J)&&(!a(J)&&a(re)||P(J)&&s(re)||b&&a(J)&&a(re)&&_(b))?I+="-"+O:I+=O;return m.set(w,I),I}},{key:"hyphenateCarefully",value:function(y,x,T){var w=p(x),D=y.match(w);if(!D||!D.length)return g.hyphenate(y,null,T);for(var j=y.split(w),F=g.hyphenate(j[0]),I=0,Y=D.length;I<Y;I++){var J=D[I];T||(J=J.toLowerCase());var re=j[I+1];re&&(re=g.hyphenate(re,null,T)),F+=(F&&"-")+J,re&&(F+=(s(re[0])?"-":"")+re)}return F}}]),g}();n.a=h},function(i,n,r){function o(_,a){if(!(_ instanceof a))throw new TypeError("Cannot call a class as a function")}function p(_,a){_||v(a)}function v(_){throw _}var u=r(5);r.d(n,"b",function(){return d}),r.d(n,"a",function(){return l});var f=function(){function _(a,s){for(var c=0;c<s.length;c++){var m=s[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(a,m.key,m)}}return function(a,s,c){return s&&_(a.prototype,s),c&&_(a,c),a}}(),d=(function(){function _(a,s){o(this,_),this.w=a,this.h=s}f(_,[{key:"toString",value:function(){return"("+this.w+", "+this.h+")"}},{key:"getHalfSize",value:function(){return new _(this.w>>>1,this.h>>>1)}},{key:"length",value:function(){return this.w*this.h}}])}(),function(){function _(a,s,c){o(this,_),this.bytes=new Uint8Array(a),this.start=s||0,this.pos=this.start,this.end=s+c||this.bytes.length}return f(_,[{key:"readU8Array",value:function(a){if(this.pos>this.end-a)return null;var s=this.bytes.subarray(this.pos,this.pos+a);return this.pos+=a,s}},{key:"readU32Array",value:function(a,s,c){if(s=s||1,this.pos>this.end-a*s*4)return null;if(s===1){for(var m=new Uint32Array(a),h=0;h<a;h++)m[h]=this.readU32();return m}for(var g=new Array(a),y=0;y<a;y++){var x=null;if(c){x={};for(var T=0;T<s;T++)x[c[T]]=this.readU32()}else{x=new Uint32Array(s);for(var w=0;w<s;w++)x[w]=this.readU32()}g[y]=x}return g}},{key:"read8",value:function(){return this.readU8()<<24>>24}},{key:"readU8",value:function(){return this.pos>=this.end?null:this.bytes[this.pos++]}},{key:"read16",value:function(){return this.readU16()<<16>>16}},{key:"readU16",value:function(){if(this.pos>=this.end-1)return null;var a=this.bytes[this.pos+0]<<8|this.bytes[this.pos+1];return this.pos+=2,a}},{key:"read24",value:function(){return this.readU24()<<8>>8}},{key:"readU24",value:function(){var a=this.pos,s=this.bytes;if(a>this.end-3)return null;var c=s[a+0]<<16|s[a+1]<<8|s[a+2];return this.pos+=3,c}},{key:"peek32",value:function(a){var s=this.pos,c=this.bytes;if(s>this.end-4)return null;var m=c[s+0]<<24|c[s+1]<<16|c[s+2]<<8|c[s+3];return a&&(this.pos+=4),m}},{key:"read32",value:function(){return this.peek32(!0)}},{key:"readU32",value:function(){return this.peek32(!0)>>>0}},{key:"read4CC",value:function(){var a=this.pos;if(a>this.end-4)return null;for(var s="",c=0;c<4;c++)s+=String.fromCharCode(this.bytes[a+c]);return this.pos+=4,s}},{key:"readFP16",value:function(){return this.read32()/65536}},{key:"readFP8",value:function(){return this.read16()/256}},{key:"readISO639",value:function(){for(var a=this.readU16(),s="",c=0;c<3;c++){var m=a>>>5*(2-c)&31;s+=String.fromCharCode(m+96)}return s}},{key:"readUTF8",value:function(a){for(var s="",c=0;c<a;c++)s+=String.fromCharCode(this.readU8());return s}},{key:"readPString",value:function(a){var s=this.readU8();p(s<=a);var c=this.readUTF8(s);return this.reserved(a-s-1,0),c}},{key:"skip",value:function(a){this.seek(this.pos+a)}},{key:"reserved",value:function(a,s){for(var c=0;c<a;c++)p(this.readU8()===s)}},{key:"seek",value:function(a){(a<0||a>this.end)&&v("Index out of bounds (bounds: [0, "+this.end+"], index: "+a+")."),this.pos=a}},{key:"subStream",value:function(a,s){return new _(this.bytes.buffer,a,s)}},{key:"uint",value:function(a){for(var s=this.position,c=s+a,m=0,h=s;h<c;h++)m<<=8,m|=255&this.readU8();return m}},{key:"length",get:function(){return this.end-this.start}},{key:"position",get:function(){return this.pos}},{key:"remaining",get:function(){return this.end-this.pos}}]),_}()),l=function(){function _(a){o(this,_),this.stream=a,this.tracks={},this.metaData={}}return f(_,[{key:"getPath",value:function(a){for(var s=a.split("."),c=this,m=0,h=s.length;m<h;m++)c=c?c[s[m]]:void 0;return c}},{key:"readBoxes",value:function(a,s){for(;a.peek32();){var c=this.readBox(a);if(c.type in s){var m=s[c.type];Array.isArray(m)||(s[c.type]=[m]),s[c.type].push(c)}else s[c.type]=c}}},{key:"readBox",value:function(a){function s(){g.version=a.readU8(),g.flags=a.readU24()}function c(){return g.size-(a.position-g.offset)}function m(){a.skip(c())}function h(){var de=a.subStream(a.position,c());y.readBoxes(de,g),a.skip(de.length)}var g={offset:a.position},y=this;(function(){g.size=a.readU32(),g.type=a.read4CC()})();var x=void 0,T=void 0,w=void 0;switch(g.type){case"ftyp":var D=g;D.name="File Type Box",D.majorBrand=a.read4CC(),D.minorVersion=a.readU32(),D.compatibleBrands=new Array((D.size-16)/4);for(var j=0;j<D.compatibleBrands.length;j++)D.compatibleBrands[j]=a.read4CC();break;case"moov":g.name="Movie Box",h();break;case"mvhd":var F=g;F.name="Movie Header Box",s(),p(F.version==0),F.creationTime=a.readU32(),F.modificationTime=a.readU32(),F.timeScale=a.readU32(),F.duration=a.readU32(),F.rate=a.readFP16(),F.volume=a.readFP8(),a.skip(10),F.matrix=a.readU32Array(9),a.skip(24),F.nextTrackId=a.readU32();break;case"trak":var I=g;I.name="Track Box",h();var Y=new P(this,I),J=I.mdia&&I.mdia.hdlr&&I.mdia.hdlr.handlerType||"unknownHandlerType",re=this.tracks;(re[J]||(re[J]=[])).push(Y),re[I.tkhd.trackId]=Y;break;case"tkhd":var O=g;O.name="Track Header Box",s(),p(O.version==0),O.creationTime=a.readU32(),O.modificationTime=a.readU32(),O.trackId=a.readU32(),a.skip(4),O.duration=a.readU32(),a.skip(8),O.layer=a.readU16(),O.alternateGroup=a.readU16(),O.volume=a.readFP8(),a.skip(2),O.matrix=a.readU32Array(9),O.width=a.readFP16(),O.height=a.readFP16();break;case"edts":g.name="Edit Atom",h();break;case"elst":var b=g;b.name="Edit List Atom",s(),b.editList=[],w=a.readU32();for(var S=0;S<w;S++)b.editList.push({trackDuration:a.read32(),mediaTime:a.read32(),mediaRate:a.readU32()});p(!c()),m();break;case"mdia":g.name="Media Box",h();break;case"mdhd":var k=g;k.name="Media Header Box",s(),p(k.version==0),k.creationTime=a.readU32(),k.modificationTime=a.readU32(),k.timeScale=a.readU32(),k.duration=a.readU32(),k.language=a.readISO639(),a.skip(2);break;case"hdlr":var E=g;E.name="Handler Reference Box",s(),a.skip(4),E.handlerType=a.read4CC(),a.skip(12),T=E.size-32,T>0&&(E.name=a.readUTF8(T));break;case"minf":g.name="Media Information Box",h();break;case"stbl":g.name="Sample Table Box",h();break;case"stsd":var B=g;B.name="Sample Description Box",s(),B.sd=[],a.readU32(),h();break;case"avc1":var z=g;a.reserved(6,0),z.dataReferenceIndex=a.readU16(),p(a.readU16()==0),p(a.readU16()==0),a.readU32(),a.readU32(),a.readU32(),z.width=a.readU16(),z.height=a.readU16(),z.horizontalResolution=a.readFP16(),z.verticalResolution=a.readFP16(),p(a.readU32()==0),z.frameCount=a.readU16(),z.compressorName=a.readPString(32),z.depth=a.readU16(),p(a.readU16()==65535),h();break;case"mp4a":var H=g;if(a.reserved(6,0),H.dataReferenceIndex=a.readU16(),H.version=a.readU16(),H.version!==0){m();break}a.skip(2),a.skip(4),H.channelCount=a.readU16(),H.sampleSize=a.readU16(),H.compressionId=a.readU16(),H.packetSize=a.readU16(),H.sampleRate=a.readU32()>>>16,h();break;case"esds":g.name="Elementary Stream Descriptor",s(),m();break;case"avcC":var U=g;U.name="AVC Configuration Box",U.configurationVersion=a.readU8(),U.avcProfileIndicaation=a.readU8(),U.profileCompatibility=a.readU8(),U.avcLevelIndication=a.readU8(),U.lengthSizeMinusOne=3&a.readU8(),p(U.lengthSizeMinusOne==3,"TODO"),x=31&a.readU8(),U.sps=[];for(var ie=0;ie<x;ie++)U.sps.push(a.readU8Array(a.readU16()));x=31&a.readU8(),U.pps=[];for(var te=0;te<x;te++)U.pps.push(a.readU8Array(a.readU16()));m();break;case"btrt":var ne=g;ne.name="Bit Rate Box",ne.bufferSizeDb=a.readU32(),ne.maxBitrate=a.readU32(),ne.avgBitrate=a.readU32();break;case"stts":var L=g;L.name="Decoding Time to Sample Box",s(),L.table=a.readU32Array(a.readU32(),2,["count","delta"]);break;case"stss":var G=g;G.name="Sync Sample Box",s(),G.samples=a.readU32Array(a.readU32());break;case"stsc":var W=g;W.name="Sample to Chunk Box",s(),W.table=a.readU32Array(a.readU32(),3,["firstChunk","samplesPerChunk","sampleDescriptionId"]);break;case"stsz":var Q=g;Q.name="Sample Size Box",s(),Q.sampleSize=a.readU32(),x=a.readU32(),Q.sampleSize==0&&(Q.table=a.readU32Array(x));break;case"stco":var le=g;le.name="Chunk Offset Box",s(),le.table=a.readU32Array(a.readU32());break;case"smhd":var C=g;C.name="Sound Media Header Box",s(),C.balance=a.readFP8(),a.reserved(2,0);break;case"mdat":var R=g;R.name="Media Data Box",p(R.size>=8,"Cannot parse large media data yet."),R.data=a.readU8Array(c());break;case"mebx":g.name="Mebx",h();break;case"meta":g.name="Metadata",h();break;case"keys":var A=g;A.name="Metadata Item Keys",s();var K=A.keyCount=a.read32(),V=A.offset-A.size;A.keyList=new Map;for(var M=1;M<=K;M++){var N=a.read32()-8;N<1||N>V||(a.skip(4),A.keyList.set(a.readUTF8(N),M))}this.metaData.keys=A;break;case"ilst":var q=g;q.name="Metadata Item List",q.items=[];for(var X=q.offset+q.size;a.position<X;){var $=(a.position,a.readU32(),a.readU32()),oe=a.readU32()-16,Z=(a.read4CC(),a.readU8()),ae=a.readU24(),se=(a.readU16(),a.readU16(),void 0);se=Z===0&&ae!==1?a.uint(oe):a.readUTF8(oe),q.items[$]=se}this.metaData.values=q;break;default:m()}return g}},{key:"read",value:function(){var a=new Date().getTime();this.file={},this.readBoxes(this.stream,this.file),u.a.info("Parsed stream in "+(new Date().getTime()-a)+" ms")}},{key:"traceSamples",value:function(){var a=this.tracks[1],s=this.tracks[2];u.a.info("Video Samples: "+a.getSampleCount()),u.a.info("Audio Samples: "+s.getSampleCount());for(var c=0,m=0,h=0;h<100;h++){var g=a.sampleToOffset(c),y=s.sampleToOffset(m),x=a.sampleToSize(c,1),T=s.sampleToSize(m,1);g<y?(u.a.info("V Sample "+c+" Offset : "+g+", Size : "+x),c++):(u.a.info("A Sample "+m+" Offset : "+y+", Size : "+T),m++)}}}]),_}(),P=function(){function _(a,s){o(this,_),this.file=a,this.trak=s}return f(_,[{key:"getSampleSizeTable",value:function(){return this.trak.mdia.minf.stbl.stsz.table}},{key:"getSampleCount",value:function(){return this.getSampleSizeTable().length}},{key:"sampleToSize",value:function(a,s){for(var c=this.getSampleSizeTable(),m=0,h=a;h<a+s;h++)m+=c[h];return m}},{key:"sampleToChunk",value:function(a){var s=this.trak.mdia.minf.stbl.stsc.table;if(s.length===1){var c=s[0];return p(c.firstChunk===1),{index:a/c.samplesPerChunk,offset:a%c.samplesPerChunk}}for(var m=0,h=0;h<s.length;h++){var g=s[h];if(h>0){var y=s[h-1],x=g.firstChunk-y.firstChunk,T=y.samplesPerChunk*x;if(!(a>=T))return{index:m+Math.floor(a/y.samplesPerChunk),offset:a%y.samplesPerChunk};if(a-=T,h===s.length-1)return{index:m+x+Math.floor(a/g.samplesPerChunk),offset:a%g.samplesPerChunk};m+=x}}p(!1)}},{key:"chunkToOffset",value:function(a){return this.trak.mdia.minf.stbl.stco.table[a]}},{key:"sampleToOffset",value:function(a){var s=this.sampleToChunk(a);return this.chunkToOffset(s.index)+this.sampleToSize(a-s.offset,s.offset)}},{key:"timeToSample",value:function(a){for(var s=this.trak.mdia.minf.stbl.stts.table,c=0,m=0;m<s.length;m++){var h=s[m].count*s[m].delta;if(!(a>=h))return c+Math.floor(a/s[m].delta);a-=h,c+=s[m].count}}},{key:"sampleToTime",value:function(a){for(var s=this.trak.mdia.minf.stbl.stts.table,c=0,m=0,h=0;h<s.length&&c<a;h++){var g=s[h],y=Math.min(a-c,g.count);c+=y,m+=y*g.delta}return m}},{key:"getTotalTime",value:function(){for(var a=this.trak.mdia.minf.stbl.stts.table,s=0,c=0;c<a.length;c++)s+=a[c].count*a[c].delta;return p(this.trak.mdia.mdhd.duration===s),this.trak.mdia.mdhd.duration}},{key:"getTotalTimeInSeconds",value:function(){return this.timeToSeconds(this.getTotalTime())}},{key:"getTimeScale",value:function(){return this.trak.mdia.mdhd.timeScale}},{key:"timeToSeconds",value:function(a){return a/this.getTimeScale()}},{key:"secondsToTime",value:function(a){return a*this.getTimeScale()}},{key:"secondsToSample",value:function(a){return this.timeToSample(this.secondsToTime(a))}},{key:"sampleToSeconds",value:function(a){return this.timeToSeconds(this.sampleToTime(a))}},{key:"getAllSampleTimes",value:function(){for(var a=[],s=this.getSampleCount(),c=0;c<s;c++)a.push(this.sampleToTime(c));return a}},{key:"getAllSampleSeconds",value:function(){for(var a=[],s=this.getSampleCount(),c=0;c<s;c++)a.push(this.sampleToSeconds(c));return a}},{key:"getSampleNALUnits",value:function(a){for(var s=this.file.stream.bytes,c=this.sampleToOffset(a),m=c+this.sampleToSize(a,1),h=[];m-c>0;){var g=new d(s.buffer,c).readU32();h.push(s.subarray(c+4,c+g+4)),c=c+g+4}return h}}]),_}()},function(i,n,r){var o={staticMembers:{_pool:null,_cache:null,init:function(){this._pool=[],this._cache={},this._super()},getPoolingCacheKey:function(){throw"Must implement `getPoolingCacheKey` to use PoolCaching."},getCached:function(){var p=this.getPoolingCacheKey.apply(this,arguments),v=this._cache[p];return v||(v=this._cache[p]=this._pool.pop()||this.create(),v._poolingCacheKey=p,v.initFromPool.apply(v,arguments)),v},peekCached:function(){var p=this.getPoolingCacheKey.apply(this,arguments);return this._cache[p]||null},_disposeInstance:function(p){delete this._cache[p._poolingCacheKey],p._poolingCacheKey=void 0,p._poolingLifecycleCount=1+(0|p._poolingLifecycleCount),this._pool.push(p)}},dispose:function(){},_poolingCacheKey:null,initFromPool:function(){},_retainCount:0,retain:function(){return this._retainCount++,this},release:function(){return this._retainCount--,this._retainCount||this.dispose(),this}};n.a=o},function(i,n,r){function o(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?g:y}function p(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}function v(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}var u=r(19);r.d(n,"a",function(){return P}),r.d(n,"b",function(){return a}),r.d(n,"c",function(){return c}),r.d(n,"d",function(){return h});var f=function(){function g(y,x){for(var T=0;T<x.length;T++){var w=x[T];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,x,T){return x&&g(y.prototype,x),T&&g(y,T),y}}(),d=function(){function g(){v(this,g),this._a=[]}return f(g,[{key:"get",value:function(){return this._a.pop()||this.create()}},{key:"ret",value:function(y){this.prepare(y),this._a.push(y)}}]),g}(),l=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return[]}},{key:"prepare",value:function(x){x.length=0}}]),y}(d),P=new l,_=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return new u.a}},{key:"prepare",value:function(x){x.clear()}}]),y}(d),a=new _,s=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return Object.create(null)}},{key:"prepare",value:function(x){var T=x;for(var w in T)delete T[w]}}]),y}(d),c=new s,m=function(g){function y(){return v(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,g),f(y,[{key:"create",value:function(){return document.createElement("canvas")}},{key:"prepare",value:function(x){var T=x.parentNode;T&&T.removeChild(x),x.width=x.height=0}}]),y}(d),h=new m},function(i,n,r){function o(v,u){return v.apply(void 0,u)}var p={_readiness:"pending",_resolutionArgs:null,_fulfillmentCallbacks:null,_rejectionCallbacks:null,onReadyOrFail:function(v,u){this._resolveIfAlreadyResolved(v,u,!1)||this._pendCallbacks(v,u)},onReadyOrFailSync:function(v,u){this._resolveIfAlreadyResolved(v,u,!0)||this._pendCallbacks(v,u)},_resolveIfAlreadyResolved:function(v,u,f){var d=this._resolutionArgs;return this._readiness==="success"&&v?(f?o(v,d):setTimeout(o,0,v,d),!0):!(this._readiness!=="failure"||!u)&&(f?o(u,d):setTimeout(o,0,u,d),!0)},_pendCallbacks:function(v,u){v&&(this._fulfillmentCallbacks||(this._fulfillmentCallbacks=[])).push(v),u&&(this._rejectionCallbacks||(this._rejectionCallbacks=[])).push(u)},clearReadinessCallbacks:function(){this._fulfillmentCallbacks&&(this._fulfillmentCallbacks.length=0),this._rejectionCallbacks&&(this._rejectionCallbacks.length=0)},resetReadiness:function(){this._readiness="pending",this._resolutionArgs&&(this._resolutionArgs.length=0),this.clearReadinessCallbacks()},resolveReadiness:function(){this._readiness==="pending"&&(this._readiness="success",(this._resolutionArgs=this._resolutionArgs||[]).push.apply(this._resolutionArgs,arguments),this._invokeCallbacks(this._fulfillmentCallbacks),this.clearReadinessCallbacks())},rejectReadiness:function(){this._readiness==="pending"&&(this._readiness="failure",(this._resolutionArgs=this._resolutionArgs||[]).push.apply(this._resolutionArgs,arguments),this._invokeCallbacks(this._rejectionCallbacks),this.clearReadinessCallbacks())},_invokeCallbacks:function(v){if(v){for(var u,f=0;u=v[f];f++)u.apply(void 0,this._resolutionArgs);v.length=0}}};n.a=p},function(i,n,r){function o(){for(var s=1;s<arguments.length;s++)this[s-1]=arguments[s];return this}function p(s){return s&&s.tagName==="IMG"&&/^data:image\/svg|\.svg\?|\.svg$/.test(s.src)}var v=document.createElement("canvas"),u=v.getContext("2d"),f=document.createElement("canvas"),d=f.getContext("2d");v.width=f.width=v.height=f.height=0;var l=!1,P=!1,_=function(s,c){for(var m=arguments.length,h=Array(m>2?m-2:0),g=2;g<m;g++)h[g-2]=arguments[g];if(p(c))return s.drawImage.apply(s,o.apply(a,arguments)),!0;var y=l,x=P;l=P=!1;var T=c instanceof HTMLImageElement?c.naturalWidth:c.width,w=c instanceof HTMLImageElement?c.naturalHeight:c.height;if(!T||!w)throw"Source image provided to drawImageSmooth was not loaded, or otherwise had no dimensions.";var D=void 0,j=void 0,F=void 0,I=void 0,Y=void 0,J=void 0,re=void 0,O=void 0;switch(arguments.length-1){case 3:D=0,j=0,F=T,I=w,Y=arguments[2],J=arguments[3],re=T,O=w;break;case 5:D=0,j=0,F=T,I=w,Y=arguments[2],J=arguments[3],re=arguments[4],O=arguments[5];break;case 9:D=arguments[2],j=arguments[3],F=arguments[4],I=arguments[5],Y=arguments[6],J=arguments[7],re=arguments[8],O=arguments[9]}var b=re/F,S=O/I;if(b&&S){var k=Math.max(b,S),E=Math.pow(2,Math.ceil(Math.log(1.1*k)/Math.log(2)));if(E>=1)return s.drawImage.apply(s,o.apply(a,arguments)),!0;var B=void 0;if(y){B="_cachedSmoothDownsample_from"+D+","+j+","+F+","+I+"@"+E+"x";var z=c[B];if(z)return s.drawImage(z,0,0,z.width,z.height,Y,J,re,O),!0}if(x)return s.drawImage.apply(s,o.apply(a,arguments)),!1;var H=1,U=F,ie=I,te=Math.max(Math.pow(2,Math.ceil(Math.log(U)/Math.log(2))),v.width),ne=Math.max(Math.pow(2,Math.ceil(Math.log(ie)/Math.log(2))),v.height);for(v.width===te&&v.height===ne||(v.width=f.width=te,v.height=f.height=ne),u.drawImage(c,D,j,F,I,0,0,F,I);H>E;){d.drawImage(v,0,0,U,ie,0,0,U=Math.ceil(U/2),ie=Math.ceil(ie/2)),u.clearRect(0,0,U,ie);var L=v;v=f,f=L;var G=u;u=d,d=G,H/=2}if(y){var W=document.createElement("canvas");W.width=U,W.height=ie,W.getContext("2d").drawImage(v,0,0),c[B]=W}return s.drawImage(v,0,0,U,ie,Y,J,re,O),u.clearRect(0,0,F,I),d.clearRect(0,0,F,I),!0}};_.usingCache=function(){return l=!0,this},_.avoidingWorkIf=function(s){return P=s,this};var a=[];n.a=_},function(i,n,r){function o(){var v="_callbacksForEventHandler"+ ++p;return function(u){var f=this[v]||(this[v]=[]);if(typeof u=="function")return f.push(u);if(f)for(var d=0,l=f.length;d<l;++d)f[d](u)}}n.a=o;var p=1},function(i,n,r){function o(a){var s=a&&new DataView(a),c={};return s&&p(s)&&v(s,c),c}function p(a){return a.getUint16(0)===65496}function v(a,s){for(var c=a.byteLength,m=2;m<c;){var h=a.getUint16(m);h===65505&&u(a,m+4,s),h!==65472&&h!==65474||f(a,m+5,s),m+=2+a.getUint16(m+2)}return s}function u(a,s,c){if(a.getUint32(s)!==1165519206)return c;var m=s+6,h=void 0,g=a.getUint16(m);if(g===18761)h=!0;else{if(g!==19789)return c;h=!1}for(var y=m+a.getUint32(m+4,h),x=a.getUint16(y,h),T=0;T<x;T++){var w=y+12*T+2,D=a.getUint16(w,h);D===274&&(c.orientation=a.getUint16(w+8,h)),D===34665&&d(a,m,_(a,w,h),h,c)}return c}function f(a,s,c){return c.height=a.getUint16(s),c.width=a.getUint16(s+2),c}function d(a,s,c,m,h){var g=P(a,s+c,m),y=void 0;return 37500 in g&&(y=g[37500],l(a,s+a.getUint32(y+8),h)),h}function l(a,s,c){for(var m="",h=0;h<9;h++)m+=String.fromCharCode(a.getUint8(s+h));if(m!=="Apple iOS")return c;var g=a.getUint16(s+9+3)===18761,y=P(a,s+9+3+2,g);return 27 in y&&(c.photosRenderEffect=_(a,y[27],g)),c}function P(a,s,c){for(var m=a.getUint16(s,c),h=s+2,g={},y=0;y<m;y++){var x=h+12*y;g[a.getUint16(x,c)]=x}return g}function _(a,s,c){var m=a.getUint16(s+2,c),h=a.getUint32(s+4,c),g=a.getUint32(s+8,c),y=[];switch(m){case 3:if(h===1)return a.getUint16(s+8,c);if(h===2)return[a.getUint16(s+8,c),a.getUint16(s+10,c)];for(var x=0;x<h;x++)y[x]=a.getUint16(g+4*x,c);return y;case 4:if(h===1)return g;for(var T=0;T<h;T++)y[T]=a.getUint32(g+4*T,c);return y;case 9:if(h===1)return a.getInt32(s+8,c);for(var w=0;w<h;w++)y[w]=a.getInt32(g+4*w,c);return y;default:return null}}n.a=o},function(i,n,r){function o(){for(var v=p()+p();v.length<16;)v+=p();return v.slice(0,16)}function p(){return Math.random().toString(16).substring(2)}n.a=o},function(i,n,r){function o(u,f){var d=u,l=d._computedStyle;l||(l=d._computedStyle=document.defaultView.getComputedStyle(u,null));var P=l.getPropertyValue(f);return!P&&p.get(f)&&(P=p.get(f)(l)||P),P}n.a=o;var p=function(){var u=new Map;return u.set("font",function(f){for(var d="",l=0,P=v.length;l<P;l++){var _=v[l],a=f.getPropertyValue("font-"+_);if(a&&(d&&(d+=" "),d+=a,_==="size")){var s=f.getPropertyValue("line-height");s&&(d+="/"+s)}}return d}),u}(),v=["style","variant","weight","size","family"]},function(i,n,r){function o(v,u,f,d,l,P,_){var a=void 0;a=!1;var s=arguments.length;s!==6&&(_=s-1);var c=void 0,m=void 0,h=void 0,g=void 0,y=void 0;if(_===2||_===3){var x=u,T=f;m=x.height,c=x.width,g=T.height,h=T.width,y=d}else c=u,m=f,h=d,g=l,y=P;var w=c/m,D=h/g,j=a?w<D:w>D;return y=y||{},y.width=j?h:g*w,y.height=j?h/w:g,y}function p(v,u,f,d,l){return o(!1,v,u,f,d,l,arguments.length)}n.a=p},function(i,n,r){n.a="current"},function(i,n,r){n.a="Mcurrent"},function(i,n,r){n.a="1.5.6"}])})}(Sr)),Sr.exports}var rc=tc();const ic=["src"],nc=["src","muted","loop"],ac=Ot({__name:"LivePhoto",props:{photoSrc:{default:""},videoSrc:{default:""},muted:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},useApple:{type:Boolean,default:!1}},setup(e){const t=e,i=me(!1),n=me(!1),r=me(!1),o=me(!1),p=me(""),v=me(""),u=me(!1),f=me(!1),d=me(!1),l=me(null),P=me(null),_=async()=>{if(d.value&&P.value&&p.value&&v.value){await Vr();const T=rc.Player(P.value);T.photoSrc=p.value,T.videoSrc=v.value}},a=T=>{T.stopPropagation(),l.value&&(r.value?l.value.pause():(n.value=!0,l.value.play()))},s=T=>{var w;(w=window.top)==null||w.postMessage(T,window.location.origin)},c=T=>{const w=T.target;!/trigger/.test(w.className)&&!n.value&&s(p.value)},m=()=>{i.value=!0,/iphone/i.test(navigator.userAgent)&&/micromessenger/i.test(navigator.userAgent)&&setTimeout(()=>{h(!0)},500)},h=T=>{o.value=T},g=T=>{r.value=T},y=T=>{n.value=T},x=()=>{const T=new URLSearchParams(window.location.search),w=T.get("picUrl")||T.get("photoSrc"),D=T.get("videoUrl")||T.get("videoSrc"),j=T.get("muted"),F=T.get("loop"),I=T.get("useApple");w&&(p.value=w),D&&(v.value=D),j&&(u.value=!!j),F&&(f.value=!!F),I&&(d.value=!!I),!w&&t.photoSrc&&(p.value=t.photoSrc),!D&&t.videoSrc&&(v.value=t.videoSrc),j||(u.value=t.muted),F||(f.value=t.loop),I||(d.value=t.useApple)};return Dt([d,p,v,P],()=>{d.value&&_()},{immediate:!0}),Li(()=>{x()}),(T,w)=>(We(),qe("div",{class:"live-photo",onClick:c},[d.value?(We(),qe("div",{key:0,ref_key:"applePlayerRef",ref:P,class:"live-img"},null,512)):(We(),qe(je,{key:1},[ee("div",{class:"live-trigger",onClick:a,style:He({opacity:Number(o.value)})},[ee("div",{class:"trigger-icon",style:He({animationPlayState:r.value?"running":"paused"})},null,4),w[5]||(w[5]=ee("span",{class:"trigger-text"},"LIVE",-1))],4),ee("img",{class:"live-img",src:p.value,onLoad:m,style:He({opacity:Number(i.value)})},null,44,ic),ee("video",{ref_key:"videoRef",ref:l,class:"live-video",src:v.value,style:He({opacity:Number(n.value)}),muted:u.value,loop:f.value,playsinline:"","webkit-playsinline":"",onCanplay:w[0]||(w[0]=()=>h(!0)),onLoadedmetadata:w[1]||(w[1]=()=>h(!0)),onPlaying:w[2]||(w[2]=()=>g(!0)),onPause:w[3]||(w[3]=()=>g(!1)),onEnded:w[4]||(w[4]=()=>y(!1))},null,44,nc)],64))]))}}),oc=(e,t)=>{const i=e.__vccOpts||e;for(const[n,r]of t)i[n]=r;return i},lo=oc(ac,[["__scopeId","data-v-67f2bfe9"]]),sc=e=>{e.component("LivePhoto",lo)},lc={install:sc,LivePhoto:lo},uc={class:"demo"},cc={class:"container"},dc={class:"controls"},hc={class:"control-group"},fc={class:"radio-group"},pc={class:"radio-label"},vc={class:"radio-label"},mc={class:"control-group"},yc={class:"checkbox-label"},gc={class:"control-group"},bc={class:"checkbox-label"},_c={class:"control-group"},Pc={class:"control-group"},xc={class:"demo-area"},Sc={class:"demo-container"},Tc={class:"demo-info"},wc={class:"config-list"},kc={class:"code-example"},Oc={class:"code-block"},Cc=Ot({__name:"Demo",setup(e){const t=me(!1),i=me(!0),n=me(!1),r=me(oo),o=me(so);return(p,v)=>(We(),qe("div",uc,[ee("div",cc,[v[20]||(v[20]=ee("h1",{class:"page-title"},"",-1)),v[21]||(v[21]=ee("p",{class:"page-subtitle"},"LivePhoto",-1)),ee("div",dc,[ee("div",hc,[v[8]||(v[8]=ee("label",null,"",-1)),ee("div",fc,[ee("label",pc,[Rt(ee("input",{type:"radio","onUpdate:modelValue":v[0]||(v[0]=u=>t.value=u),value:!1},null,512),[[Pn,t.value]]),v[6]||(v[6]=Se("  "))]),ee("label",vc,[Rt(ee("input",{type:"radio","onUpdate:modelValue":v[1]||(v[1]=u=>t.value=u),value:!0},null,512),[[Pn,t.value]]),v[7]||(v[7]=Se(" Apple "))])])]),ee("div",mc,[ee("label",yc,[Rt(ee("input",{type:"checkbox","onUpdate:modelValue":v[2]||(v[2]=u=>i.value=u)},null,512),[[bn,i.value]]),v[9]||(v[9]=Se("  "))])]),ee("div",gc,[ee("label",bc,[Rt(ee("input",{type:"checkbox","onUpdate:modelValue":v[3]||(v[3]=u=>n.value=u)},null,512),[[bn,n.value]]),v[10]||(v[10]=Se("  "))])]),ee("div",_c,[v[11]||(v[11]=ee("label",null,"URL",-1)),Rt(ee("input",{type:"url","onUpdate:modelValue":v[4]||(v[4]=u=>r.value=u),placeholder:"URL",class:"url-input"},null,512),[[gn,r.value]])]),ee("div",Pc,[v[12]||(v[12]=ee("label",null,"URL",-1)),Rt(ee("input",{type:"url","onUpdate:modelValue":v[5]||(v[5]=u=>o.value=u),placeholder:"URL",class:"url-input"},null,512),[[gn,o.value]])])]),ee("div",xc,[ee("div",Sc,[Pe(lt(lc),{"photo-src":r.value,"video-src":o.value,"use-apple":!0,muted:i.value,loop:n.value},null,8,["photo-src","video-src","muted","loop"])]),ee("div",Tc,[v[18]||(v[18]=ee("h3",null,"",-1)),ee("ul",wc,[ee("li",null,[v[13]||(v[13]=ee("strong",null,"",-1)),Se(Ne(t.value?"Apple":""),1)]),ee("li",null,[v[14]||(v[14]=ee("strong",null,"",-1)),Se(Ne(i.value?"":""),1)]),ee("li",null,[v[15]||(v[15]=ee("strong",null,"",-1)),Se(Ne(n.value?"":""),1)]),ee("li",null,[v[16]||(v[16]=ee("strong",null,"",-1)),Se(Ne(r.value||""),1)]),ee("li",null,[v[17]||(v[17]=ee("strong",null,"",-1)),Se(Ne(o.value||""),1)])])])]),ee("div",kc,[v[19]||(v[19]=ee("h3",null,"",-1)),ee("div",Oc,[ee("pre",null,[ee("code",null,`<LivePhoto
  :photo-src="`+Ne(r.value?`"${r.value}"`:"demoPhoto")+`"
  :video-src="`+Ne(o.value?`"${o.value}"`:"demoVideo")+`"
  :use-apple="`+Ne(t.value)+`"
  :muted="`+Ne(i.value)+`"
  :loop="`+Ne(n.value)+`"
/>`,1)])])]),v[22]||(v[22]=ee("div",{class:"instructions"},[ee("h3",null,""),ee("div",{class:"instruction-grid"},[ee("div",{class:"instruction-card"},[ee("h4",null,""),ee("p",null,'"LIVE"/')]),ee("div",{class:"instruction-card"},[ee("h4",null,"Apple"),ee("p",null,"AppleLivePhotosKitiOS")])])],-1))])]))}}),Rc=fr(Cc,[["__scopeId","data-v-e61064ee"]]),Fc={},Ec={class:"docs"};function Ac(e,t){return We(),qe("div",Ec,t[0]||(t[0]=[Di(`<div class="container" data-v-07da5eb9><h1 data-v-07da5eb9></h1><p data-v-07da5eb9>LivePhoto Vue API</p><div class="doc-section" data-v-07da5eb9><h2 data-v-07da5eb9></h2><div class="code-block" data-v-07da5eb9><code data-v-07da5eb9>npm install livephoto-vue</code></div></div><div class="doc-section" data-v-07da5eb9><h2 data-v-07da5eb9></h2><div class="code-block" data-v-07da5eb9><pre data-v-07da5eb9><code data-v-07da5eb9>&lt;script setup&gt;
import { LivePhoto } from &#39;livephoto-vue&#39;
&lt;/script&gt;

&lt;template&gt;
  &lt;LivePhoto 
    photo-src=&quot;path/to/photo.jpg&quot;
    video-src=&quot;path/to/video.mp4&quot;
  /&gt;
&lt;/template&gt;</code></pre></div></div><div class="doc-section" data-v-07da5eb9><h2 data-v-07da5eb9>API </h2><table class="api-table" data-v-07da5eb9><thead data-v-07da5eb9><tr data-v-07da5eb9><th data-v-07da5eb9></th><th data-v-07da5eb9></th><th data-v-07da5eb9></th><th data-v-07da5eb9></th></tr></thead><tbody data-v-07da5eb9><tr data-v-07da5eb9><td data-v-07da5eb9>photo-src</td><td data-v-07da5eb9>String</td><td data-v-07da5eb9>&#39;&#39;</td><td data-v-07da5eb9>URL</td></tr><tr data-v-07da5eb9><td data-v-07da5eb9>video-src</td><td data-v-07da5eb9>String</td><td data-v-07da5eb9>&#39;&#39;</td><td data-v-07da5eb9>URL</td></tr><tr data-v-07da5eb9><td data-v-07da5eb9>use-apple</td><td data-v-07da5eb9>Boolean</td><td data-v-07da5eb9>false</td><td data-v-07da5eb9>Apple</td></tr><tr data-v-07da5eb9><td data-v-07da5eb9>muted</td><td data-v-07da5eb9>Boolean</td><td data-v-07da5eb9>false</td><td data-v-07da5eb9></td></tr><tr data-v-07da5eb9><td data-v-07da5eb9>loop</td><td data-v-07da5eb9>Boolean</td><td data-v-07da5eb9>false</td><td data-v-07da5eb9></td></tr></tbody></table></div></div>`,1)]))}const Lc=fr(Fc,[["render",Ac],["__scopeId","data-v-07da5eb9"]]),Ic={},Mc={class:"examples"};function Dc(e,t){return We(),qe("div",Mc,t[0]||(t[0]=[Di(`<div class="container" data-v-5276a07a><h1 data-v-5276a07a></h1><p data-v-5276a07a>LivePhoto</p><div class="example-grid" data-v-5276a07a><div class="example-card" data-v-5276a07a><h3 data-v-5276a07a></h3><div class="code-block" data-v-5276a07a><pre data-v-5276a07a><code data-v-5276a07a>&lt;LivePhoto 
  photo-src=&quot;photo.jpg&quot;
  video-src=&quot;video.mp4&quot;
/&gt;</code></pre></div></div><div class="example-card" data-v-5276a07a><h3 data-v-5276a07a>Apple</h3><div class="code-block" data-v-5276a07a><pre data-v-5276a07a><code data-v-5276a07a>&lt;LivePhoto 
  photo-src=&quot;photo.jpg&quot;
  video-src=&quot;video.mp4&quot;
  :use-apple=&quot;true&quot;
/&gt;</code></pre></div></div><div class="example-card" data-v-5276a07a><h3 data-v-5276a07a></h3><div class="code-block" data-v-5276a07a><pre data-v-5276a07a><code data-v-5276a07a>&lt;LivePhoto 
  photo-src=&quot;photo.jpg&quot;
  video-src=&quot;video.mp4&quot;
  :muted=&quot;true&quot;
  :loop=&quot;true&quot;
/&gt;</code></pre></div></div><div class="example-card" data-v-5276a07a><h3 data-v-5276a07a>URL</h3><div class="code-block" data-v-5276a07a><pre data-v-5276a07a><code data-v-5276a07a>// URL: ?photoSrc=...&amp;videoSrc=...&amp;useApple=true
&lt;LivePhoto /&gt;</code></pre></div></div></div></div>`,1)]))}const Uc=fr(Ic,[["render",Dc],["__scopeId","data-v-5276a07a"]]),Vc=[{path:"/",component:Ju},{path:"/demo",component:Rc},{path:"/docs",component:Lc},{path:"/examples",component:Uc}],Nc=Eu({history:ou(),routes:Vc}),uo=Ol(Vu);uo.use(Nc);uo.mount("#app");
